(()=>{var e,t={16858:(e,t,n)=>{n(23157),n(92222),e.exports={convertPathToURL:function(e,t){if("1"==={NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.IS_SPOTIFY_DESKTOP_APP)return"/".concat(e);if("hot"==={NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.WEBPACK_BUILD&&e.startsWith("build/")){var n={NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.WEBPACK_HOT_PORT;return"https://".concat({NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.WEBPACK_HOT_HOST,":").concat(n,"/cdn/").concat(e)}return"".concat(t.cdn_url,"/").concat(e)}}},69453:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA"}},69419:(e,t,n)=>{"use strict";n(69070),n(65069),n(47042),n(69600),n(74916),n(23123),Object.defineProperty(t,"__esModule",{value:!0}),t.fromHex=t.toHex=t.toBytes=t.fromBytes=void 0;var r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a={},o={};function i(e,t,n){for(var r=0,a=0;a<e.length;++a){var o=e[a]*t+r;e[a]=o%n,r=~~(o/n)}for(;r;)e.push(r%n),r=~~(r/n)}function s(e,t,n,r){var a,o,i=0;for(o=0;o<t.length;++o)a=~~e[o]+t[o]*n+i,e[o]=a%r,i=~~(a/r);for(;i;)a=~~e[o]+i,e[o]=a%r,i=~~(a/r),++o}function l(e,t,n){for(var r=[0],a=[1],o=0,l=e;o<l.length;o++){s(r,a,l[o],n),i(a,t,n)}return r}function c(e,t){for(var n=[],r=0,a=e;r<a.length;r++){var o=a[r];n.push(t[o])}return n.reverse()}function d(e,t){for(void 0===t&&(t=0);e.length<t;)e.push(0);return e}!function(){for(var e=0,t=r.length;e<t;++e)o[r[e]]=e;for(e=0;e<16;++e)a["0123456789abcdef"[e]]=e;for(e=0;e<16;++e)a["0123456789ABCDEF"[e]]=e}(),t.fromBytes=function(e,t){return c(d(l(e.slice(0).reverse(),256,62),t),r).join("")},t.toBytes=function(e,t){return d(l(c(e.split(""),o),62,256),t).reverse()},t.toHex=function(e,t){var n=l(c(e.split(""),o),62,16);return c(d(n,t),r).join("")},t.fromHex=function(e,t){var n=l(c(e.split(""),a),16,62);return c(d(n,t),r).join("")}},98307:(e,t,n)=>{"use strict";n(69070),n(47042),n(69600),n(96647),n(27479),n(87714),n(82801),n(1174),n(75505),Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=4096,o=function(){for(var e=[],t=0;t<256;++t)e[t]=255;for(t=0;t<r.length;++t)e[r.charCodeAt(t)]=t;return String.fromCharCode.apply(String,e)}();var i=function(e){for(var t=String(e),n=[],a=t.length,o=0;o<a;){var i=255&t.charCodeAt(o++);if(o===a){n.push(r.charAt(i>>2),r.charAt((3&i)<<4),"==");break}var s=t.charCodeAt(o++);if(o===a){n.push(r.charAt(i>>2),r.charAt((3&i)<<4|(240&s)>>4),r.charAt((15&s)<<2),"=");break}var l=t.charCodeAt(o++);n.push(r.charAt(i>>2),r.charAt((3&i)<<4|(240&s)>>4),r.charAt((15&s)<<2|(192&l)>>6),r.charAt(63&l))}return n.join("")};t.encode=i;var s=function(e){for(var t,n,r=String(e),i=[],s=r.length,l=0;;){do{t=o.charCodeAt(255&r.charCodeAt(l++))}while(255===t&&l<s);do{n=o.charCodeAt(255&r.charCodeAt(l++))}while(255===n&&l<s);if(255===n)break;i.push(255&(t<<2|n>>4));do{t=o.charCodeAt(255&r.charCodeAt(l++))}while(255===t&&l<s);if(255===t)break;i.push(255&(n<<4|t>>2));do{n=o.charCodeAt(255&r.charCodeAt(l++))}while(255===n&&l<s);if(255===n)break;i.push(255&(t<<6|n))}return function(e){if(e.length<a)return String.fromCharCode.apply(String,e);var t=0,n=[];do{n.push(String.fromCharCode.apply(String,e.slice(t,t+a))),t+=a}while(t<e.length);return n.join("")}(i)};t.decode=s,"undefined"!=typeof window&&window.btoa&&window.atob&&(t.encode=i=function(e){return window.btoa(e)},t.decode=s=function(e){return window.atob(e)})},5778:(e,t,n)=>{"use strict";n(69070),t.DS=void 0,n(69419);var r=n(98307);t.DS=r},40465:(e,t,n)=>{"use strict";var r=n(4942),a=(n(21703),n(96647),n(47941),n(82526),n(57327),n(41539),n(38880),n(89554),n(54747),n(49337),n(33321),n(69070),n(67294)),o=n(73935),i=n(47785),s=n(98712),l=n(6165),c=(n(81299),n(12419),n(15671)),d=n(43144),u=n(97326),p=n(60136),f=n(82963),h=n(61120),_=(n(92222),n(73012)),y=999999,m="@media (max-width: ".concat(999998,"px)"),g="@media (min-width: ".concat(y,"px)"),v=.6,b="drop-shadow(0 0 2px rgba(0, 0, 0, 0.4))",E="600",w=(n(82772),n(85827),n(21249),n(69600),n(47042),n(74916),n(23123),n(15396)),S="embed_v2";n(39714),n(66992),n(78783),n(33948),n(60285),n(41637),n(64765);n(75505),n(87714),n(82801),n(1174);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=document.getElementById(e);return n?JSON.parse(n.innerHTML):t}catch(r){return t}}var R=n(69518);function P(e){return!!e&&("function"!=typeof e.toOpenURL&&"function"==typeof e.toURL)}var T=function(e,t,n){return n&&e.searchParams.set("t",n.toString()),t&&(e.searchParams.has("utm_source")||e.searchParams.set("utm_source",t)),e.searchParams.has("utm_medium")||e.searchParams.set("utm_medium",function(){var e;if("undefined"==typeof window)return!1;if(void 0!==window.orientation)switch(window.orientation){case 0:case 180:e=window.screen.width;break;default:e=window.screen.height}else{var t=window.screen.orientation&&window.screen.orientation.type||window.screen.msOrientation||"";if(0===t.indexOf("portrait"))e=window.screen.width;else{if(0!==t.indexOf("landscape"))return!1;e=window.screen.height}}return e<=432}()?"mobile":"desktop"),e};function A(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new URL("undefined"!=typeof location&&location.href?location.href:"https://open.spotify.com"),r=null;if(e){var a=P(e)?e.toURL():e.toOpenURL();r=new URL(a),t&&n.searchParams.forEach((function(e,t){r.searchParams.set(t,e)}))}else r=n,t||(r.search="");r.searchParams.delete("nd"),r.searchParams.delete("fallback"),r.searchParams.set("go","1");var o=k("config");return"string"==typeof(null==o?void 0:o.correlationId)&&r.searchParams.append("sp_cid",o.correlationId),r}var C=function(e,t){return e.entities[t]},I=function(e){return"https://open.spotify.com/".concat(e.split(":").slice(1).join("/"))},L=function(e){var t=C(e,e.resource).uri,n=(0,w.EC)(t);return T(A(n,!1),"embed_player_m",void 0)},O=function(e){var t,n=C(e,e.resource).uri,r=(0,w.EC)(n);return T(((t=A(r,!1)).searchParams.set("fallback","getapp"),t),"embed_player_m",void 0)},D=n(20573);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){return C(e,e.resource)},x=function(e){return M(e).type},U=(0,D.P1)([function(e){return M(e)},function(e){return e}],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.type){case"album":var t=j({},e);return delete t.tracks,e.tracks.items.map((function(e){return j(j({},e),{},{album:t})}));case"artist":return e.tracks.map((function(e){return e}));case"playlist":var n=e.tracks.items.filter((function(e){return!!e.track}));return n.map((function(e,t){return j(j({},e.track),{},{track_number:t+1})}));case"track":case"episode":return[j({preview_url:e.audio_preview_url,is_playable:!!e.audio_preview_url},e)];case"show":return e.episodes.items.map((function(e){return j(j({},e),{},{preview_url:e.audio_preview_url,is_playable:!!e.audio_preview_url})}));default:return[]}})),F=function(e){var t=M(e)||{};switch(t.type){case"album":case"artist":case"playlist":case"show":return t.images[0]&&t.images[0].url;case"track":return t.album.images[0].url;case"episode":return t.show.images[0].url;default:return}};var Z,B=function(e){return e.viewport.width<y},Y=function(e){return function(e){return-1===["track","episode"].indexOf(M(e).type)}(e)?e.viewport.height>150:e.viewport.height>230},K=function(e){return"".concat(B(e)?"legacy":"modern","-").concat(Y(e)?"extended":"basic")},V=function(e){return"legacy-extended"===K(e)&&-1!==["track","episode"].indexOf(M(e).type)},G=n(87462);n(40561),n(19601);!function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(Z||(Z={}));var H,W=n(64638);!function(e){e.USER_INFO_REQUEST_EMPTY_RESPONSE="USER_INFO_REQUEST_EMPTY_RESPONSE",e.USER_INFO_REQUEST_FAILED_WITH_STATUS="USER_INFO_REQUEST_FAILED_WITH_STATUS",e.HARMONY_NO_TRACKS_LOADED="HARMONY_NO_TRACKS_LOADED",e.HARMONY_OPERATION_FORBIDDEN="HARMONY_OPERATION_FORBIDDEN",e.HARMONY_LOCAL_PLAYER_DISABLED="HARMONY_LOCAL_PLAYER_DISABLED",e.HARMONY_INVALID_DESCRIPTOR_ID="HARMONY_INVALID_DESCRIPTOR_ID",e.CONNECTAPI_CLIENT_INVALID_ARGUMENTS="CONNECTAPI_CLIENT_INVALID_ARGUMENTS",e.CONNECTAPI_CLIENT_MISSING_DEVICE_ID="CONNECTAPI_CLIENT_MISSING_DEVICE_ID",e.CONNECTAPI_CLIENT_NO_CONNECTION_ID="CONNECT_API_CLIENT_NO_CONNECTION_ID",e.CONNECTAPI_CLIENT_NO_DEVICE="CONNECTAPI_CLIENT_NO_DEVICE",e.CONNECTAPI_CLIENT_NO_SESSION_ID="CONNECTAPI_CLIENT_NO_SESSION_ID",e.CONNECTAPI_CLIENT_NO_STATE="CONNECTAPI_CLIENT_NO_STATE",e.CONNECTAPI_CLIENT_INVALID_POSITION="CONNECT_API_CLIENT_INVALID_POSITION",e.CONNECTAPI_CLIENT_INVALID_VOLUME="CONNECT_API_CLIENT_INVALID_VOLUME",e.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED="CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED",e.CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS="CONNECTAPI_REGISTRATION_FAILED_WITH_STATUS",e.CP_NO_DEVICE_DESCRIPTOR="CP_NO_DEVICE_DESCRIPTOR",e.CP_NO_CONNECTION_ID="CP_NO_CONNECTION_ID",e.CP_REGISTRATION_FAILED_WITH_STATUS="CP_REGISTRATION_FAILED_WITH_STATUS",e.CP_REGISTRATION_FAILED_NON_PREMIUM="CP_REGISTRATION_FAILED_NON_PREMIUM",e.CP_REQUEST_FAILED_WITH_STATUS="CP_REQUEST_FAILED_WITH_STATUS",e.CP_NO_DEVICE_ID="CP_NO_DEVICE_ID",e.CP_NO_RESPONSE_BODY="CP_NO_RESPONSE_BODY",e.CP_NO_TRACKING_DATA="CP_NO_TRACKING_DATA",e.CP_INVALID_STATE="CP_INVALID_STATE",e.QUEUE_MANAGER_NO_STATE="QUEUE_MANAGER_NO_STATE",e.QUEUE_OPERATION_STALE_REVISION="QUEUE_OPERATION_STALE_REVISION",e.TP_NO_RESPONSE_BODY="TP_NO_RESPONSE_BODY",e.TP_REGISTRATION_FAILED_NON_PREMIUM="TP_REGISTRATION_FAILED_NON_PREMIUM",e.TP_REGISTRATION_FAILED_WITH_STATUS="TP_REGISTRATION_FAILED_WITH_STATUS",e.TP_MAX_SUBSCRIPTIONS_REACHED="TP_MAX_SUBSCRIPTIONS_REACHED",e.TP_UPDATE_REQUEST_EMPTY_RESPONSE="TP_UPDATE_REQUEST_EMPTY_RESPONSE",e.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS="TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS",e.TP_UNKNOWN_COMMAND="TP_UNKNOWN_COMMAND",e.TP_CANNOT_CREATE_STATE_REF="TP_CANNOT_CREATE_STATE_REF",e.TP_MISSING_INITIAL_STATE="TP_MISSING_INITIAL_STATE",e.TP_INVALID_STATE_REFERENCE="TP_INVALID_STATE_REFERENCE",e.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS="TP_CONFLICT_REQUEST_FAILED_WITH_STATUS"}(H||(H={}));n(88674),n(27105);var q=n(88809);var z,Q=n(29439),$=(n(68309),n(33178));function X(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}}!function(e){e.APPLOAD="appload",e.BACK_BUTTON="backbtn",e.CLICK_ROW="clickrow",e.CLICK_SIDE="clickside",e.END_PLAY="endplay",e.FORWARD_BUTTON="fwdbtn",e.LOGOUT="logout",e.PLAY_BUTTON="playbtn",e.POPUP="popup",e.REMOTE="remote",e.TRACK_DONE="trackdone",e.TRACK_ERROR="trackerror",e.UNKNOWN="unknown",e.URI_OPEN="uriopen",e.CAPPED="capped",e.SEEK="seek"}(z||(z={}));var J,ee,te,ne="@local",re=65535;!function(e){e.AUTHENTICATED="authenticated",e.AUTHENTICATION_ERROR="authentication_error",e.AUTOPLAY_FAILED="autoplay_failed",e.BEFORE_DISCONNECT="before_disconnect",e.BEFORE_VOLUME_CHANGE="before_volume_change",e.BUFFER_STALLED="stalled",e.BUFFERING_END="buffering_end",e.BUFFERING_START="buffering_start",e.CONNECTED="connected",e.CONNECTION_ERROR="connection_error",e.DEVICES_CHANGED="devices_changed",e.DEVICE_DEACTIVATED="device_deactivated",e.DEVICE_DESCRIPTOR_CHANGED="descriptor_changed",e.DISCONNECTED="disconnected",e.DURATION_CHANGED="duration_changed",e.ERROR="error",e.LAST_ACTIVE_DEVICE_INFO_CHANGED="last_active_device_info_changed",e.LOCAL_CONTEXT_ENDED="local_context_ended",e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.LOCAL_PLAYER_ENABLED="local_player_enabled",e.LOCAL_PLAYER_LOGGED_OUT="local_player_logged_out",e.LOGGED_OUT="logged_out",e.MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.MAX_SUBSCRIPTIONS_REACHED="max_subscriptions_reached",e.PLAYBACK_CAPPED="playback_capped",e.PLAYER_INITIALIZATION_DONE="player_initialization_done",e.PLAYER_INITIALIZATION_FAILED="player_initialization_failed",e.PRODUCT_STATE_CHANGED="product_state_changed",e.PROGRESS="progress",e.PLAYER_QUEUE_CHANGED="player_queue_changed",e.RECONNECTED="reconnected",e.RECONNECTING="reconnecting",e.REMOTE_OBSERVER_DISABLED="remote_observer_disabled",e.REMOTE_OBSERVER_ENABLED="remote_observer_enabled",e.SERVICE_REGISTRATION_ERROR="service_registration_error",e.STATE_CHANGED="state_changed",e.STOPPED_ON_BACKGROUND="stopped_on_background",e.TRACK_ENDED="track_ended",e.UNRECOVERABLE_FAILURE="unrecoverable_failure",e.VIDEO_ELEMENT_APPENDED="video_element_appended",e.VIDEO_ELEMENT_REMOVED="video_element_removed",e.VOLUME_CHANGED="volume_changed",e.DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.SPEED_CHANGED="speed_changed"}(J||(J={})),function(e){e.CLOUD_PLAYBACK="cloud-playback",e.CONNECT_API="connect-api",e.HARMONY="harmony",e.PLAYBACK="playback",e.TRACK_PLAYBACK="track-playback",e.TRANSPORT="transport"}(ee||(ee={})),function(e){e[e.OFF=0]="OFF",e[e.CONTEXT=1]="CONTEXT",e[e.TRACK=2]="TRACK"}(te||(te={}));var ae=n(72407);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ie=function(e){(0,p.Z)(n,e);var t=oe(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).status=-1,a.unrecoverable=!1,a.debug={},a.code=e,a.name="HarmonyError",a}return(0,d.Z)(n,null,[{key:"fatal",value:function(e,t){var r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,ae.Z)(Error));function se(e,t){return!e&&!t||!(!e||!t)&&(e.id===t.id&&e.is_active===t.is_active&&e.is_controllable===t.is_controllable&&e.is_observable===t.is_observable&&e.is_being_activated===t.is_being_activated&&e.local===t.local&&e.name===t.name&&e.type===t.type&&e.version===t.version&&e.volume===t.volume)}n(41817),n(32165);var le=n(93433);n(77601),n(91038);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var de=function(e){(0,p.Z)(n,e);var t=ce(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).unrecoverable=!1,a.code=e,a.name="PlayerQueueError",a}return(0,d.Z)(n)}((0,ae.Z)(Error));function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=":::";function _e(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ignoreMetaForTrack:!1},i=[],s=[],l=!1,c=!1;if(!(null==e?void 0:e.length))return{items:i,tracks:s,hasQueuedTracks:l};var d,u=pe(e);try{for(u.s();!(d=u.n()).done;){var p=d.value,f="spotify:delimiter"===p.uri||/^spotify:meta:/.test(p.uri)?"meta":"track",h="".concat(p.uid).concat(he).concat(null===(t=p.metadata)||void 0===t?void 0:t.iteration),_={type:f,uri:p.uri,uid:p.uid,qid:h,metadata:p.metadata||{},hidden:"true"===(null===(n=p.metadata)||void 0===n?void 0:n.hidden),queued:"true"===(null===(r=p.metadata)||void 0===r?void 0:r.is_queued),provider:p.provider,removed_reasons:p.removed,$blck_rs:p.blocked};_.queued&&(l=!0),i.push(_),"meta"===_.type?c=!0:!o.ignoreMetaForTrack&&c||"track"!==_.type||_.hidden||(null===(a=_.removed_reasons)||void 0===a?void 0:a.length)||s.push(_)}}catch(y){u.e(y)}finally{u.f()}return{items:i,tracks:s,hasQueuedTracks:l}}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(e))throw new TypeError("Items is not an array.");if(!e.length)return[];var n,r=[],a=pe(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o){"string"==typeof o&&(o={type:"track",uri:o});var i={uri:o.uri,uid:o.uid,metadata:o.metadata||{},removed:o.removed_reasons,blocked:o.$blck_rs,provider:o.provider};(o.queued||t.queued)&&(i.metadata.is_queued="true",i.provider="queue"),(o.hidden||"meta"===o.type)&&(i.metadata.hidden="true"),r.push(i)}}}catch(s){a.e(s)}finally{a.f()}return r}function me(e){var t=e.split(he),n=(0,Q.Z)(t,2),r=n[0],a=n[1],o={type:"track",uid:r};return a&&(o.metadata={iteration:a}),o}var ge=function(e){(0,p.Z)(n,e);var t=ue(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._hasInitialState=!1,r._reportInactiveQueues=!1,r._onlyLocalQueue=!1,r._currentPlayerState=null,r._currentInternalQueue=null,r._currentQueue=null,r._hasQueuedTracks=!1,r._connectClient=e.connectClient,r._runner=e.runner||function(e){return e()},r._parsePlayerState=r._parsePlayerState.bind((0,u.Z)(r)),r._onlyLocalQueue=!!e.onlyLocalQueue,r._reportInactiveQueues=!!e.reportInactiveQueues,r._connectClient.on("player_state_changed",r._onPlayerStateChanged.bind((0,u.Z)(r))),e.initialContextPlayerState&&r._parsePlayerState(e.initialContextPlayerState),r}return(0,d.Z)(n,[{key:"_onPlayerStateChanged",value:function(e){var t=e.data,n=t.playerState,r=t.orphaned,a=t.isLocal;this._parsePlayerState(n,r,a)}},{key:"_parsePlayerState",value:function(e,t,n){var r,a,o;if(this._hasInitialState=!0,this._onlyLocalQueue&&!n||!this._reportInactiveQueues&&t)this._currentPlayerState=null,this._currentInternalQueue=null,this._currentQueue=null;else if(this._currentPlayerState=null!=e?e:null,e){if(e.queue_revision===(null===(r=this._currentInternalQueue)||void 0===r?void 0:r.revision))return null;this._hasQueuedTracks=!1;var i={ignoreMetaForTrack:null===(a=e.options)||void 0===a?void 0:a.repeating_context},s=e.queue_revision,l=_e([e.track]).items[0],c=_e(e.next_tracks,i),d=_e(e.prev_tracks,i);this._hasQueuedTracks=c.hasQueuedTracks;var u={uri:e.context_uri,metadata:null!==(o=e.context_metadata)&&void 0!==o?o:void 0};this._currentInternalQueue={revision:s,context:u,current_track:l,next_items:c.items,previous_items:d.items},this._currentQueue={revision:s,context:u,current_track:l,next_tracks:c.tracks,previous_tracks:d.tracks}}else this._hasQueuedTracks=!1,this._currentInternalQueue=null,this._currentQueue=null;return this.emit(J.PLAYER_QUEUE_CHANGED,{internalPlayerQueue:this._currentInternalQueue,playerQueue:this._currentQueue}),this._currentInternalQueue}},{key:"_setQueueNext",value:function(e,t){var n=this,r=this._currentPlayerState;if(!r)return Promise.reject(new de(H.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));var a={next_tracks:e,prev_tracks:r.prev_tracks,queue_revision:r.queue_revision};return this._runner((function(){return n._connectClient.setQueue(a,t)}),t)}},{key:"_appendQueued",value:function(e,t){var n,r,a=this._currentPlayerState;if(!a)return Promise.reject(new de(H.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));var o=Array.from(null!==(n=a.next_tracks)&&void 0!==n?n:[]);if(this._hasQueuedTracks){for(var i=!1,s=0,l=o.length;s<l;s++){var c=o[s];if("true"!==(null===(r=null==c?void 0:c.metadata)||void 0===r?void 0:r.is_queued)){o.splice.apply(o,[s,0].concat((0,le.Z)(e))),i=!0;break}}i||o.push.apply(o,(0,le.Z)(e))}else o.unshift.apply(o,(0,le.Z)(e));return this._setQueueNext(o,t)}},{key:"getInternalPlayerQueue",value:function(){var e=this;return this._hasInitialState?Promise.resolve(this._currentInternalQueue):new Promise((function(t){e.on(J.PLAYER_QUEUE_CHANGED,(function(e){t(e.data.internalPlayerQueue)}))}))}},{key:"getPlayerQueue",value:function(){var e=this;return this._hasInitialState?Promise.resolve(this._currentQueue):new Promise((function(t){e.on(J.PLAYER_QUEUE_CHANGED,(function(e){t(e.data.playerQueue)}))}))}},{key:"setInternalPlayerQueue",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreRevision:!1};if(!this._currentPlayerState)return Promise.reject(new de(H.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));if(e.revision!==this._currentPlayerState.queue_revision&&!r.ignoreRevision)return Promise.reject(new de(H.QUEUE_OPERATION_STALE_REVISION,"Cannot perform operation; revision is stale."));var a={next_tracks:ye(e.next_items),prev_tracks:ye(e.previous_items),queue_revision:r.ignoreRevision?void 0:this._currentPlayerState.queue_revision};return this._runner((function(){return n._connectClient.setQueue(a,t)}),t)}},{key:"addToQueue",value:function(e,t){var n=this;if(!Array.isArray(e))return Promise.reject(new TypeError("Argument `items` must be an array."));var r=ye(e,{queued:!0});return r.length?1===r.length?this._runner((function(){return n._connectClient.addToQueue(r[0],t)}),t):this._appendQueued(r,t):Promise.resolve(!1)}},{key:"removeNext",value:function(e,t){var n,r,a,o,i=this._currentPlayerState;if(!i)return Promise.reject(new de(H.QUEUE_MANAGER_NO_STATE,"Cannot perform operation; no current state."));o="string"==typeof e?me(e):e;for(var s=Array.from(null!==(n=i.next_tracks)&&void 0!==n?n:[]),l=s.length,c=0;c<l;c++){var d=s[c];if((null==d?void 0:d.uid)===o.uid&&(null===(r=null==d?void 0:d.metadata)||void 0===r?void 0:r.iteration)===(null===(a=o.metadata)||void 0===a?void 0:a.iteration)){s.splice(c,1);break}}return s.length===l?Promise.resolve(!1):this._setQueueNext(s,t)}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var be=15e3,Ee=function(e){(0,p.Z)(n,e);var t=ve(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._hasFakeState=!1,r._localPlayerEnabled=!1,r._localPlayback=!1,r._lastDeviceList=[],r._deferredStreamer=X(),r._client=e.client,r._streamer=e.streamer,r._controller=e.controller,r._hidden=!!e.hidden,r._onlyLocalState=!!e.onlyLocalState,r._preferController=!r._onlyLocalState&&!!e.preferControllerState,r._claimInactivePlayerStates=!!e.claimInactivePlayerStates,r._enableControllerWithoutStreamer=!!e.enableControllerWithoutStreamer,r._autoActivateElement=!!e.autoActivateElement,r._deactivateOnStop=!!e.experimentalDeactivateOnStop,r._parseDeviceList=r._parseDeviceList.bind((0,u.Z)(r)),r._init(),r}return(0,d.Z)(n,[{key:"_init",value:function(){var e,t=this;this._createStreamerDeferred();var n=this._client;n.on("error",this._onError.bind(this)),this.proxyEmit(n,"authenticated",J.AUTHENTICATED),this.proxyEmit(n,"authentication_error",J.AUTHENTICATION_ERROR),this.proxyEmit(n,"before_disconnect",J.BEFORE_DISCONNECT),this.proxyEmit(n,"connected",J.CONNECTED),this.proxyEmit(n,"connection_error",J.CONNECTION_ERROR),this.proxyEmit(n,"descriptor_changed",J.DEVICE_DESCRIPTOR_CHANGED),this.proxyEmit(n,"product_state_changed",J.PRODUCT_STATE_CHANGED),this.proxyEmit(n,"reconnected",J.RECONNECTED),this.proxyEmit(n,"reconnecting",J.RECONNECTING),this.proxyEmit(n,"unrecoverable_failure",J.UNRECOVERABLE_FAILURE),this.proxyEmit(n,"logged_out",J.LOGGED_OUT);var a=this._controller;a.on("device_info_changed",(function(e){t._onDeviceStateChanged(e.data)})),a.on("devices_changed",this._onDevicesChanged.bind(this)),a.on("state_changed",this._onPlayerStateChanged.bind(this)),a.on("progress",this._onControllerProgress.bind(this)),this.proxyEmitAll(a,(e={},(0,r.Z)(e,"max_subscriptions_reached",J.MAX_SUBSCRIPTIONS_REACHED),(0,r.Z)(e,"device_deactivated",J.DEVICE_DEACTIVATED),e)),a.on("registered",this.emit.bind(this,J.REMOTE_OBSERVER_ENABLED,null)),a.on("deregistered",this.emit.bind(this,J.REMOTE_OBSERVER_DISABLED,null));var o=this._streamer;o?(o.on("deregistered",this._onStreamerDeregistered.bind(this)),o.on("registered",this._onStreamerRegistered.bind(this)),o.on("registration_aborted",this._onStreamerRegistrationAborted.bind(this)),o.on("state_changed",this._onStreamerStateChanged.bind(this)),o.on("stopped_on_background",this._onStreamerStoppedOnBackground.bind(this)),o.on("streamer_seek_handled",this._onSeekHandled.bind(this)),this.proxyEmitSync(o,"before_volume_change",J.BEFORE_VOLUME_CHANGE),this.proxyEmit(o,"autoplay_failed",J.AUTOPLAY_FAILED),this.proxyEmit(o,"stalled",J.BUFFER_STALLED),this.proxyEmit(o,"buffering_end",J.BUFFERING_END),this.proxyEmit(o,"buffering_start",J.BUFFERING_START),this.proxyEmit(o,"duration_changed",J.DURATION_CHANGED),this.proxyEmit(o,"max_list_errors_reached",J.MAX_LIST_ERRORS_REACHED),this.proxyEmit(o,"max_subscriptions_reached",J.MAX_SUBSCRIPTIONS_REACHED),this.proxyEmit(o,"playback_capped",J.PLAYBACK_CAPPED),this.proxyEmit(o,"player_initialization_done",J.PLAYER_INITIALIZATION_DONE),this.proxyEmit(o,"player_initialization_failed",J.PLAYER_INITIALIZATION_FAILED),this.proxyEmit(o,"progress",J.PROGRESS),this.proxyEmit(o,"registration_error",J.SERVICE_REGISTRATION_ERROR),this.proxyEmit(o,"track_ended",J.TRACK_ENDED),this.proxyEmit(o,"video_element_appended",J.VIDEO_ELEMENT_APPENDED),this.proxyEmit(o,"video_element_removed",J.VIDEO_ELEMENT_REMOVED),this.proxyEmit(o,"volume_changed",J.VOLUME_CHANGED),this.proxyEmit(o,"displayed_cues_changed",J.DISPLAYED_CUES_CHANGED),this.proxyEmit(o,"subtitle_languages_loaded",J.SUBTITLE_LANGUAGES_LOADED),this.proxyEmitSync(o,"internal_endcontent","internal_endcontent"),o.on("context_ended",this.emit.bind(this,J.LOCAL_CONTEXT_ENDED,null)),o.on("logged_out",this.emit.bind(this,J.LOCAL_PLAYER_LOGGED_OUT,null))):(this._disableLocalTarget(),this.on(J.AUTHENTICATED,(function(){t.emit(J.LOCAL_PLAYER_DISABLED,null)})))}},{key:"_createStreamerDeferred",value:function(){this._deferredStreamer=X(),this._deferredStreamer.promise.catch((function(){}))}},{key:"_isTargetIdLocal",value:function(e){return e?e===ne?Promise.resolve(!0):this._client.getDeviceDescriptor().then((function(t){return e===t.getId()})):Promise.resolve(!!this._localPlayback)}},{key:"_onStreamerRegistered",value:function(e){this._deferredStreamer.resolve(e.data),this._createStreamerDeferred(),this._deferredStreamer.resolve(e.data),this._localPlayerEnabled=!0,this._controller.register(),this.emit(J.LOCAL_PLAYER_ENABLED,null)}},{key:"_onStreamerDeregistered",value:function(){this._disableLocalTarget(),this.emit(J.LOCAL_PLAYER_DISABLED,null)}},{key:"_onStreamerRegistrationAborted",value:function(){this._disableLocalTarget(),this._enableControllerWithoutStreamer&&this._controller.register(),this.emit(J.LOCAL_PLAYER_DISABLED,null)}},{key:"_disableLocalTarget",value:function(){this._localPlayerEnabled=!1;var e=new ie(H.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot perform command; local player is disabled.");this._deferredStreamer.reject(e),this._createStreamerDeferred(),this._deferredStreamer.reject(e)}},{key:"_onStreamerConnect",value:function(){return this._deferredStreamer.promise}},{key:"_onDeviceStateChanged",value:function(e){var t=this,n=!!this._localPlayback,r=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t._generateLocalDeviceInfo(e).then((function(e){t.emit(J.LAST_ACTIVE_DEVICE_INFO_CHANGED,{deviceInfo:e,hasOrphanedState:!1})}))};if(this._localPlayerEnabled&&e.hasOrphanedState&&this._claimInactivePlayerStates)return this._hasFakeState=!0,void r(!0);if(this._hasFakeState=!1,this._localPlayback=!(!e.deviceInfo||!e.deviceInfo.local),this._localPlayback){if(!this._streamer)throw new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.");this._streamer.getVolume().then((function(n){e.deviceInfo&&(e.deviceInfo.volume=n),t.emit(J.LAST_ACTIVE_DEVICE_INFO_CHANGED,e)})).catch((function(){}))}else this._onlyLocalState?(this._localPlayback||n)&&r():this.emit(J.LAST_ACTIVE_DEVICE_INFO_CHANGED,e)}},{key:"_onDevicesChanged",value:function(e){var t=this;this._parseDeviceList(e.data).then((function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Invalid devices list.");if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(!se(e[n],t[n]))return!1;return!0})(t._lastDeviceList,e)||(t._lastDeviceList=e,t.emit(J.DEVICES_CHANGED,{devices:e,localDevice:null}))}))}},{key:"_onError",value:function(e){var t=e.data.error;e.data.source===ee.PLAYBACK&&t&&t.unrecoverable&&(this._disableLocalTarget(),this._streamer&&this._streamer.deregister()),this.emit(J.ERROR,e.data)}},{key:"_onPlayerStateChanged",value:function(e){var t;this._onlyLocalState||(!this._preferController&&this._localPlayback||(t=this._localPlayerEnabled&&this._claimInactivePlayerStates?e.data.state:e.data.orphaned?null:e.data.state,this.emit(J.STATE_CHANGED,{state:t})))}},{key:"_onControllerProgress",value:function(e){this._onlyLocalState||this._localPlayback||this.emit(J.PROGRESS,e.data)}},{key:"_onStreamerStateChanged",value:function(e){this._preferController||(this._onlyLocalState?this._triggerLocalStateChanges(e.data):this._hidden?this._handleHidden(e.data):this._localPlayback&&this.emit(J.STATE_CHANGED,e.data))}},{key:"_onStreamerStoppedOnBackground",value:function(){this._deactivateOnStop&&(this._localPlayback=!1),this.emit(J.STOPPED_ON_BACKGROUND,null)}},{key:"_handleHidden",value:function(e){e.state?(this._controller.suppressEvents(),this._triggerLocalStateChanges(e)):this._controller.unsuppressEvents()}},{key:"_parseDeviceList",value:function(e){var t=e.devices.slice(0).map((function(e){return Promise.resolve(e)}));return t.length&&e.localDevice?this._hasFakeState&&e.localDevice&&(e.localDevice.is_active=!0):t.push(this._generateLocalDeviceInfo(this._hasFakeState)),Promise.all(t).then((function(e){return e}))}},{key:"_triggerLocalStateChanges",value:function(e){var t=this;this._generateLocalDeviceInfo().then((function(e){t._onDeviceStateChanged({deviceInfo:e,hasOrphanedState:!1})})),this.emit(J.STATE_CHANGED,e)}},{key:"_canStartNewContext",value:function(e){var t=this;return this._runOnDevice(e,(function(){return t._streamer?Promise.resolve(!0):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided."))}),(function(){return Promise.resolve(!0)}),!0)}},{key:"_activateElement",value:function(){this._autoActivateElement=!1,this._streamer&&this._streamer.activateElement().catch((function(){}))}},{key:"_runOnDevice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return this._hasFakeState&&!a?(this._autoActivateElement&&this._activateElement(),this._claimStateAndRun(r)):this._isTargetIdLocal(t).then((function(t){return t?e._onStreamerConnect().then(n):r()}))}},{key:"_claimStateAndRun",value:function(e){var t=this;return this._onStreamerConnect().then((function(){return t._hasFakeState=!1,Promise.all([t._controller.transfer(ne,{paused:!0}),new Promise((function(e,n){t._streamer?t._streamer.once("track_loaded",e):n(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided."))}))])})).then((function(){return e()}))}},{key:"_generateLocalDeviceInfo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this._client,r=this._streamer,a=Promise.resolve(!1),o=Promise.resolve(-1);return this._localPlayerEnabled&&(t?a=Promise.resolve(!0):r&&(a=r.getCurrentState().then((function(e){return!!e}))),r&&(o=r.getVolume())),Promise.all([n.getClientDescriptor(),n.getSDKId(),a,o]).then((function(t){var n,r=(0,Q.Z)(t,4),a=r[0],o=r[1],i=r[2],s=r[3],l={hifi_status:{fully_supported:void 0,user_eligible:void 0,device_supported:null===(n=a.capabilities)||void 0===n?void 0:n.lossless_playback}};return{hidden:e._hidden,id:a.id,is_active:i,is_group:!1,is_being_activated:!1,is_controllable:e._localPlayerEnabled,is_observable:!!e._localPlayerEnabled&&!e._hidden,local:!0,metadata:a.metadata||{},name:a.name,type:a.type,version:o,volume:s,capabilities:{supports_lossless_audio:!1},playback_features:l,has_inactive_player_state:e._hasFakeState}}))}},{key:"_movePosition",value:function(e,t){var n=this;return this.getCurrentState().then((function(r){if(!r||isNaN(r.position))return Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Seeking not allowed with invalid track."));var a=e,o=Math.min(r.duration,Math.max(0,r.position+a));return n.seek(o,t)}))}},{key:"_prepareSkipTrack",value:function(e){return"string"==typeof e?me(e):e}},{key:"_cycleRepeatMode",value:function(e){var t=this;return this.getCurrentState().then((function(n){if(!n)return Promise.reject(new ie(H.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"));var r=null,a=n.disallows;switch(n.repeat_mode){case te.OFF:if(a.toggling_repeat_context){if(a.toggling_repeat_track)return Promise.resolve(!1);r=te.TRACK}else r=te.CONTEXT;break;case te.CONTEXT:r=a.toggling_repeat_track?te.OFF:te.TRACK;break;case te.TRACK:default:r=te.OFF}return t.setRepeatMode(r,e)}))}},{key:"_onSeekHandled",value:function(e){this._controller.seek(e.data.position)}},{key:"getClientDescriptor",value:function(){return this._client.getClientDescriptor()}},{key:"getProductState",value:function(){return this._client.getProductState()}},{key:"getPublicTransport",value:function(){return this._client.getPublicTransport()}},{key:"getUserInfo",value:function(){return this._client.getUserInfo()}},{key:"getVersionDescriptor",value:function(){return this._client.getVersionDescriptor()}},{key:"logAppMetrics",value:function(e,t){return this._client.logAppMetrics(e,t)}},{key:"setName",value:function(e){return this._client.setName(e)}},{key:"setNameTemplate",value:function(e){return this._client.setNameTemplate(e)}},{key:"getContextPlayerState",value:function(){return this._controller.getContextPlayerState()}},{key:"updateCurrentContext",value:function(e,t){return this._controller.updateCurrentContext(e,t)}},{key:"getLastActiveDevice",value:function(){var e=this;return this._onlyLocalState||this._hasFakeState?this._generateLocalDeviceInfo(this._hasFakeState):this._controller.getActiveDevice().then((function(t){return(null==t?void 0:t.local)&&e._streamer?(t.hidden=e._hidden,e._streamer.getVolume().then((function(e){return t.volume=e,t}))):t}))}},{key:"getCurrentState",value:function(){var e=this;if(!this._onlyLocalState&&(this._preferController||!this._localPlayback)){var t=!this._localPlayerEnabled||!this._claimInactivePlayerStates;return this._controller.getCurrentState(t).then((function(t){return!e._preferController&&e._localPlayback?e.getCurrentState():t}))}return this._onStreamerConnect().then(this._streamer.getCurrentState.bind(this._streamer))}},{key:"togglePlay",value:function(e){var t=this;return this._runOnDevice(e,(function(){return t._streamer.togglePlay()}),this._controller.togglePlay.bind(this._controller,e))}},{key:"pause",value:function(e){var t=this;return this._runOnDevice(e,(function(){return t._streamer.pause()}),this._controller.pause.bind(this._controller,e))}},{key:"resume",value:function(e){var t=this;return this._runOnDevice(e,(function(){return t._streamer.resume()}),this._controller.resume.bind(this._controller,e))}},{key:"playURI",value:function(e,t,n){var r=this;return this._canStartNewContext(t).then((function(){return r._autoActivateElement&&r._activateElement(),r._controller.playURI(e,t,n)}))}},{key:"playPages",value:function(e,t,n){var r=this;return this._canStartNewContext(t).then((function(){return r._autoActivateElement&&r._activateElement(),r._controller.playPages(e,t,n)}))}},{key:"playTracks",value:function(e,t,n){var r=this;return this._canStartNewContext(t).then((function(){return r._autoActivateElement&&r._activateElement(),r._controller.playTracks(e,t,n)}))}},{key:"nextTrack",value:function(e,t){var n=this,r={},a=function(){return n._streamer.nextTrack(z.FORWARD_BUTTON)},o=this._controller.nextTrack.bind(this._controller,e,r);return(null==t?void 0:t.track)&&(a=o,r.track=this._prepareSkipTrack(t.track)),this._runOnDevice(e,a,o)}},{key:"smartPreviousTrack",value:function(e){var t=this;return this.getCurrentState().then((function(n){return n?(n.disallows||{}).seeking||n.position<3e3&&n.track_window&&n.track_window.previous_tracks&&n.track_window.previous_tracks.length>0?t.previousTrack(e):t.seek(0,e):Promise.reject(new ie(H.HARMONY_NO_TRACKS_LOADED,"No current state."))}))}},{key:"previousTrack",value:function(e,t){var n=this,r={},a=function(){return n._streamer.previousTrack(z.FORWARD_BUTTON)},o=this._controller.previousTrack.bind(this._controller,e,r);return(null==t?void 0:t.track)&&(a=o,r.track=this._prepareSkipTrack(t.track)),this._runOnDevice(e,a,o)}},{key:"seek",value:function(e,t){var n=this;return this._runOnDevice(t,(function(){return n._streamer.seek(e)}),this._controller.seek.bind(this._controller,e,t))}},{key:"seekForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return this._movePosition(e,t)}},{key:"seekBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return this._movePosition(-1*e,t)}},{key:"getVolume",value:function(){return this._streamer?this._streamer.getVolume():Promise.resolve(-1)}},{key:"setVolume",value:function(e,t){var n=this;return this._runOnDevice(t,(function(){return n._streamer.setVolume(e)}),this._controller.setVolume.bind(this._controller,e),!0)}},{key:"getVideoProfiles",value:function(){if(!this._streamer)throw new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.");return this._streamer.getVideoVariants()}},{key:"setPreferredBitrate",value:function(e){if(!this._streamer)throw new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.");return this._streamer.setPreferredBitrate(e)}},{key:"getDevices",value:function(){var e=this;return this._controller.getDevices().then(this._parseDeviceList).then((function(t){return e._lastDeviceList=t,t}))}},{key:"setQueue",value:function(e,t,n){var r=this._controller.setQueue.bind(this._controller,e,t,n);return this._runOnDevice(n,r,r)}},{key:"addToQueue",value:function(e,t){var n=e.map((function(e){return"string"==typeof e?e:e.uri}));return this._controller.getQueueManager().addToQueue(n,t)}},{key:"setShuffle",value:function(e,t){var n=this._controller.setShuffle.bind(this._controller,e,t);return this._runOnDevice(t,n,n)}},{key:"toggleShuffle",value:function(e){var t=this._controller.toggleShuffle.bind(this._controller,e);return this._runOnDevice(e,t,t)}},{key:"setRepeatMode",value:function(e,t){var n=this._controller.setRepeatMode.bind(this._controller,e,t);return this._runOnDevice(t,n,n)}},{key:"cycleRepeatMode",value:function(e){var t=this._cycleRepeatMode.bind(this,e);return this._runOnDevice(e,t,t)}},{key:"transfer",value:function(e,t){var n=e||ne,r=this._controller.transfer.bind(this._controller,n,t);return this._autoActivateElement&&this._activateElement(),this._runOnDevice(n,r,r,!0)}},{key:"logout",value:function(e){return this._controller.logout(e||ne)}},{key:"activateElement",value:function(){return this._streamer?this._streamer.activateElement():Promise.reject(new ie(H.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot activate element; local player is disabled."))}},{key:"getQueueManager",value:function(){var e=this;return this._controller.getQueueManager((function(t,n){return e._runOnDevice(n,t,t)}),{reportInactiveQueues:this._claimInactivePlayerStates,onlyLocalQueue:this._onlyLocalState,reportInitial:this._hasFakeState||this._localPlayback})}},{key:"hideSubtitles",value:function(){return this._localPlayback?this._streamer?this._streamer.hideSubtitles():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot hide subtitles on remote player."))}},{key:"showSubtitles",value:function(){return this._localPlayback?this._streamer?this._streamer.showSubtitles():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot show subtitles on remote player."))}},{key:"areSubtitlesShown",value:function(){return this._localPlayback?this._streamer?this._streamer.areSubtitlesShown():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot show subtitles on remote player."))}},{key:"getSubtitleLanguages",value:function(){return this._localPlayback?this._streamer?this._streamer.getSubtitleLanguages():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot get subtitle languages on remote player."))}},{key:"getActiveSubtitleLanguage",value:function(){return this._localPlayback?this._streamer?this._streamer.getActiveSubtitleLanguage():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot get subtitle language on remote player."))}},{key:"setSubtitleLanguage",value:function(e){return this._localPlayback?this._streamer?this._streamer.setSubtitleLanguage(e):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot set subtitle languages on remote player."))}},{key:"deactivateSubtitleEvents",value:function(){return this._localPlayback?this._streamer?this._streamer.activateSubtitleEvents():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot deactivate subtitle events on remote player."))}},{key:"activateSubtitleEvents",value:function(){return this._localPlayback?this._streamer?this._streamer.activateSubtitleEvents():Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot activate subtitle events on remote player."))}},{key:"setBackgrounded",value:function(e){return this._localPlayback?this._streamer?this._streamer.setBackgrounded(e):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot set background mode on remote player."))}},{key:"setVideoResolution",value:function(e){return this._localPlayback?this._streamer?this._streamer.setVideoResolution(e):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"No streamer provided.")):Promise.reject(new ie(H.HARMONY_OPERATION_FORBIDDEN,"Cannot set preferred video resolution on remote player."))}},{key:"getMediaConfig",value:function(){return this._streamer?this._streamer.getMediaConfig():Promise.reject(new ie(H.HARMONY_LOCAL_PLAYER_DISABLED,"Cannot activate element; local player is disabled."))}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp),we=(n(5735),n(83753),n(28667)),Se=n(69522),ke=(n(15306),n(24603),n(28450),n(88386),n(4723),/(edge)[\s\/:]([\w\d\.]+)/),Re=new RegExp("(opera|ie|firefox|chrome|trident|crios|version)[\\s/:]([\\w\\d\\.]+)?.*?(safari|(?:rv[\\s\\/:]|version[\\s\\/:])([\\w\\d\\.]+)|$)"),Pe={};function Te(e){if(!e)return e;var t=function(e,t){var n,r,a,o=e.toLowerCase(),i=t?t.toLowerCase():"",s="".concat(o,":").concat(i),l=Pe[s];if(l)return l;var c=o.match(ke),d=o.match(Re)||[null,"unknown",0],u=c||d;"trident"===u[1]?(u[1]="ie",u[4]&&(u[2]=u[4])):"crios"===u[1]&&(u[1]="chrome"),"win"===(i=o.match(/ip(?:ad|od|hone)/)?"ios":null!==(n=(o.match(/(?:webos|android)/)||o.match(/mac|win|linux|cros/)||[])[0])&&void 0!==n?n:"other")&&(i="windows");var p="version"===u[1]?u[3]:u[1],f="opera"===u[1]&&u[4]?u[4]:u[2],h={name:null!==(r=null==p?void 0:p.toString())&&void 0!==r?r:"unknown",version:null!==(a=null==f?void 0:f.toString())&&void 0!==a?a:"unknown",platform:i};return Pe[s]=h,h}(navigator.userAgent,navigator.platform);return e.replace(/\{\{([^}]+?)\}\}/g,(function(e,n){return r=n,(a=t)&&a.hasOwnProperty(r)?t[n]:"";var r,a}))}Date.now();var Ae="undefined"!=typeof window&&"performance"in window;Ae&&window.performance,n(35837),n(85844);var Ce,Ie;"undefined"!=typeof globalThis&&"function"==typeof globalThis.queueMicrotask?globalThis.queueMicrotask.bind(globalThis):function(){if("undefined"==typeof Promise)return function(e){return setTimeout(e,0)};var e=Promise.resolve()}();!function(e){e.FILE_URLS_MP3="file_urls_mp3",e.FILE_URLS_EXTERNAL="file_urls_external",e.FILE_IDS_MP3="file_ids_mp3",e.FILE_IDS_MP4="file_ids_mp4",e.FILE_IDS_MP4_DUAL="file_ids_mp4_dual",e.FILE_IDS_CBCS="file_ids_mp4_cbcs",e.FILE_IDS_MP4FLAC="file_ids_mp4flac",e.MANIFEST_IDS_VIDEO="manifest_ids_video"}(Ce||(Ce={})),function(e){e.UNKNOWN="unknown",e.COMPUTER="computer",e.TABLET="tablet",e.SMARTPHONE="smartphone",e.SPEAKER="speaker",e.TV="tv",e.AVR="avr",e.STB="stb",e.AUDIO_DONGLE="audio_dongle",e.GAME_CONSOLE="game_console",e.CAST_VIDEO="cast_video",e.CAST_AUDIO="cast_audio",e.AUTOMOBILE="automobile",e.SMARTWATCH="smartwatch",e.CHROMEBOOK="chromebook"}(Ie||(Ie={}));n(39575),n(82472),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(37380),n(1118),n(65069);function Le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var De="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",Ne={},je={};function Me(e,t,n){for(var r=0,a=0;a<e.length;++a){var o=e[a]*t+r;e[a]=o%n,r=~~(o/n)}for(;r;)e.push(r%n),r=~~(r/n)}function xe(e,t,n,r){var a,o,i=0;for(o=0;o<t.length;++o)a=~~e[o]+t[o]*n+i,e[o]=a%r,i=~~(a/r);for(;i;)a=~~e[o]+i,e[o]=a%r,i=~~(a/r),++o}function Ue(e,t,n){var r,a=[0],o=[1],i=Le(e);try{for(i.s();!(r=i.n()).done;){xe(a,o,r.value,n),Me(o,t,n)}}catch(s){i.e(s)}finally{i.f()}return a}function Fe(e,t){var n,r=[],a=Le(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.push(t[o])}}catch(i){a.e(i)}finally{a.f()}return r.reverse()}function Ze(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length<t;)e.push(0);return e}function Be(e,t){var n=Ue(Fe(e.split(""),je),62,16);return Fe(Ze(n,t),De).join("")}!function(){for(var e=0,t=De.length;e<t;++e)je[De[e]]=e;for(var n=0;n<16;++n)Ne["0123456789abcdef"[n]]=n;for(var r=0;r<16;++r)Ne["0123456789ABCDEF"[r]]=r}();n(27479);var Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){for(var e=[],t=0;t<256;++t)e[t]=255;for(var n=0;n<Ye.length;++n)e[Ye.charCodeAt(n)]=n;String.fromCharCode.apply(String,e)}();function Ke(){var e=new Uint8Array(16);return crypto.getRandomValues(e),Be(e.join(""),40).slice(0,40)}function Ve(){for(var e=new Array(27),t=e.length;t--;)e[t]=Math.floor(8*Math.random());return Be(e.join(""),40)}"undefined"!=typeof window&&window.btoa&&window.atob&&function(e){return window.btoa(e)};var Ge="undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?Ke:Ve,He="_spharmony_device_id";var We={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&"string"==typeof e)return e;if(t)return Ge();var n=localStorage.getItem(He);return n||(n=Ge(),localStorage.setItem(He,n)),n},generate:Ge,generateWithCrypto:Ke,generateWithRandom:Ve};function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ze=function(e){(0,p.Z)(n,e);var t=qe(n);function n(e){var r,a;if((0,c.Z)(this,n),(r=t.call(this))._platformVersion="",r._metadata={},r._manifestPrependOffset=0,!e)throw new TypeError("Invalid argument `options`.");if(!e.id)throw new TypeError("Argument `options.id` is required.");if(!e.name||!e.model||!e.type)throw new TypeError("Incomplete `options` value.");return r._id=e.id,r._type=e.type,r._brand=e.brand,r._model=e.model,r._isGroup=!!e.is_group,r._name=e.name,r._platformName=e.platform_name,r._platformIdentifier=e.platform_identifier,r._platformVersion=e.platform_version||"",r._metadata=e.metadata||{},r._capabilities=e.capabilities||{manifest_formats:[]},r._manifestPrependOffset=(null===(a=r._capabilities.manifest_formats)||void 0===a?void 0:a.length)||0,r}return(0,d.Z)(n,[{key:"getId",value:function(){return this._id}},{key:"setCapability",value:function(e,t){if("manifest_formats"===e)throw new TypeError('Cannot change capability "manifest_formats"');return this._capabilities[e]=t,this.emit("descriptor_changed",{descriptor:this.toJSON()}),!0}},{key:"getCapability",value:function(e){if("manifest_formats"===e)throw new TypeError("Use `descriptor.getManifestFormats()`.");return this._capabilities[e]}},{key:"setName",value:function(e){return this._name=e,this.emit("descriptor_changed",{descriptor:this.toJSON()}),!0}},{key:"getName",value:function(){return this._name}},{key:"getType",value:function(){return this._type}},{key:"getBrand",value:function(){return this._brand}},{key:"getModel",value:function(){return this._model}},{key:"getPlatformIdentifier",value:function(){return this._platformIdentifier||"Partner ".concat(this._brand," ").concat(this._model)}},{key:"getPlatformName",value:function(){return this._platformName||this.getPlatformIdentifier()}},{key:"getPlatformVersion",value:function(){return this._platformVersion}},{key:"getManifestFormats",value:function(){return this._capabilities.manifest_formats||[]}},{key:"appendManifestFormat",value:function(){var e=this._capabilities.manifest_formats;Array.isArray(e)&&e.push.apply(e,arguments)}},{key:"prependManifestFormat",value:function(){var e=this._capabilities.manifest_formats;if(Array.isArray(e)){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.splice.apply(e,[this._manifestPrependOffset,0].concat(n))}}},{key:"toJSON",value:function(){return{brand:this._brand,capabilities:Object.assign({},this._capabilities),id:this._id,metadata:Object.assign({},this._metadata),model:this._model,name:this._name,platform_name:this._platformName,platform_identifier:this._platformIdentifier,platform_version:this._platformVersion,type:this._type}}},{key:"toTrackPlaybackDeviceInfo",value:function(){return{brand:this._brand,capabilities:Object.assign({},this._capabilities),device_id:this._id,device_type:this._type,metadata:Object.assign({},this._metadata),model:this._model,name:this._name,platform_name:this._platformName,platform_identifier:this._platformIdentifier,is_group:this._isGroup}}}],[{key:"create",value:function(e){return new n({id:We.get(e.id,e.randomizeId),model:e.model||Te("harmony-{{name}}.{{version}}-{{platform}}").toLowerCase(),name:e.nameTemplate?Te(e.nameTemplate):e.name||(t=Te("Spotify ({{name}}/{{platform}})"),t.replace(/\b[a-z]/g,(function(e){return e.toUpperCase()}))),type:e.type||Ie.COMPUTER,brand:e.brand||"SpotifyHarmonyGeneric",platform_name:e.platform_name,platform_identifier:e.platform_identifier,platform_version:e.platform_version,metadata:e.metadata||{},capabilities:e.capabilities||{},is_group:!!e.is_group});var t}}]),n}($.vp);const Qe={tagged:"4.25.2-057c70b",version:"4.25.2",revision:"057c70b"};n(38862);var $e=n(34101);function Xe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var et=function(){function e(t){(0,c.Z)(this,e),this._melodyLogger=new $e.Hx(t)}return(0,d.Z)(e,[{key:"logClientEvent",value:function(e,t){return e?this._melodyLogger.sendLog("/v1/msg/batch",{type:"client_event",message:{source:e.source||$e.eV.UNKNOWN,context:e.context||$e.eV.UNKNOWN,event:e.event||$e.eV.UNKNOWN,event_version:e.event_version||$e.eV.EMPTY,test_version:e.test_version||$e.eV.EMPTY,source_version:e.source_version||$e.eV.UNKNOWN,source_vendor:e.source_vendor||$e.eV.UNKNOWN,json_data:"json"===t?e.json_data||"{}":JSON.stringify(e.json_data||{})}},{batch:!0}):Promise.reject(new TypeError("Logger.logClientEvent `data` cannot be null."))}},{key:"logMetrics",value:function(e,t){if(!e&&!t)return Promise.resolve(!0);var n=e||[],r=t||[];if(!n.length&&!r.length)return Promise.resolve(!0);if(!Array.isArray(n)||!Array.isArray(r))return Promise.reject(new TypeError("Logger.logMetrics `meters` and `timers` must be null or an array."));var a,o=Xe(n);try{for(o.s();!(a=o.n()).done;){var i=a.value;if(!("what"in i)||!("result"in i)||!("reason"in i))return Promise.reject(new TypeError("Logger.logMetrics: Invalid meter format in `meters` array."))}}catch(d){o.e(d)}finally{o.f()}var s,l=Xe(r);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(!("what"in c)||!("duration"in c))return Promise.reject(new TypeError("Logger.logMetrics: Invalid timer format in `timers` array."))}}catch(d){l.e(d)}finally{l.f()}return this._melodyLogger.sendLog("/v1/metric",{sdk_id:void 0,platform:void 0,client_version:void 0,meters:n,timers:r})}},{key:"logJSSDKError",value:function(e,t){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_error",message:{source:e.source||$e.eV.UNKNOWN,source_version:e.source_version||$e.eV.UNKNOWN,type:e.type||$e.eV.UNKNOWN,message:e.message||$e.eV.EMPTY,stack:JSON.stringify(e.stack||$e.eV.EMPTY),json_data:"json"===t?e.json_data||"{}":JSON.stringify(e.json_data||{}),json_data_version:e.json_data_version||$e.eV.EMPTY_VERSION}},{batch:!0})}},{key:"logJSSDKContentRequest",value:function(e){var t;return this._melodyLogger.sendLog("/v1/msg/jssdk_content_request",{source:e.source||$e.eV.UNKNOWN,type:e.type||$e.eV.UNKNOWN,http_status:null!==(t=e.http_status)&&void 0!==t?t:void 0,ms_request_duration:e.ms_request_duration||$e.eV.EMPTY,n_retries:e.n_retries||$e.eV.ZERO,playback_id:e.playback_id||$e.eV.EMPTY})}}]),e}();function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var nt=we.P.forTag("harmonyclient"),rt=/^[a-zA-Z0-9_%:-]{1,40}$/,at=function(e){(0,p.Z)(n,e);var t=tt(n);function n(e){var r;if((0,c.Z)(this,n),(r=t.call(this))._platformIdentifier=X(),r._platformVersion=X(),!e)throw new TypeError("Argument `options` is not defined.");if(!e.transport)throw new TypeError("No Transport instance provided");if(!e.transport.hasPlugin("dealer"))throw new TypeError("Transport has no Dealer plugin.");return r._transport=e.transport,r._deviceDescriptor=r._initDeviceDescriptor(e),r._logger=new et({transport:r._transport.toPublic(),sdkId:r.getSDKId(),platform:r._platformIdentifier.promise,clientVersion:r._platformVersion.promise}),r._productStateObserver=Se.A.create({transport:r._transport}),r._onConnected=r._onConnected.bind((0,u.Z)(r)),r._onAuthenticated=r._onAuthenticated.bind((0,u.Z)(r)),r._onConnectionError=r._onConnectionError.bind((0,u.Z)(r)),r._onAuthenticationError=r._onAuthenticationError.bind((0,u.Z)(r)),r._onShortSessionDisconnect=r._onShortSessionDisconnect.bind((0,u.Z)(r)),r._attachListeners(),r}return(0,d.Z)(n,[{key:"_createDeviceDescriptor",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null==r?void 0:r.id)&&!rt.test(r.id))throw ie.fatal(H.HARMONY_INVALID_DESCRIPTOR_ID,"Invalid device id.");var a=r.capabilities||{},o={change_volume:null===(t=a.change_volume)||void 0===t||t,endsong_snooping:a.endsong_snooping,enable_play_token:!0,supports_file_media_type:!0,play_token_lost_behavior:e.playTokenLostBehavior||"pause",disable_connect:!!e.hidden,audio_podcasts:null===(n=a.audio_podcasts)||void 0===n||n,video_playback:a.video_playback,lossless_playback:a.lossless_playback,volume_steps:void 0!==a.volume_steps&&a.volume_steps>=0&&a.volume_steps<re?a.volume_steps:void 0,manifest_formats:[Ce.FILE_IDS_MP3,Ce.FILE_URLS_MP3]},i=ze.create(Object.assign(Object.assign({},r),{capabilities:o}));return this._platformIdentifier.resolve(i.getPlatformIdentifier()),this._platformVersion.resolve(i.getPlatformVersion()),this.proxyEmit(i,"descriptor_changed","descriptor_changed"),i}},{key:"_initDeviceDescriptor",value:function(e){var t=this;return Promise.resolve(e.descriptor).then(this._createDeviceDescriptor.bind(this,e)).catch((function(e){return t._onError(ee.HARMONY,{error:e}),Promise.reject(e)}))}},{key:"_attachListeners",value:function(){var e=this,t=this._transport;t.on(q.TransportEvent.CONNECTED,this._onConnected),t.on(q.TransportEvent.AUTHENTICATED,this._onAuthenticated),t.on(q.TransportEvent.CONNECTION_FAILED,this._onConnectionError),t.on(q.TransportEvent.AUTHENTICATION_FAILED,this._onAuthenticationError),this.proxyEmit(t,q.TransportEvent.RECONNECTING,"reconnecting"),this.proxyEmit(t,q.TransportEvent.RECONNECTED,"reconnected"),this.proxyEmit(t,q.TransportEvent.LOGGED_OUT,"logged_out"),this.proxyEmitSync(t,q.TransportEvent.BEFORE_OFFLINE_DISCONNECT,"before_offline_disconnect"),this.proxyEmitSync(t,q.TransportEvent.BEFORE_ONLINE_DISCONNECT,"before_disconnect"),t.on(q.TransportEvent.SHORT_SESSION_DISCONNECTED,this._onShortSessionDisconnect.bind(this)),this.proxyEmit(this._productStateObserver,q.TransportEvent.PRODUCT_STATE_CHANGED,"product_state_changed"),this.on("before_disconnect",(function(t){var n=e._productStateObserver.deregister().catch((function(){}));t.data.awaitPromise(n)}))}},{key:"_onError",value:function(e,t){this.emit("error",{source:e,error:t.error}),t.error&&t.error.unrecoverable&&this.emit("unrecoverable_failure",{source:e,error:t.error})}},{key:"_onConnected",value:function(){this.emit("connected",null)}},{key:"_onAuthenticated",value:function(){this.emit("authenticated",null)}},{key:"_onConnectionError",value:function(e){this._onError(ee.TRANSPORT,{error:e.data.error}),this.emit("connection_error",e.data)}},{key:"_onAuthenticationError",value:function(e){this._onError(ee.TRANSPORT,{error:e.data.error}),this.emit("authentication_error",e.data)}},{key:"_onShortSessionDisconnect",value:function(e){this._logger.logClientEvent({source:"transport",source_version:Qe.tagged,source_vendor:"spotify",event:e.type,event_version:"1.0.0",json_data:{disconnectCount:e.data.disconnectCount,sessionLength:e.data.sessionLength}},"object").catch((function(t){return nt.warn("".concat(e.type," Logging Error:"),t)}))}},{key:"getVersionDescriptor",value:function(){return Object.assign({},Qe)}},{key:"getSDKId",value:function(){return"harmony:".concat(Qe.tagged)}},{key:"getUntaggedSDKId",value:function(){return"harmony:".concat(Qe.version)}},{key:"getPlatformIdentifier",value:function(){return this._platformIdentifier.promise}},{key:"getPlatformVersion",value:function(){return this._platformVersion.promise}},{key:"getLogger",value:function(){return this._logger}},{key:"logAppMetrics",value:function(e,t){if(!this._logger)throw new TypeError("Invalid logger instance");return this._logger.logMetrics(e,t)}},{key:"request",value:function(e,t){return this._transport.request(e,t)}},{key:"getPublicTransport",value:function(){return this._transport.toPublic()}},{key:"getClientDescriptor",value:function(){return this._deviceDescriptor.then((function(e){return e.toJSON()}))}},{key:"getDeviceDescriptor",value:function(){return this._deviceDescriptor}},{key:"getUserInfo",value:function(){return this._transport.request("@webapi/v1/me",{responseType:"json"}).then((function(e){var t=e.body;if(200!==e.status){var n=new ie(H.USER_INFO_REQUEST_FAILED_WITH_STATUS,"User info request failed with status ".concat(e.status));return n.status=e.status,Promise.reject(n)}return t?{display_name:t.display_name,followers:t.followers,id:t.id,images:t.images,uri:t.uri}:Promise.reject(new ie(H.USER_INFO_REQUEST_EMPTY_RESPONSE,"Unexpected empty response."))}))}},{key:"getProductState",value:function(){return this._productStateObserver.getCurrentState()}},{key:"setName",value:function(e){return this._deviceDescriptor.then((function(t){return t.setName(e)}))}},{key:"setNameTemplate",value:function(e){return this.setName(Te(e))}},{key:"setCapability",value:function(e,t){return this._deviceDescriptor.then((function(n){return n.setCapability(e,t)}))}},{key:"notifyError",value:function(e,t){this._onError(e,{error:t})}}],[{key:"create",value:function(e){return new n(e)}},{key:"of",value:function(e){return e._client}}]),n}($.vp);var ot,it,st,lt,ct,dt=n(58367),ut=(n(35192),n(9653),n(55018));function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}!function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAY="play",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.MEDIA_RATECHANGE="ratechange",e.MEDIA_RESIZE="resize",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_STALLED="stalled",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.FRAGMENT_APPENDED="fragment_appended",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LIST_PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAY="play",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_SEEKING="seeking",e.PLAYER_FRAGMENT_FETCHED="fragment_fetched",e.PLAYER_FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.PLAYER_VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.PLAYER_VIDEO_RESIZED="resize",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(ot||(ot={})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(it||(it={})),function(e){e.SUCCESS="RESULT_SUCCESS",e.INVALID="RESULT_INVALID",e.FORBIDDEN="RESULT_FORBIDDEN",e.OUT_OF_BOUNDS="RESULT_OUT_OF_BOUNDS",e.NO_LIST="RESULT_NO_LIST",e.NO_TRACK="RESULT_NO_TRACK",e.LIST_END="RESULT_LIST_END",e.INVALID_TRACK="RESULT_INVALID_TRACK",e.CANCELLED="CANCELLED",e.NO_TRACK_PLAYER="NO_TRACK_PLAYER"}(st||(st={})),function(e){e.MP3="MP3",e.MP4="MP4",e.MP4_DUAL="MP4_DUAL",e.MP4_CBCS="MP4_CBCS",e.MP4_FLAC="MP4_FLAC",e.MANIFEST_ID="MANIFEST_ID"}(lt||(lt={})),function(e){e.FRAGMENT_FETCHED="fragment_fetched",e.FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.VIDEO_PROFILE_CHANGED="video_profile",e.SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded"}(ct||(ct={}));var ft=function(e){(0,p.Z)(n,e);var t=pt(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).unrecoverable=!1,a.listPlayerIgnore=!1,a.debug={},a.code=e,a.message=r,a.name="PlaybackError",a}return(0,d.Z)(n,null,[{key:"fatal",value:function(e,t){var r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,ae.Z)(Error));function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var _t=function(e){(0,p.Z)(n,e);var t=ht(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.STORAGE_ERROR,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"File Error";return(0,c.Z)(this,n),(e=t.call(this,a)).canPlayNext=!0,e.debug={},e.code=r,e.message=a,e.name="FileError",e}return(0,d.Z)(n)}((0,ae.Z)(Error));n(91058),n(8255),n(18264);function yt(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var gt=function(e){(0,p.Z)(n,e);var t=mt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.EME_ERROR_UNKNOWN,a=arguments.length>1?arguments[1]:void 0;return(0,c.Z)(this,n),(e=t.call(this,a)).status=-1,e.licenseServer="",e.shouldRefreshEndpoint=!1,e.unrecoverable=!1,e.debug={},e.code=r,e.message=a,e.name="EMEError",e}return(0,d.Z)(n,null,[{key:"fatal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.EME_ERROR_UNKNOWN,t=arguments.length>1?arguments[1]:void 0,r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,ae.Z)(Error));function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var bt=function(e){(0,p.Z)(n,e);var t=vt(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).name="CappingError",a.message=r,a.code=e,a}return(0,d.Z)(n)}((0,ae.Z)(Error));function Et(e){var t=document.createEvent("Event");t.initEvent("encrypted",!1,!1),t.initDataType="cenc",t.initData=e.initData,t.fromPolyfill=!0,this.dispatchEvent(t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var St=function(e){(0,p.Z)(n,e);var t=wt(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,ot.KEY_SESSION_MESSAGE,null)).messageType="license-request",r.message=e,r}return(0,d.Z)(n)}($.B);function kt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Tt=function(e){(0,p.Z)(n,e);var t=Pt(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._nativeKeySession=null,r._lastUpdateDeferred=yt(),r._lastGenerateDeferred=yt(),r.addEventListener=r.addListener,r.removeEventListener=r.removeListener,r._nativeMediaKeys=e,r._onKeyMessage=r._onKeyMessage.bind((0,u.Z)(r)),r._onKeyAdded=r._onKeyAdded.bind((0,u.Z)(r)),r._onKeyError=r._onKeyError.bind((0,u.Z)(r)),r}return(0,d.Z)(n,[{key:"_attach",value:function(){var e=this._nativeKeySession;e&&(e.addEventListener(ot.MS_KEY_ADDED,this._onKeyAdded),e.addEventListener(ot.MS_KEY_ERROR,this._onKeyError),e.addEventListener(ot.MS_KEY_MESSAGE,this._onKeyMessage))}},{key:"_detach",value:function(){var e=this._nativeKeySession;e&&(e.removeEventListener(ot.MS_KEY_ADDED,this._onKeyAdded),e.removeEventListener(ot.MS_KEY_ERROR,this._onKeyError),e.removeEventListener(ot.MS_KEY_MESSAGE,this._onKeyMessage))}},{key:"_onKeyMessage",value:function(e){e.message&&e.message.buffer&&(this.emitEvent(new St(e.message.buffer)),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null))}},{key:"_onKeyAdded",value:function(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null),this.emit(ot.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"_onKeyError",value:function(){var e=this._nativeKeySession&&this._nativeKeySession.error;this._lastGenerateDeferred&&(this._lastGenerateDeferred.reject(e),this._lastGenerateDeferred=null),this._lastUpdateDeferred&&(this._lastUpdateDeferred.reject(e),this._lastUpdateDeferred=null),this.emit(ot.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"generateRequest",value:function(e,t){var n=this;return new Promise((function(e,r){n._lastGenerateDeferred&&(n._lastGenerateDeferred.resolve=e,n._lastGenerateDeferred.reject=r),n._nativeKeySession=n._nativeMediaKeys.createSession("audio/mp4",new Uint8Array(t),null),n._attach()}))}},{key:"update",value:function(e){var t=this;return new Promise((function(n,r){t._lastGenerateDeferred&&(t._lastGenerateDeferred.resolve=n,t._lastGenerateDeferred.reject=r),t._nativeKeySession&&t._nativeKeySession.update(new Uint8Array(e))}))}},{key:"close",value:function(){var e=this;return new Promise((function(t){e._nativeKeySession&&e._nativeKeySession.close(),e._detach(),t(!0)}))}}]),n}($.vp),At=function(){function e(t){(0,c.Z)(this,e),this._lastBoundSetter=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new MSMediaKeys(t)}return(0,d.Z)(e,[{key:"attach",value:function(e){var t=this;return new Promise((function(n){if(e.readyState>=1)return e.msSetMediaKeys(t._nativeMediaKeys),void n();var r=function n(){e.removeEventListener(ot.MEDIA_LOADEDMETADATA,n),t._lastBoundSetter=null,e.msSetMediaKeys(t._nativeMediaKeys)};t._lastBoundSetter=r,e.addEventListener(ot.MEDIA_LOADEDMETADATA,r),e.addEventListener(ot.MS_NEEDKEY,Et),n()}))}},{key:"detach",value:function(e){this._lastBoundSetter&&(e.removeEventListener(ot.MS_NEEDKEY,Et),e.removeEventListener(ot.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}},{key:"setServerCertificate",value:function(){return Promise.reject(new gt(Z.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}},{key:"createSession",value:function(){return new Tt(this._nativeMediaKeys)}}]),e}();function Ct(e){var t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}var It=function(){function e(t,n){if((0,c.Z)(this,e),this._configuration=null,this.keySystem=t,!this._checkConfig(n))throw new gt(Z.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}return(0,d.Z)(e,[{key:"_checkConfig",value:function(e){var t,n,r,a=this.keySystem,o=kt(e);try{for(o.s();!(r=o.n()).done;){var i=r.value,s={initDataTypes:i.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:i.label},l=void 0;if(i.audioCapabilities&&i.audioCapabilities.length&&s.audioCapabilities){l=!1;var c,d=kt(i.audioCapabilities);try{for(d.s();!(c=d.n()).done;){var u=c.value,p=null===(t=u.contentType)||void 0===t?void 0:t.split(";")[0];MSMediaKeys.isTypeSupported(a,p)&&(s.audioCapabilities.push(u),l=!0)}}catch(m){d.e(m)}finally{d.f()}}if(i.videoCapabilities&&i.videoCapabilities.length&&s.videoCapabilities){l=!1;var f,h=kt(i.videoCapabilities);try{for(h.s();!(f=h.n()).done;){var _=f.value,y=null===(n=_.contentType)||void 0===n?void 0:n.split(";")[0];MSMediaKeys.isTypeSupported(a,y)&&(s.videoCapabilities.push(_),l=!0)}}catch(m){h.e(m)}finally{h.f()}}if(l)return this._configuration=s,!0}}catch(m){o.e(m)}finally{o.f()}return!1}},{key:"getConfiguration",value:function(){return this._configuration}},{key:"createMediaKeys",value:function(){var e=this;return new Promise((function(t){t(new At(e.keySystem))}))}}]),e}();function Lt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Nt=we.P.forTag("eme_polyfill.v0_1b"),jt=function(e){(0,p.Z)(n,e);var t=Dt(n);function n(e,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this))._mediaElement=null,o._lastUpdateDeferred=null,o._lastGenerateResolver=null,o.sessionId=null,o._keySystem=e,o._mediaElement=r,o._prefix=a,o.addEventListener=o.addListener,o.removeEventListener=o.removeListener,o}return(0,d.Z)(n,[{key:"_addPrefix",value:function(e){return this._prefix?this._prefix+e.replace(/\b[a-z]/,(function(e){return e.toUpperCase()})):e}},{key:"generateComplete",value:function(e){this.emitEvent(new St(e)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null)}},{key:"updateComplete",value:function(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this.emit(ot.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"handleErrorEvent",value:function(e){var t=new gt(Z.EME_MEDIA_KEY_SESSION_V0_1B_ERROR,"MediaKeySession v0.1b Error");t.debug.errorCode=e.errorCode,t.debug.systemCode=e.systemCode,!e.sessionId&&this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):e.sessionId&&this._lastUpdateDeferred?(this._lastUpdateDeferred.reject(t),this._lastUpdateDeferred=null):this.emit(ot.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"generateRequest",value:function(e,t){var n=this;return this._mediaElement?new Promise((function(e,r){n._lastGenerateResolver={resolve:e,reject:r};try{n._mediaElement[n._addPrefix("generateKeyRequest")](n._keySystem,new Uint8Array(t))}catch(a){r(a),n._lastGenerateResolver=null}})):Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."))}},{key:"update",value:function(e){if(!this._mediaElement)return Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."));if(this._lastUpdateDeferred){var t=this.update.bind(this,e);return this._lastUpdateDeferred.promise.then(t,t)}var n=yt();this._lastUpdateDeferred=n;try{this._mediaElement[this._addPrefix("addKey")](this._keySystem,new Uint8Array(e),null,this.sessionId)}catch(r){n.reject(r),this._lastUpdateDeferred=null}return n.promise}},{key:"close",value:function(){if(this.sessionId&&this._mediaElement)try{this._mediaElement[this._addPrefix("cancelKeyRequest")](this._keySystem,this.sessionId)}catch(e){Nt.warn("Could not close keysession",e)}return Promise.resolve(!0)}}]),n}($.vp),Mt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,c.Z)(this,e),this._mediaElement=null,this._waitingForSessionIds=[],this._sessionMap={},this.shouldRefreshPerTrack=!0,this._keySystem=t,this._prefix=n,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}return(0,d.Z)(e,[{key:"attach",value:function(e){this._mediaElement=e;var t=this._prefix;e.addEventListener(t+ot.V0_1B_NEEDKEY,Et);var n=e.addEventListener.bind(e);n(t+ot.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+ot.V0_1B_KEY_ERROR,this._onKeyError),n(t+ot.V0_1B_KEY_MESSAGE,this._onKeyMessage)}},{key:"detach",value:function(e){this._mediaElement=null;var t=this._prefix;e.removeEventListener(t+ot.V0_1B_NEEDKEY,Et);var n=e.removeEventListener.bind(e);n(t+ot.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+ot.V0_1B_KEY_ERROR,this._onKeyError),n(t+ot.V0_1B_KEY_MESSAGE,this._onKeyMessage)}},{key:"_getSession",value:function(e){var t=this._sessionMap[e];if(t)return t;var n=this._waitingForSessionIds.shift();return n?(n.sessionId=e,this._sessionMap[e]=n,n):null}},{key:"_onKeyMessage",value:function(e){var t=this._getSession(e.sessionId);t?t.generateComplete(e.message):Nt.warn("Got keymessage without session.")}},{key:"_onKeyAdded",value:function(e){var t=this._getSession(e.sessionId);t?t.updateComplete():Nt.warn("Got keyadded without session.")}},{key:"_onKeyError",value:function(e){var t=this._getSession(e.sessionId);t?t.handleErrorEvent(e):Nt.warn("Got keyerror without session.")}},{key:"setServerCertificate",value:function(){return Promise.reject(new gt(Z.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}},{key:"createSession",value:function(){var e=new jt(this._keySystem,this._mediaElement,this._prefix);return this._waitingForSessionIds.push(e),e}}]),e}();function xt(e){var t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}var Ut=function(){function e(t,n,r){if((0,c.Z)(this,e),this._configuration=null,this.keySystem=t,this._prefix=r,!this._checkConfig(n))throw new gt(Z.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}return(0,d.Z)(e,[{key:"_checkConfig",value:function(e){var t,n,r,a=this.keySystem,o=document.createElement("video"),i=Lt(e);try{for(i.s();!(r=i.n()).done;){var s=r.value,l={initDataTypes:s.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:s.label},c=!1;if(s.audioCapabilities&&s.audioCapabilities.length&&l.audioCapabilities){c=!1;var d,u=Lt(s.audioCapabilities);try{for(u.s();!(d=u.n()).done;){var p=d.value,f=null===(t=p.contentType)||void 0===t?void 0:t.split(";")[0];f&&o.canPlayType(f,a)&&(l.audioCapabilities.push(p),c=!0)}}catch(g){u.e(g)}finally{u.f()}}if(s.videoCapabilities&&s.videoCapabilities.length&&l.videoCapabilities){c=!1;var h,_=Lt(s.videoCapabilities);try{for(_.s();!(h=_.n()).done;){var y=h.value,m=null===(n=y.contentType)||void 0===n?void 0:n.split(";")[0];m&&o.canPlayType(m,a)&&(l.videoCapabilities.push(y),c=!0)}}catch(g){_.e(g)}finally{_.f()}}if(c)return this._configuration=l,!0}}catch(g){i.e(g)}finally{i.f()}return!1}},{key:"getConfiguration",value:function(){return this._configuration}},{key:"createMediaKeys",value:function(){var e=this;return new Promise((function(t){t(new Mt(e.keySystem,e._prefix))}))}}]),e}();function Ft(e){navigator.requestMediaKeySystemAccess=function(t,n){return new Promise((function(r){r(new Ut(t,n,e))}))};var t=HTMLMediaElement.prototype;delete t.mediaKeys,t.setMediaKeys=xt}n(16716);function Zt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Kt=we.P.forTag("eme_polyfill.safari");var Vt=function(e){(0,p.Z)(n,e);var t=Yt(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this))._attached=!1,a._nativeKeySession=null,a._lastGenerateResolver=yt(),a._lastUpdateResolver=yt(),a.addEventListener=a.addListener,a.removeEventListener=a.removeListener,a._nativeMediaKeys=e,a._serverCertificate=r,a._onKeyMessage=a._onKeyMessage.bind((0,u.Z)(a)),a._onKeyAdded=a._onKeyAdded.bind((0,u.Z)(a)),a._onKeyError=a._onKeyError.bind((0,u.Z)(a)),a}return(0,d.Z)(n,[{key:"_attach",value:function(){if(!this._attached){var e=this._nativeKeySession;e?(e.addEventListener(ot.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.addEventListener(ot.WEBKIT_KEY_ADDED,this._onKeyAdded),e.addEventListener(ot.WEBKIT_KEY_ERROR,this._onKeyError)):Kt.warn("Tried to attach with no WebKitMediaKeySession")}}},{key:"_detach",value:function(){if(this._attached){var e=this._nativeKeySession;e?(e.removeEventListener(ot.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.removeEventListener(ot.WEBKIT_KEY_ADDED,this._onKeyAdded),e.removeEventListener(ot.WEBKIT_KEY_ERROR,this._onKeyError)):Kt.warn("Tried to detach with no WebKitMediaKeySession")}}},{key:"_onKeyMessage",value:function(e){e.message&&e.message.buffer&&(this.emitEvent(new St(e.message.buffer)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null))}},{key:"_onKeyAdded",value:function(){this._lastUpdateResolver&&(this._lastUpdateResolver.resolve(!0),this._lastUpdateResolver=null),this.emit(ot.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"_onKeyError",value:function(){var e=this._nativeKeySession&&this._nativeKeySession.error,t=new gt(Z.EME_MEDIA_KEY_SESSION_SAFARI_ERROR,e&&e.message||"MediaKeySession Safari Error");e&&(t.debug.errorCode=e.code,t.debug.systemCode=e.systemCode),this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):this._lastUpdateResolver&&(this._lastUpdateResolver.reject(t),this._lastUpdateResolver=null)}},{key:"_rebuildInitData",value:function(e){var t=new Uint8Array(e);if(new DataView(t.buffer).getUint32(0,!0)+4!==t.byteLength)throw new gt(Z.EME_INIT_DATA_MALFORMED,"Malformed init data");var n=function(e){for(var t=Math.floor(e.byteLength/2),n=new Uint16Array(t),r=new DataView(e.buffer),a=0;a<t;a++)n[a]=r.getUint16(2*a,!0);return String.fromCharCode.apply(null,n)}(t.slice(4)),r=n.match(/^skd:\/\/([0-9a-fA-F]+)/);if(!(null==r?void 0:r[1]))throw new gt(Z.EME_INIT_DATA_MALFORMED,"Invalid content ID");var a=r[1],o=new Uint8Array(function(e){for(var t=new Uint8Array(2*e.length),n=new DataView(t.buffer),r=e.split(""),a=0,o=r.length;a<o;a++){var i=r[a].charCodeAt(0);n.setUint16(2*a,i,!0)}return t.buffer}(a)),i=this._serverCertificate,s=new Uint8Array(t.byteLength+4+o.byteLength+4+i.byteLength),l=0;s.set(t,l),l+=t.byteLength;var c=new DataView(s.buffer);return c.setUint32(l,o.byteLength,!0),l+=4,s.set(o,l),l+=o.byteLength,c.setUint32(l,i.byteLength,!0),l+=4,s.set(i,l),s}},{key:"generateRequest",value:function(e,t){var n=this;return new Promise((function(e,r){n._lastGenerateResolver={resolve:e,reject:r};try{var a=n._rebuildInitData(t);n._nativeKeySession=n._nativeMediaKeys.createSession("video/mp4",new Uint8Array(a),null),n._attach()}catch(o){n._lastGenerateResolver=null,r(o)}}))}},{key:"update",value:function(e){var t=yt();if(this._lastUpdateResolver=t,!this._nativeKeySession)return Kt.warn("Tried to update with no WebKitMediaKeySession"),t.promise;try{this._nativeKeySession.update(new Uint8Array(e))}catch(n){t.reject(n)}return t.promise}},{key:"close",value:function(){var e=this;return new Promise((function(t){e._detach(),t(!0)}))}}]),n}($.vp),Gt=function(){function e(t){(0,c.Z)(this,e),this._lastBoundSetter=null,this._serverCertificate=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new WebKitMediaKeys(t)}return(0,d.Z)(e,[{key:"attach",value:function(e){var t=this;return new Promise((function(n){if(e.readyState>=1)return e.webkitSetMediaKeys(t._nativeMediaKeys),void n();var r=function n(){e.removeEventListener(ot.MEDIA_LOADEDMETADATA,n),t._lastBoundSetter=null,e.webkitSetMediaKeys(t._nativeMediaKeys)};t._lastBoundSetter=r,e.addEventListener(ot.MEDIA_LOADEDMETADATA,r),e.addEventListener(ot.WEBKIT_NEEDKEY,Et),n()}))}},{key:"detach",value:function(e){e.removeEventListener(ot.WEBKIT_NEEDKEY,Et),this._lastBoundSetter&&(e.removeEventListener(ot.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}},{key:"setServerCertificate",value:function(e){return this._serverCertificate=new Uint8Array(e),Promise.resolve(!0)}},{key:"createSession",value:function(){if(!this._serverCertificate)throw new gt(Z.EME_INVALID_STATE_ERROR,"The server certificate is not available");return new Vt(this._nativeMediaKeys,this._serverCertificate)}}]),e}(),Ht=function(){function e(t,n){(0,c.Z)(this,e),this.keySystem=t;var r=this._checkConfig(n);if(!r)throw new gt(Z.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations");this._configuration=r}return(0,d.Z)(e,[{key:"_checkConfig",value:function(e){var t,n=this.keySystem,r=!1,a=Zt(e);try{for(a.s();!(t=a.n()).done;){var o=t.value,i={initDataTypes:o.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"]};if(o.audioCapabilities){var s,l=Zt(o.audioCapabilities);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c.contentType){var d=c.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(n,d)&&(i.audioCapabilities.push(c),r=!0)}}}catch(_){l.e(_)}finally{l.f()}}if(o.videoCapabilities){var u,p=Zt(o.videoCapabilities);try{for(p.s();!(u=p.n()).done;){var f=u.value;if(f.contentType){var h=f.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(n,h)&&(i.videoCapabilities.push(f),r=!0)}}}catch(_){p.e(_)}finally{p.f()}}if(r)return i}}catch(_){a.e(_)}finally{a.f()}return null}},{key:"getConfiguration",value:function(){return this._configuration}},{key:"createMediaKeys",value:function(){var e=this;return new Promise((function(t){t(new Gt(e.keySystem))}))}}]),e}();function Wt(e){var t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e?e.attach(this):Promise.resolve()}var qt,zt=we.P.forTag("eme_polyfills.tester");function Qt(){return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.requestMediaKeySystemAccess)&&"undefined"==typeof WebKitMediaKeys&&"undefined"!=typeof MediaKeySystemAccess&&(null===MediaKeySystemAccess||void 0===MediaKeySystemAccess?void 0:MediaKeySystemAccess.prototype.getConfiguration)?(zt.log("Using native EME implementation."),"native"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.webkitGenerateKeyRequest)?(zt.log('Detected "webkit" Prefixed EME v0.1b. Polyfilling.'),Ft("webkit"),"v0.1b-webkit"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.generateKeyRequest)?(zt.log("Detected Unprefixed EME v0.1b. Polyfilling."),Ft(),"v0.1b"):"undefined"!=typeof MSMediaKeys?(zt.log("Detected MS IE EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((function(n){n(new It(e,t))}))};var e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=Ct}(),"ms-ie"):"function"==typeof WebKitMediaKeys?(zt.log("Detected Safari EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((function(n){n(new Ht(e,t))}))};var e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=Wt}(),"safari"):(zt.warn("Detected no EME APIs."),null)}var $t=(qt={},(0,r.Z)(qt,it.WIDEVINE,{commonName:"widevine",licenseServer:"https://@webgate/widevine-license",withCertificate:!0,pssh_field:{audio:"pssh_widevine",video:"encryption_data"}}),(0,r.Z)(qt,it.PLAYREADY,{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}}),(0,r.Z)(qt,it.PLAYREADY_HARDWARE,{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}}),(0,r.Z)(qt,it.FAIRPLAY,{commonName:"fairplay",licenseServer:"https://@webgate/fairplay-license",withCertificate:!0,pssh_field:{audio:"pssh_fairplay",video:"asset_id"}}),(0,r.Z)(qt,it.INVALID_SPOTIFY_KEY,{commonName:"spotify-invalid",licenseServer:"https://@webgate",withCertificate:!1,pssh_field:{audio:"pssh_invalid",video:"encryption_data"}}),qt),Xt=[{label:"video-sw-decode",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_DECODE"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:""},{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:""},{contentType:'video/webm; codecs="vp8"',robustness:""},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:""},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:""}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}];function Jt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t){var n,r,a,o=Jt(e);try{for(o.s();!(a=o.n()).done;){var i=a.value,s={audioCapabilities:[],videoCapabilities:[]},l=void 0,c=!1;if(null===(n=i.audioCapabilities)||void 0===n?void 0:n.length){c=!1;var d,u=Jt(i.audioCapabilities);try{for(u.s();!(d=u.n()).done;){var p=d.value;(l=p.contentType)&&(t(l)&&(s.audioCapabilities.push(p),c=!0))}}catch(y){u.e(y)}finally{u.f()}}if(null===(r=i.videoCapabilities)||void 0===r?void 0:r.length){c=!1;var f,h=Jt(i.videoCapabilities);try{for(h.s();!(f=h.n()).done;){var _=f.value;(l=_.contentType)&&(t(l)&&(s.videoCapabilities.push(_),c=!0))}}catch(y){h.e(y)}finally{h.f()}}if(c)return s}}catch(y){o.e(y)}finally{o.f()}return null}var nn=/([^;]+)(?:;\s?codecs="(.*)")?/;function rn(e){var t,n=null!==(t=e.match(nn))&&void 0!==t?t:[],r=(0,Q.Z)(n,3),a=r[1],o=void 0===a?"unknown":a,i=r[2];return{mimeType:o,codec:void 0===i?"unknown":i,contentType:e}}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function on(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ln=/([^;]+)(?:;\s?codecs="(.*)")?/,cn=we.P.forTag("playback.eme_manager"),dn={EMPTY:"-no-robustness",SW_CRYPTO:"-sw-crypto",SW_DECODE:"-sw-decode",HW_CRYPTO:"-hw-crypto",HW_DECODE:"-hw-decode",HW_ALL:"-hw-all"};function un(e,t){var n,r,a=[],o=new RegExp('codecs="('.concat(t.join("|"),')"')),i=on(e);try{for(i.s();!(r=i.n()).done;){var s=r.value;o.test(null!==(n=s.contentType)&&void 0!==n?n:"")||a.push(s)}}catch(l){i.e(l)}finally{i.f()}return a.length?a:null}function pn(e,t){var n,r,a,o,i=t.audio,s=t.video;if(!(null==i?void 0:i.length)&&!(null==s?void 0:s.length))return e;var l=e.audioCapabilities,c=e.videoCapabilities;return(null==i?void 0:i.length)&&(null===(n=e.audioCapabilities)||void 0===n?void 0:n.length)&&!(l=null!==(r=un(e.audioCapabilities,i))&&void 0!==r?r:void 0)||(null==s?void 0:s.length)&&(null===(a=e.videoCapabilities)||void 0===a?void 0:a.length)&&!(c=null!==(o=un(e.videoCapabilities,s))&&void 0!==o?o:void 0)?null:Object.assign(Object.assign({},e),{audioCapabilities:l,videoCapabilities:c})}var fn=function(e){(0,p.Z)(n,e);var t=an(n);function n(e){var r,a;return(0,c.Z)(this,n),(r=t.call(this))._unauthServerCertificateBase="",r._disallowCodecs={},r._keySystemDeferred=yt(),r._configuration=yt(),r._keySystemSettings=null,r._keySessions=[],r._configs=[],r._pendingCertificateRequest=null,r._certificate=null,r._transport=e.transport,r._emeImpl=e.emeImpl,r._noServerCertificate=!!e.noServerCertificate,r._precacheServerCertificate=null===(a=e.precacheServerCertificate)||void 0===a||a,r._unauthServerCertificateBase=e.unauthServerCertificateBase||"https://spclient.wg.spotify.com",r._configFilter=function(e){var t=["--ensure-no-match--"];if(null==e?void 0:e.length)for(var n=e.length;n--;){var r=e[n];r&&dn.hasOwnProperty(r)&&t.push(dn[r])}return new RegExp("(".concat(t.join("|"),")$"))}(e.disallowRobustnessValues||[]),r._disallowCodecs=e.disallowCodecs,r._preferredKeySystems=e.preferredKeySystems||[it.WIDEVINE,it.PLAYREADY,it.PLAYREADY_HARDWARE,it.FAIRPLAY],r}return(0,d.Z)(n,[{key:"_prepareConfiguration",value:function(e){var t=e.getConfiguration();cn.info("KeySystem configured as ",t.label),t.audioCapabilities&&t.audioCapabilities.length||this._appendProbableMediaCapabilities(e.keySystem,t);var n={keySystem:e.keySystem,keySystemImpl:this._emeImpl,audioFormats:this._parseCapabilities(t.audioCapabilities),videoFormats:this._parseCapabilities(t.videoCapabilities)};return this._keySystemSettings=$t[e.keySystem],this._configuration.resolve(n),n}},{key:"_parseCapabilities",value:function(e){var t;if(!e)return[];var n,r=[],a=on(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(null==o?void 0:o.contentType){var i=null!==(t=o.contentType.match(ln))&&void 0!==t?t:[],s=(0,Q.Z)(i,3),l=s[1],c=s[2];l&&r.push({contentType:o.contentType,mimeType:l,codec:null!=c?c:""})}}}catch(d){a.e(d)}finally{a.f()}return r}},{key:"_appendProbableMediaCapabilities",value:function(e,t){var n=tn(this._configs,(function(t){return(-1===t.indexOf("webm")||e!==it.PLAYREADY&&e!==it.PLAYREADY_HARDWARE)&&!!MediaSource.isTypeSupported(t)}));n&&(t.audioCapabilities=n.audioCapabilities,t.videoCapabilities=n.videoCapabilities)}},{key:"_trySetServerCertificate",value:function(e,t){var n=this,r=this._certificate;return(r&&r.expiry>Date.now()?Promise.resolve(r):this._requestServerCertificate(e)).then((function(e){return t.setServerCertificate(e.contents)})).then((function(){return n})).catch((function(e){return cn.warn("Error from setting server certificate",e),n}))}},{key:"_cacheServerCertificate",value:function(e){var t=this,n="";switch(e){case it.FAIRPLAY:n="fairplay";break;case it.WIDEVINE:n="widevine";break;default:return Promise.resolve(this)}return this._requestServerCertificate("".concat(this._unauthServerCertificateBase,"/").concat(n,"-license"),!1).then((function(){return t}),(function(e){return cn.warn("Cannot precache server certificate",e),t}))}},{key:"_requestServerCertificate",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._pendingCertificateRequest)return this._pendingCertificateRequest;var r=this._transport.request("".concat(e,"/v1/application-certificate"),{authorize:n,responseType:"arraybuffer",parseResponseHeaders:!0,retry:{condition:function(e,t){return e.getStatusFamily()===t.SERVER_ERROR}}}).then((function(e){var n;if(!e.body)throw new TypeError("Response body is invalid");t._pendingCertificateRequest=null;var r=3600,a=null===(n=e.headers)||void 0===n?void 0:n.get("cache-control");if(a){var o=a.match(/(?:^|,|\s)max-age=(\d+)(?:,|$)/);o&&o[1]&&(r=1e3*parseInt(o[1],10))}return t._certificate={expiry:Date.now()+(r-600),contents:e.body},t._certificate}));return r}},{key:"_extractPlayReadyChallenge",value:function(e,t){var n,r=null,a=new Uint16Array(e),o=String.fromCharCode.apply(null,a);if(-1===o.indexOf("PlayReadyKeyMessage"))return cn.info("Using unextracted PlayReady message."),e;var i=(new DOMParser).parseFromString(o,"application/xml"),s=i.getElementsByTagName("Challenge")[0],l=null===(n=null==s?void 0:s.childNodes[0])||void 0===n?void 0:n.nodeValue;if(l)try{r=atob(l);var c=i.getElementsByTagName("name"),d=i.getElementsByTagName("value");if(c.length!==d.length)throw new gt(Z.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")}catch(u){this.emit(ot.EME_LICENSE_REQUEST_ERROR,{playId:t,error:u}),r=null}else this.emit(ot.EME_LICENSE_REQUEST_ERROR,{playId:t,error:new gt(Z.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")});return r}},{key:"_onMessage",value:function(e,t){e.timeMap.generate.end=Date.now();var n="message"in t?t.message:null,r="messageType"in t?t.messageType:void 0;if(cn.info("Got EME message event with type",r),n&&e.keySystem===it.PLAYREADY&&(n=this._extractPlayReadyChallenge(n,e.playId)),n)if(e.licenseServer){e.timeMap.request.start=Date.now();var a=e.licenseServer;e.keySystem===it.FAIRPLAY&&(a="".concat(a).concat(-1!==a.indexOf("?")?"&":"?","assetId=hex")),this._transport.request(a,{method:"POST",payload:n,responseType:"arraybuffer",retry:{condition:function(e,t){return 400!==e.status&&402!==e.status&&403!==e.status&&(!e.body||e.getStatusFamily()!==t.SUCCESS)}}}).then(this._handleLicenseResponse.bind(this,e))}else cn.info("Ignoring message event: no licenseServer url");else cn.info("Ignoring message event: no valid request payload")}},{key:"_handleLicenseResponse",value:function(e,t){var n,r=this,a=function(t){t.playId=e.playId,e.licenseServer&&(t.licenseServer=e.licenseServer),r.emit(ot.EME_LICENSE_REQUEST_ERROR,{playId:e.playId,error:t})};if(e.timeMap.request.end=Date.now(),200!==t.status){var o;try{if(t.body){var i=new Uint8Array(t.body),s=String.fromCharCode.apply(String,i);o=JSON.parse(s).errorMsg}}catch(c){}402===t.status?this.emit(ot.EME_LICENSE_REQUEST_CAPPED,{playId:e.playId,error:new bt(Z.CAPPING_USER_IS_CAPPED,"User is capped.")}):400===t.status&&"widevine error"===o?((n=gt.fatal(Z.EME_LICENSE_REQUEST_WIDEVINE_ERROR,"Widevine license server failed to parse request.")).status=t.status,n.shouldRefreshEndpoint=!0,a(n)):((n=new gt(Z.EME_LICENSE_REQUEST_FAILED_WITH_STATUS,"License request failed (".concat(o||"unknown",")"))).status=t.status,n.shouldRefreshEndpoint=400===t.status||403===t.status,a(n))}else{if(!t.body)return(n=new gt(Z.EME_LICENSE_REQUEST_EMPTY_RESPONSE,"Empty license response body")).status=t.status,void a(n);try{e.timeMap.update.start=Date.now(),e.keySession.update(t.body).catch((function(e){a(new gt(Z.EME_LICENSE_UPDATE_FAILED,e.message||"License update failed."))})),cn.info("KeySession updated.")}catch(d){var l=d.message;a(new gt(Z.EME_LICENSE_UPDATE_FAILED,l||"License update failed."))}}}},{key:"_selectKeySystem",value:function(e){for(var t=this._preferredKeySystems,n=0,r=t.length;n<r;n++){var a=t[n];if(a&&a in e)return e[a]}return null}},{key:"_testMediaKeys",value:function(e){return new Promise((function(t){t(e.createMediaKeys())})).then((function(t){if(!t)return Promise.reject(gt.fatal(Z.EME_MEDIA_KEYS_NOT_SUPPORTED,"Cannot create MediaKeys from KeySystemAccess"));e.keySystem===it.FAIRPLAY&&t.setServerCertificate(new ArrayBuffer(0));try{if(!t.createSession())throw new Error("")}catch(r){var n=r.message;return Promise.reject(gt.fatal(Z.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED,n||"Cannot create MediaKeySession from KeySystemAccess"))}return Promise.resolve(e)}),(function(e){return cn.error(e.name),Promise.reject(gt.fatal(Z.EME_MEDIA_KEYS_NOT_SUPPORTED,e.message||"Unknown error"))}))}},{key:"_saveSession",value:function(e){this._keySessions.push(e)}},{key:"destroySessions",value:function(){var e,t=[],n=on(this._keySessions);try{for(n.s();!(e=n.n()).done;){var r=e.value;try{var a=r.keySession;if(!a)continue;r.onMessageListener&&a.removeEventListener(ot.KEY_SESSION_MESSAGE,r.onMessageListener),r.onKeyStatusChangeListener&&a.removeEventListener(ot.KEY_SESSION_STATUSES_CHANGE,r.onKeyStatusChangeListener);var o=Promise.resolve(a.close()).catch((function(e){cn.warn("Failed to close KeySession",e)}));t.push(o),r.keySession=null,r.onMessageListener=null,r.onKeyStatusChangeListener=null,cn.info("Closed KeySession")}catch(i){cn.warn("Failed to close KeySession",i)}}}catch(s){n.e(s)}finally{n.f()}return this._keySessions=[],Promise.all(t)}},{key:"init",value:function(){var e,t=this,n=this._keySystemDeferred,r={},a=[],o=[],i=on(Xt);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(!s.label||!this._configFilter.test(s.label)){if(this._disallowCodecs){var l=pn(s,this._disallowCodecs);if(!l)continue;s=l}o.push(s)}}}catch(u){i.e(u)}finally{i.f()}for(var c in this._configs=o,it)if(Object.prototype.hasOwnProperty.call(it,c)){var d=c;a.push(navigator.requestMediaKeySystemAccess(it[d],o).then((function(e){r[e.keySystem]=e})).catch((function(){})))}return Promise.all(a).then(this._selectKeySystem.bind(this,r)).then((function(e){return e?t._testMediaKeys(e):Promise.reject(new gt(Z.EME_NO_SUPPORTED_KEYSYSTEM,"No supported keysystem was found."))})).then((function(e){return t._prepareConfiguration(e),n.resolve(e),t._precacheServerCertificate?t._cacheServerCertificate(e.keySystem):t})).catch((function(e){var r=e.code||Z.EME_NO_SUPPORTED_KEYSYSTEM,a=e.message||"No supported keysystem";return n.reject(gt.fatal(r,a)),n.promise.then((function(){return t}))}))}},{key:"createMediaKeys",value:function(e){var t=this;return this._keySystemDeferred.promise.then((function(e){return e.createMediaKeys()})).then((function(t){return Promise.all([e.setMediaKeys(t),t])})).then((function(n){var r=(0,Q.Z)(n,2),a=(r[0],r[1]);if(!e.mediaKeys)throw new gt(Z.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED,"Failed to set MediaKeys on HTMLMediaElement");return t._configuration.promise.then((function(){var e=t._keySystemSettings;return e&&!t._noServerCertificate&&e.withCertificate?t._trySetServerCertificate(e.licenseServer,a):t}))}))}},{key:"removeMediaKeys",value:function(e){var t=this;return Promise.resolve(e.setMediaKeys(null)).then((function(){return t}))}},{key:"getKeySystemInfo",value:function(){return this._configuration.promise}},{key:"getKeySystemImpl",value:function(){return this._emeImpl}},{key:"createSessionWithParams",value:function(e){var t=this;return new Promise((function(n,r){cn.info("Creating KeySession",e.keySystem);var a=e.mediaKeys.createSession(),o={generate:{start:0,end:0},request:{start:0,end:0},update:{start:0,end:0}},i=t._keySystemSettings&&t._keySystemSettings.licenseServer||void 0,s=t._onMessage.bind(t,{keySystem:e.keySystem,keySession:a,licenseServer:e.licenseServer||i,playId:e.playId,timeMap:o});a.addEventListener(ot.KEY_SESSION_MESSAGE,s);var l=function(){cn.info("KeyStatus change"),o.update.end=Date.now(),n({elapsed:{generate:Math.max(o.generate.end-o.generate.start,0),request:Math.max(o.request.end-o.request.start,0),update:Math.max(o.update.end-o.update.start,0)}})};return a.addEventListener(ot.KEY_SESSION_STATUSES_CHANGE,l),t._saveSession({keySession:a,onMessageListener:s,onKeyStatusChangeListener:l}),cn.info("Generating KeySession request",e.keySystem),o.generate.start=Date.now(),Promise.resolve(a.generateRequest(e.initDataType,e.initData.buffer)).catch((function(e){if(e){var t;switch(e.name){case"NotSupportedError":t=Z.EME_NOT_SUPPORTED_ERROR;break;case"InvalidStateError":t=Z.EME_INVALID_STATE_ERROR;break;default:t=Z.EME_UNKNOWN_ERROR}r(new gt(t,e.message||"Unknown error message."))}}))}))}}],[{key:"create",value:function(e){return new Promise((function(t){var r=Qt();if(!r)throw gt.fatal(Z.EME_API_NOT_SUPPORTED,"Platform does not support navigator.requestMediaKeySystemAccess");t(new n(Object.assign(Object.assign({},e),{emeImpl:r})).init())}))}}]),n}($.vp),hn=n(84506);n(44363);function _n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var yn=function(e){(0,p.Z)(n,e);var t=_n(n);function n(e,r,a){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,c.Z)(this,n),(o=t.call(this,r)).code=e,o.message=r,o.status=a,o.debug=i,o.name="FragmentError",o}return(0,d.Z)(n)}((0,ae.Z)(Error)),mn=n(5778),gn=function(){function e(t){var n;if((0,c.Z)(this,e),this._fallbackURLs=[],this._fragments=[],this._loaded=!1,this._mediaType="audio",this._noAuth=!1,this._resolvedURLs=[],this._segmentLength=0,this._duration=0,!t.fileId&&!t.resolvedURL)throw new TypeError("Missing: provide either fileId or resolvedURL");this._abrManager=t.abrManager,this._mediator=t.mediator,this._disableCache=t.disableCache,this._fileId=t.fileId,this._format=t.format,this._isAd=t.isAd||!1,this._keySystem=t.keySystem,this._keySystemSettings=$t[this._keySystem],this._licenseEndpoint=t.licenseEndpoint,this._logData=t.logData||{displayTrack:"",playbackId:""},this._resolver=t.resolver,this._resolvedURL=t.resolvedURL,this._noAuth=null!==(n=t.noAuth)&&void 0!==n&&n,this._transport=t.transport,this._uri=t.uri,this._audioGainDb=t.audioGain}return(0,d.Z)(e,[{key:"_parsePSSHBox",value:function(e){for(var t=mn.DS.decode(e),n=new Uint8Array(t.length),r=0,a=t.length;r<a;r++)n[r]=t.charCodeAt(r);return n}},{key:"_parseAssetID",value:function(e){for(var t=mn.DS.decode(e),n=new Array(t.length),r=0,a=t.length;r<a;r++){var o=t.charCodeAt(r).toString(16);n[r]=1===o.length?"0".concat(o):o}return n.join("")}},{key:"getCalculatedDuration",value:function(){return this._duration}},{key:"getFileId",value:function(){return this._fileId}},{key:"getFormat",value:function(){return this._format||""}},{key:"getAudioGain",value:function(){return this._audioGainDb}},{key:"getFragmentLength",value:function(){return this._segmentLength}},{key:"canLowerBitrate",value:function(){return!1}},{key:"getInitFragment",value:function(){return this._initFragment}},{key:"getInitParams",value:function(){var e={keySystem:this._keySystem,initDataType:this._protection,initData:this._psshBox,licenseServer:null};return Promise.resolve(e)}},{key:"getKeySystem",value:function(){return this._keySystem}},{key:"getLicenseEndpoint",value:function(){return this._licenseEndpoint}},{key:"getLogData",value:function(){return this._logData||{}}},{key:"getMediaType",value:function(){return this._mediaType}},{key:"getResolvedURL",value:function(){return this._resolvedURL}},{key:"getResolvedURLs",value:function(){return this._resolvedURLs}},{key:"getHLSURL",value:function(){throw new _t(Z.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.")}},{key:"releaseHLSURL",value:function(){}},{key:"getURI",value:function(){return this._uri}},{key:"isAd",value:function(){return this._isAd}},{key:"isProtected",value:function(){return!!this._protection&&!!this._psshBox}},{key:"setLogData",value:function(e){return this._logData=e,this}},{key:"toLogJSON",value:function(){return{uri:this._uri,fileId:this._fileId,format:this._format||"",resolved_url:this._resolvedURL}}}]),e}(),vn="application/vnd.apple.mpegurl";function bn(e){var t,n=function(e){return e.map((function(e){if(e.byteEnd&&void 0!==e.byteStart){var t="".concat(1+e.byteEnd-e.byteStart);return t+="@".concat(e.byteStart),"#EXTINF:".concat(e.duration,",\n#EXT-X-BYTERANGE:").concat(t,"\n").concat(e.url)}return"#EXTINF:".concat(e.duration,",\n").concat(e.url)})).join("\n")}(e.segments),r=e.assetID?'#EXT-X-KEY:METHOD=SAMPLE-AES,URI="skd://'.concat(e.assetID,'",KEYFORMATVERSIONS="1",KEYFORMAT="com.apple.streamingkeydelivery"'):"",a=e.map?'#EXT-X-MAP:URI="'.concat(e.map.url,'"'):"";return(null===(t=e.map)||void 0===t?void 0:t.byteEnd)&&void 0!==e.map.byteStart&&(a+=',BYTERANGE="'.concat(1+e.map.byteEnd,"@").concat(e.map.byteStart,'"')),"#EXTM3U\n#EXT-X-VERSION:6\n#EXT-X-TARGETDURATION:".concat(Math.floor(e.targetDuration),"\n#EXT-X-MEDIA-SEQUENCE:0\n#EXT-X-PLAYLIST-TYPE:VOD\n").concat(a?"".concat(r,"\n").concat(a):r,"\n").concat(n,"\n#EXT-X-ENDLIST")}function En(e){return"data:application/vnd.apple.mpegurl;base64,".concat(btoa(e))}function wn(e){var t=new Blob([e],{type:vn});return URL.createObjectURL(t)}function Sn(e){return wn(bn(e))}function kn(e){return En(bn(e))}n(2707);var Rn=/avc1\.(([0-9a-f]{2})[0-9a-f]{2}([0-9a-f]{2}))/;function Pn(e,t){var n=e.toLowerCase().match(Rn),r=t.toLowerCase().match(Rn);if(!n||!r)return!1;var a=(0,Q.Z)(n,4),o=a[1],i=a[2],s=a[3],l=(0,Q.Z)(r,4),c=l[1],d=l[2],u=l[3];return o===c||"4d"===i&&"4d"===d&&parseInt(s,16)>=parseInt(u,16)}function Tn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(e,t){return e.sort((function(e,n){return"video_bitrate"in e&&"video_bitrate"in n?t?e.video_resolution===n.video_resolution?e.video_bitrate-n.video_bitrate:e.video_resolution-n.video_resolution:e.video_bitrate-n.video_bitrate:e.max_bitrate-n.max_bitrate}))}function In(e,t){return void 0!==t&&Array.isArray(e.encryption_indices)&&-1===e.encryption_indices.indexOf(t)}function Ln(e,t){return!!t&&t(Object.assign({mimeType:e.mime_type},function(e){return"video_codec"in e}(e)?{type:"video",codec:e.video_codec,bitrate:e.video_bitrate,height:e.video_height,width:e.video_width}:{type:"audio",codec:e.audio_codec,bitrate:e.audio_bitrate}))}function On(e){return"audio_codec"in e?e.audio_codec:e.video_codec}function Dn(e){var t,n=e.codec,r=e.formats,a=e.profiles,o=e.encryptionIndex,i=e.disallowProfile,s=e.preferredKeySystem,l=e.preferredVideoResolution,c=e.allowMixedAVC1Codecs,d=Tn(r);try{for(d.s();!(t=d.n()).done;){var u,p=t.value,f=[],h="spotify/unknown-mimetype",_="unknown-codec",y=Tn(a);try{for(y.s();!(u=y.n()).done;){var m=u.value,g=On(m);!(n in m)||In(m,o)||s===it.FAIRPLAY&&"ts"!==m.file_type||Ln(m,i)||(s!==it.FAIRPLAY||"ts"!==m.file_type?"unknown-codec"!==_||m.mime_type!==p.mimeType||g!==p.codec&&!Pn(p.codec,g)?m.mime_type===h&&(g===_||c&&Pn(_,g))&&(f.push(m),m.__effective_codec=_):(h=p.mimeType,_=c?p.codec:g,f.push(m),m.__effective_codec=p.codec):f.push(m))}}catch(v){y.e(v)}finally{y.f()}if(f.length)return Cn(f,l)}}catch(v){d.e(v)}finally{d.f()}return[]}function Nn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var xn=we.P.forTag("playback.video_content");function Un(e){if(!e)return"";var t=e.__effective_codec||("audio_codec"in e?e.audio_codec:e.video_codec);return"".concat(e.mime_type,';codecs="').concat(t,'"')}var Fn,Zn,Bn={method:"GET",responseType:"arraybuffer",timing:!0,retry:{condition:function(e,t){if(0===e.status)return!0;var n=e.getStatusFamily();return n===t.CONNECTION_ERROR||n===t.SERVER_ERROR}}},Yn=function(e){(0,p.Z)(n,e);var t=Mn(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e))._assetId="",r._endTime=0,r._videoFormats=[],r._audioFormats=[],r._subtitleLanguages=[],r._videoProfile=null,r._videoProfiles=[],r._audioProfile=null,r._audioProfiles=[],r._baseURL="",r._initTemplate="",r._segmentTemplate="",r._subtitleTemplate="",r._initSegments={},r._hlsURLs=[],r._allowMixedAVC1Codecs=!1,r._initTemplate="",r._isAd=e.isAd||!1,r._mediaType="video",r._resolver=e.resolver,r._videoFormats=e.videoFormats,r._audioFormats=e.audioFormats,r._disallowProfile=e.disallowProfile,r._videoResolution=e.videoResolution,r._allowMixedAVC1Codecs=!!e.allowMixedAVC1Codecs,r._keySystem===it.FAIRPLAY&&r._audioFormats.unshift({mimeType:"audio/mp2t",codec:"mp4a.40.2"}),r._parseFragmentResponse=r._parseFragmentResponse.bind((0,u.Z)(r)),r}return(0,d.Z)(n,[{key:"_isQualityMatched",value:function(e,t,n){var r,a,o,i;if(this._videoResolution){var s=null!==(r=this._videoResolution.max)&&void 0!==r?r:Number.MAX_SAFE_INTEGER,l=null!==(a=this._videoResolution.min)&&void 0!==a?a:0;if(n){var c=null!==(o=this._videoResolution.start)&&void 0!==o?o:s;return e.video_resolution<=c}return e.video_resolution>=l&&e.video_resolution<=s}var d=null!==(i=null==t?void 0:t.audio_bitrate)&&void 0!==i?i:0,u=this._abrManager.getBandwidthEstimate();return e.video_bitrate+d<2*u-1e5}},{key:"_updateVariants",value:function(e){var t,n=this._audioProfiles[0];this._audioProfile=null!=n?n:null;var r=this._videoProfiles,a=this._videoProfile,o=null,i=r.length;if(i){for(;i--;){var s=r[i];if(s&&this._isQualityMatched(s,n,!!e)){o=s;break}}o||(o=r[0]),this._videoProfile=o,(null==a?void 0:a.id)!==o.id&&(xn.log("Video profile changed. ID ".concat(o.id," (").concat(o.video_codec,"), Bitrate ").concat(o.video_bitrate,", ").concat(o.video_width,"x").concat(o.video_height)),null===(t=this._mediator)||void 0===t||t.emit(ct.VIDEO_PROFILE_CHANGED,{profile:{type:"video",mimeType:o.mime_type,codec:o.video_codec,bitrate:o.video_bitrate,height:o.video_height,width:o.video_width}}))}}},{key:"_constructFragmentURL",value:function(e,t,n){if(!t&&!n)throw new Error("Both audioProfile and videoProfile is null");return e.init?this._resolver.getInitSegmentURLs(this._baseURL,this._initTemplate,t,n):this._resolver.getSegmentURLs(this._baseURL,this._segmentTemplate,e.timeStart,t,n)}},{key:"_fetchBufferData",value:function(e,t,n,r){return this._transport.request(e,Object.assign(Object.assign({},Bn),{metadata:{timeStart:Date.now(),fragment:t,profile:n,loggingURL:r}})).then(this._parseFragmentResponse)}},{key:"_fetchInitSegmentBuffers",value:function(e,t){var n,r=this._initFragment;if(!r)return Promise.reject(new _t(Z.FILE_NOT_RESOLVED,"Cannot fetch Init Segment buffers: File not resolved."));try{n=this._constructFragmentURL(r,e,t)}catch(c){return Promise.reject(c)}var a=this._initSegments,o=Promise.resolve(null);if(e){var i=a[e.id];(null==i?void 0:i.buffer.byteLength)?o=Promise.resolve(i):(null==n?void 0:n.audio)&&(o=this._fetchBufferData(n.audio,r,e,n.audioLogging).then((function(t){return a[e.id]=t,t})))}var s=Promise.resolve(null);if(t){var l=a[t.id];(null==l?void 0:l.buffer.byteLength)?s=Promise.resolve(l):(null==n?void 0:n.video)&&(s=this._fetchBufferData(n.video,r,t,n.videoLogging).then((function(e){return a[t.id]=e,e})))}return Promise.all([o,s]).then((function(e){var t=(0,Q.Z)(e,2);return{audio:t[0],video:t[1]}}))}},{key:"_fetchBufferForFragment",value:function(e,t,n){var r;try{r=this._constructFragmentURL(e,t,n)}catch(a){return Promise.reject(a)}return Promise.all([this._fetchInitSegmentBuffers(t,n),!e.init&&r.audio?this._fetchBufferData(r.audio,e,t,r.audioLogging):null,!e.init&&r.video?this._fetchBufferData(r.video,e,n,r.videoLogging):null]).then((function(t){var n,r,a,o=(0,Q.Z)(t,3),i=o[0],s=o[1],l=o[2];return e.init?a={audio:null!==(n=i.audio)&&void 0!==n?n:void 0,video:null!==(r=i.video)&&void 0!==r?r:void 0}:(a={audio:null!=s?s:void 0,video:null!=l?l:void 0},e.cacheBufferSet&&(e.bufferSet=a),a.audio&&(null==i?void 0:i.audio)&&(a.audio.initBuffer=i.audio.buffer),a.video&&(null==i?void 0:i.video)&&(a.video.initBuffer=i.video.buffer)),a})).catch((function(e){return Promise.reject(e)}))}},{key:"_parseFragmentResponse",value:function(e){var t,n,r,a,o=e.metadata,i=o.fragment,s=o.profile,l=o.timeStart,c=o.loggingURL,d=Un(s),u=function(e){return e?"audio_bitrate"in e?e.audio_bitrate:e.video_bitrate:0}(s),p="video_resolution"in s?s.video_resolution:void 0,f="".concat(i.timeStart,"-").concat(i.timeEnd),h="video_resolution"in s?"video":"audio";switch(e.status){case 0:var _=new yn(Z.FRAGMENT_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:f,mimetype:d,resolution:p,bitrate:u});return null===(t=this._mediator)||void 0===t||t.emit(ct.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:h,url:c,start_time:l,init:i.init,error:_}),Promise.reject(_);case 200:case 206:var y=e.body;if(!(null==y?void 0:y.byteLength)){var m=new yn(Z.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:f,mimetype:d,resolution:p,bitrate:u});return null===(n=this._mediator)||void 0===n||n.emit(ct.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:h,url:c,start_time:l,init:i.init,error:m}),Promise.reject(m)}var g=y.byteLength;this._abrManager.sample(g,Date.now()-l),this._updateVariants();var v=8e3*g/e.timing.completed;return null===(r=this._mediator)||void 0===r||r.emit(ct.FRAGMENT_FETCHED,{media_type:"video",segment_type:h,url:c,init:i.init,byte_length:g,start_time:l,end_time:Date.now(),bandwidth:v}),Promise.resolve({profileId:"".concat(this._fileId,"-").concat(s.id),bufferURL:c,buffer:y,byteStart:0,byteEnd:g-1,mimetype:d,resolution:p,bitrate:u,bandwidth:v})}var b=new yn(Z.FRAGMENT_REQUEST_FAILED_WITH_STATUS,"Buffer request failed with status ".concat(e.status),e.status,{time_range:f,mimetype:d,resolution:p,bitrate:u});return null===(a=this._mediator)||void 0===a||a.emit(ct.FRAGMENT_FETCH_ERROR,{media_type:"video",segment_type:h,url:c,init:i.init,start_time:l,error:b}),Promise.reject(b)}},{key:"_getHLSURLForProfile",value:function(e){for(var t=this._duration,n=this._segmentLength,r=this._segmentTemplate,a=[],o=0;o<t;o+=n){var i=o+n>t?t-o:n,s=r.replace("{{profile_id}}",e.id.toString(10)).replace("{{segment_timestamp}}",o.toString(10)).replace("{{file_type}}",e.file_type);a.push({duration:i,url:"".concat(this._baseURL).concat(s)})}var l=("undefined"==typeof MediaSource?Sn:kn)({assetID:this._assetId,targetDuration:n,segments:a});return this._hlsURLs.push(l),l}},{key:"_calculateFragments",value:function(e){this._duration=e.end_time_millis/1e3;var t=this._segmentLength;this._initFragment={init:!0,cacheBufferSet:!1,timeStart:-1,timeEnd:-1,byteRanges:{}};for(var n=0;n<this._duration;n+=t)this._fragments.push({cacheBufferSet:!n&&!this._disableCache,timeStart:n,timeEnd:n+t,byteRanges:{}})}},{key:"setVideoResolution",value:function(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._updateVariants()}},{key:"getCurrentBitrate",value:function(){var e,t;return null!==(t=null===(e=this._videoProfile)||void 0===e?void 0:e.video_bitrate)&&void 0!==t?t:0}},{key:"getBufferForFragment",value:function(e){var t;if(!e)return Promise.reject(new TypeError("No fragment provided"));var n=this._audioProfile,r=this._videoProfile;return e.bufferSet&&(!r||(null===(t=e.bufferSet.video)||void 0===t?void 0:t.resolution)&&e.bufferSet.video.resolution>=r.video_resolution)?Promise.resolve(e.bufferSet):this._fetchBufferForFragment(e,null!=n?n:void 0,null!=r?r:void 0)}},{key:"clearCachedBuffers",value:function(){this._initFragment&&(this._initSegments={}),this._fragments.forEach((function(e){e.bufferSet=null}))}},{key:"getDuration",value:function(){return this._endTime}},{key:"getFragmentAfterTime",value:function(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[1];var n,r=Nn(this._fragments);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.timeStart>e)return a}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"getFragmentForTime",value:function(e){var t;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return this._fragments[0];var n,r=Nn(this._fragments);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.timeStart<=e&&a.timeEnd>=e)return a}}catch(o){r.e(o)}finally{r.f()}return null}},{key:"getSubtitleLanguages",value:function(){return this._subtitleLanguages}},{key:"getSubtitles",value:function(){var e=this;return this._subtitleLanguages.map((function(t){return{lang:t,url:e._subtitleTemplate.replace("{{language_code}}",t)}}))}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resolveLatency:0,manifestLatency:0};if(this._loaded)return t.resolveLatency=0,t.manifestLatency=0,Promise.resolve(this);if(!this._fileId)throw new TypeError("Missing: provide either fileId or resolvedURL");var n=Date.now();return this._resolver.getManifest(this._fileId,this._noAuth).then((function(r){var a,o,i,s;t.resolveLatency=0,t.manifestLatency=Date.now()-n;var l=r.contents[0];if(!l)return(s=new _t(Z.FILE_MALFORMED_SEEKTABLE,"Malformed seektable: no contents.")).track=e.toLogJSON(),Promise.reject(s);e._resolvedURLs=r.base_urls.slice();var c=(0,hn.Z)(r.base_urls),d=c[0],u=c.slice(1);d&&(e._baseURL=d,e._fallbackURLs=u),e._resolvedURL=e._baseURL,e._initTemplate=r.initialization_template,e._segmentTemplate=r.segment_template,e._segmentLength=l.segment_length;var p=void 0;if(null===(a=l.encryption_infos)||void 0===a?void 0:a.length){for(var f,h=l.encryption_infos,_=e._keySystemSettings.commonName,y=0,m=h.length;y<m;y++){var g=h[y];if(g&&g.key_system===_){p=y,f=g[e._keySystemSettings.pssh_field.video];break}}if(!f)return(s=new _t(Z.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format.")).track=e.toLogJSON(),Promise.reject(s);switch(e._keySystemSettings.commonName){case"widevine":case"playready":e._protection="cenc";try{e._psshBox=e._parsePSSHBox(f)}catch(v){return(s=new _t(Z.FILE_MALFORMED_PSSH,"Invalid PSSH value.")).track=e.toLogJSON(),Promise.reject(s)}break;case"fairplay":e._protection="hls",e._psshBox=new Uint8Array([]);try{e._assetId=e._parseAssetID(f)}catch(v){return(s=new _t(Z.FILE_MALFORMED_PSSH,"Invalid PSSH value.")).track=e.toLogJSON(),Promise.reject(s)}break;default:return(s=new _t(Z.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format.")).track=e.toLogJSON(),Promise.reject(s)}}return e._endTime=r.end_time_millis,e._videoProfiles=Dn({codec:"video_codec",formats:e._videoFormats,profiles:l.profiles,encryptionIndex:p,disallowProfile:e._disallowProfile,preferredKeySystem:e._keySystem,preferredVideoResolution:e._videoResolution,allowMixedAVC1Codecs:e._allowMixedAVC1Codecs}),e._audioProfiles=Dn({codec:"audio_codec",formats:e._audioFormats,profiles:l.profiles,encryptionIndex:p,preferredKeySystem:e._keySystem}),e._updateVariants(!0),e._calculateFragments(r),e._subtitleLanguages=r.subtitle_language_codes||[],null===(o=e._mediator)||void 0===o||o.emit(ct.SUBTITLE_LANGUAGES_LOADED,{languages:e._subtitleLanguages}),(null===(i=r.subtitle_base_urls)||void 0===i?void 0:i.length)&&r.subtitle_template?e._subtitleTemplate="".concat(r.subtitle_base_urls[0]).concat(r.subtitle_template):(xn.info("No subtitles available"),e._subtitleTemplate=""),e}))}},{key:"adaptToBandwidth",value:function(){return this._updateVariants(),Promise.resolve(!0)}},{key:"getResolveLatency",value:function(){}},{key:"getPlayableCodecs",value:function(){var e,t;return[Un(null!==(e=this._videoProfile)&&void 0!==e?e:void 0),Un(null!==(t=this._audioProfile)&&void 0!==t?t:void 0)].filter((function(e){return!!e}))}},{key:"getAudioProfile",value:function(){return this._audioProfile}},{key:"getVideoProfile",value:function(){return this._videoProfile}},{key:"getVideoProfiles",value:function(){return this._videoProfiles}},{key:"getHLSURL",value:function(){if(!this._resolvedURL)throw new _t(Z.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");this.releaseHLSURL();var e=[],t=this._audioProfiles[0];t&&e.push('#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="audio",LANGUAGE="eng",NAME="English",AUTOSELECT=YES,URI="'.concat(this._getHLSURLForProfile(t),'"'));var n,r=Nn(this._videoProfiles);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push("#EXT-X-STREAM-INF:BANDWIDTH=".concat(a.max_bitrate,",RESOLUTION=").concat(a.video_width,"x").concat(a.video_height,',CODECS="').concat((null==t?void 0:t.audio_codec)?"mp4a.40.2, ".concat(a.video_codec):a.video_codec,'"').concat((null==t?void 0:t.audio_codec)?',AUDIO="audio"':"","\n").concat(this._getHLSURLForProfile(a)))}}catch(s){r.e(s)}finally{r.f()}var o="#EXTM3U\n".concat(e.join("\n")),i=("undefined"==typeof MediaSource?wn:En)(o);return this._hlsURLs.push(i),i}},{key:"releaseHLSURL",value:function(){var e,t=Nn(this._hlsURLs);try{for(t.s();!(e=t.n()).done;){var n=e.value;URL.revokeObjectURL(n)}}catch(r){t.e(r)}finally{t.f()}this._hlsURLs=[]}},{key:"canLowerBitrate",value:function(){var e,t=this._videoProfiles[0];return(null===(e=this._videoProfile)||void 0===e?void 0:e.id)!==(null==t?void 0:t.id)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(gn);!function(e){e[e.MP3_256=3]="MP3_256",e[e.MP3_320=4]="MP3_320",e[e.MP3_160=5]="MP3_160",e[e.MP3_96=6]="MP3_96",e[e.MP4_128=10]="MP4_128",e[e.MP4_256=11]="MP4_256",e[e.MP4_128_DUAL=12]="MP4_128_DUAL",e[e.MP4_256_DUAL=13]="MP4_256_DUAL",e[e.MP4_128_CBCS=14]="MP4_128_CBCS",e[e.MP4_256_CBCS=15]="MP4_256_CBCS",e[e.MP4_FLAC=17]="MP4_FLAC"}(Fn||(Fn={}));var Kn=(Zn={},(0,r.Z)(Zn,Fn.MP3_256,"audio/mp3"),(0,r.Z)(Zn,Fn.MP3_320,"audio/mp3"),(0,r.Z)(Zn,Fn.MP3_160,"audio/mp3"),(0,r.Z)(Zn,Fn.MP3_96,"audio/mp3"),(0,r.Z)(Zn,Fn.MP4_128,'audio/mp4; codecs="mp4a.40.2"'),(0,r.Z)(Zn,Fn.MP4_256,'audio/mp4; codecs="mp4a.40.2"'),(0,r.Z)(Zn,Fn.MP4_128_DUAL,'audio/mp4; codecs="mp4a.40.2"'),(0,r.Z)(Zn,Fn.MP4_256_DUAL,'audio/mp4; codecs="mp4a.40.2"'),(0,r.Z)(Zn,Fn.MP4_128_CBCS,'audio/mp4; codecs="mp4a.40.2"'),(0,r.Z)(Zn,Fn.MP4_256_CBCS,'audio/mp4; codecs="mp4a.40.2"'),(0,r.Z)(Zn,Fn.MP4_FLAC,'audio/mp4; codecs="flac"'),Zn);function Vn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function Wn(e,t){return t.hasOwnProperty(e)}var qn=function(e){(0,p.Z)(n,e);var t=Hn(n);function n(e){var r;if((0,c.Z)(this,n),(r=t.call(this,e))._lastResolveTimestamp=0,r._profileId="".concat(Date.now()),r._initBufferPromise=null,r._lastFetchedBuffer=null,r._hlsURL=null,r._bypassResolve=!!r._resolvedURL,r._emitWarning=e.emitWarning||function(){},r._mediaType="audio",r._noManifest=!!e.noManifest,r._preloadedManifest=e.preloadedManifest,r._resolver=e.resolver,r._segmentLength=0,r._fileFormat=e.fileFormat,r._fileFormat)r._audioCodec=Kn[r._fileFormat];else switch(r._format){case lt.MP3:r._audioCodec=Kn[Fn.MP3_160];break;case lt.MP4:case lt.MP4_DUAL:case lt.MP4_CBCS:r._audioCodec=Kn[Fn.MP4_128];break;default:throw new TypeError("Unknown audio format ".concat(r._format))}return r._fileId&&(r._profileId=r._fileId),r._parseFragmentResponse=r._parseFragmentResponse.bind((0,u.Z)(r)),r}return(0,d.Z)(n,[{key:"_parseFragmentResponse",value:function(e){var t=this,n=e.metadata,r=n.requestURL,a=n.fragment,o=n.byteRangeHeader,i=n.expectedLength,s="".concat(a.timeStart,"-").concat(a.timeEnd);switch(e.status){case 0:if(e.offline)return Promise.reject(new yn(Z.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0,{time_range:s,byte_range:o}));var l=new yn(Z.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO,"Request failed with status 0.",0),c=!1;return this._resolvedURL!==r?c=!0:this._fallbackURLs.length&&this._resolvedURL===r&&(c=!0,this._resolvedURL=this._fallbackURLs.shift()),l.debug.has_fallback=c,c?(this._emitWarning(l,this.toLogJSON()),this.getBufferForFragment(a)):Promise.reject(l);case 200:case 206:var d=e.body;if(!d)return Promise.reject(new yn(Z.FRAGMENT_REQUEST_EMPTY_RESPONSE,"Empty response for successful buffer.",e.status,{time_range:s,byte_range:o}));if(d.byteLength!==i)return Promise.reject(new yn(Z.FRAGMENT_REQUEST_UNEXPECTED_LENGTH,"Received buffer of unexpected length.",e.status,{time_range:s,byte_range:o,received_length:d.byteLength,expected_length:i}));var u={audio:{profileId:this._profileId,bufferURL:r,byteStart:a.byteRanges.audio.start,byteEnd:a.byteRanges.audio.end,buffer:d,mimetype:this._audioCodec,bandwidth:8e3*d.byteLength/e.timing.completed}};if(a.cacheBufferSet&&d&&d.byteLength){a.bufferSet=u;var p=a.sliceInto;if(null==p?void 0:p.length){var f,h=Vn(p);try{for(h.s();!(f=h.n()).done;){var _=f.value,y=_.fragment;(null==y?void 0:y.cacheBufferSet)&&(y.bufferSet={audio:Object.assign(Object.assign({},u.audio),{buffer:d.slice(_.start,_.end),byteStart:y.byteRanges.audio.start,byteEnd:y.byteRanges.audio.end})})}}catch(g){h.e(g)}finally{h.f()}}}return this._abrManager.sample(d.byteLength,e.timing.completed),Promise.resolve(u);case 403:return this.resolve().then((function(){return t.getBufferForFragment(a)}));default:var m=!1;return this._resolvedURL!==r?m=!0:this._fallbackURLs.length&&this._resolvedURL===r&&(m=!0,this._resolvedURL=this._fallbackURLs.shift()),m?this.getBufferForFragment(a):Promise.reject(new yn(Z.FRAGMENT_REQUEST_FAILED_WITH_STATUS,"Buffer request failed with status ".concat(e.status),e.status,{time_range:s,byte_range:o}))}}},{key:"_getInitBuffer",value:function(){var e,t;if(!this._initFragment)throw new _t(Z.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return(null===(t=null===(e=this._initFragment.bufferSet)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.buffer.byteLength)?Promise.resolve(this._initFragment.bufferSet.audio.buffer):(this._initBufferPromise||(this._initBufferPromise=this.getBufferForFragment(this._initFragment).then((function(e){var t;if(!(null===(t=e.audio)||void 0===t?void 0:t.buffer.byteLength))throw new Error("Empty initialization segment buffer");return e.audio.buffer}))),this._initBufferPromise)}},{key:"_calculateFragments",value:function(e){var t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};for(var n=e.segments,r=e.timescale,a=n.length,o=new Array(a),i=0,s=0,l=0,c=a;l<c;l++){var d=n[l];if(null==d?void 0:d.length){var u=(0,Q.Z)(d,2),p=u[0],f=u[1],h=f/r,_={init:!1,cacheBufferSet:!l&&!this._disableCache,timeStart:i,timeEnd:i+h,byteRanges:{audio:{start:t,end:t+(p-1)}}};o[l]=_,t+=p,s+=f,i+=h,Math.floor(h)>this._segmentLength&&(this._segmentLength=Math.floor(h))}}o[o.length-1].isLastFragment=!0,this._fragments=o,this._duration=s/r}},{key:"_calculateFragmentsV1",value:function(e){var t=e.offset;this._initFragment={init:!0,cacheBufferSet:!this._disableCache,timeStart:0,timeEnd:0,byteRanges:{audio:{start:0,end:t-1}}};for(var n=e.references,r=e.timescale,a=n.length,o=new Array(a),i=0,s=0,l=0,c=a;l<c;l++){var d=n[l];if(d){var u=d.duration/r,p={init:!1,cacheBufferSet:!l&&!this._disableCache,timeStart:s,timeEnd:s+u,byteRanges:{audio:{start:t,end:t+(d.size-1)}}};o[l]=p,t+=d.size,i+=d.duration,s+=u,Math.floor(u)>this._segmentLength&&(this._segmentLength=Math.floor(u))}}o[o.length-1].isLastFragment=!0,this._fragments=o,this._duration=i/r}},{key:"_getManifest",value:function(e){if(this._noManifest)return e&&(e.manifestLatency=0),Promise.resolve(null);if(this._preloadedManifest)return e&&(e.manifestLatency=0),Promise.resolve(this._preloadedManifest);if(!this._fileId)throw new TypeError("Missing: fileId");var t=Date.now();return this._resolver.getManifest(this._fileId).then((function(n){return e&&(e.manifestLatency=Date.now()-t),n}))}},{key:"getHLSURL",value:function(){var e,t,n=this._resolvedURL,r=this._initFragment;if(!n||!r)throw new _t(Z.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");this.releaseHLSURL();var a={url:n,byteStart:null===(e=r.byteRanges.audio)||void 0===e?void 0:e.start,byteEnd:null===(t=r.byteRanges.audio)||void 0===t?void 0:t.end},o=this._fragments.map((function(e){var t,r;return{url:n,duration:e.timeEnd-e.timeStart,byteStart:null===(t=e.byteRanges.audio)||void 0===t?void 0:t.start,byteEnd:null===(r=e.byteRanges.audio)||void 0===r?void 0:r.end}})),i="undefined"==typeof MediaSource?Sn:kn;return this._hlsURL=i({assetID:this._fileId,targetDuration:10,map:a,segments:o}),this._hlsURL}},{key:"releaseHLSURL",value:function(){this._hlsURL&&URL.revokeObjectURL(this._hlsURL),this._hlsURL=null}},{key:"clearCachedBuffers",value:function(){this._headFragment&&delete this._headFragment,this._initFragment&&(this._initFragment.bufferSet=null),this._fragments[0]&&(this._fragments[0].bufferSet=null),this._lastFetchedBuffer=null}},{key:"getPlayableCodecs",value:function(){return[this._audioCodec]}},{key:"getFirstFragment",value:function(){var e;return null!==(e=this._fragments[0])&&void 0!==e?e:null}},{key:"getHeadFragment",value:function(){var e=this._initFragment,t=this._fragments[0];if(!(null==e?void 0:e.byteRanges.audio)||!(null==t?void 0:t.byteRanges.audio))throw new _t(Z.FILE_NOT_RESOLVED,"Cannot return HLS Manifest URL: File not resolved.");return this._headFragment||(this._headFragment={init:!0,cacheBufferSet:!0,timeStart:0,timeEnd:0,byteRanges:{audio:{start:e.byteRanges.audio.start,end:t.byteRanges.audio.end}},sliceInto:[{fragment:e,start:0,end:t.byteRanges.audio.start},{fragment:t,start:t.byteRanges.audio.start,end:void 0}]}),this._headFragment}},{key:"getFragmentAfterTime",value:function(e){var t,n;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(n=this._fragments[1])&&void 0!==n?n:null;var r,a=Vn(this._fragments);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.timeStart>e)return o}}catch(i){a.e(i)}finally{a.f()}return null}},{key:"getFragmentForTime",value:function(e){var t,n;if(!(null===(t=this._fragments)||void 0===t?void 0:t.length))return null;if(0===e||.01===e)return null!==(n=this._fragments[0])&&void 0!==n?n:null;var r,a=Vn(this._fragments);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.timeStart<=e&&o.timeEnd>=e)return o}}catch(i){a.e(i)}finally{a.f()}return null}},{key:"getBufferForFragment",value:function(e){var t,n=this;if(!e)return Promise.reject(new Error("FIXME: error type?"));if((null===(t=this._lastFetchedBuffer)||void 0===t?void 0:t.fragment)===e)return Promise.resolve(this._lastFetchedBuffer.bufferSet);if(e.bufferSet)return Promise.resolve(e.bufferSet);if(!this._resolvedURL)return Promise.reject(new _t(Z.FILE_NOT_RESOLVED,"Cannot fetch buffer: No resolved URL"));var r=e.byteRanges.audio,a="".concat(r.start,"-").concat(r.end),o=r.end+1-r.start,i=this._resolvedURL,s=e.init?Promise.resolve(null):this._getInitBuffer();return Promise.all([s,this._transport.request(i,{method:"GET",responseType:"arraybuffer",headers:{Range:"bytes=".concat(a)},timing:!0,metadata:{requestURL:i,fragment:e,byteRangeHeader:a,expectedLength:o},retry:{condition:function(e,t){if(0===e.status)return e.offline;var n=e.getStatusFamily();return n===t.CONNECTION_ERROR||n===t.SERVER_ERROR||!(n!==t.SUCCESS||!e.body)&&e.body.byteLength!==o}}}).then(this._parseFragmentResponse)]).then((function(t){var r=(0,Q.Z)(t,2),a=r[0],o=r[1];return a&&o.audio&&(o.audio.initBuffer=a),n._lastFetchedBuffer={fragment:e,bufferSet:o},o}))}},{key:"resolve",value:function(e){var t=this,n=this._fileId;if(this._bypassResolve)return e&&(e.resolveLatency=0),Promise.resolve({uri:this._resolvedURL,uris:[],protection:this._preloadedManifest||!this._noManifest?"cenc":void 0});if(!n)throw new TypeError("Missing: fileId is required to resolve content URL");clearTimeout(this._lastResolveToken);var r,a=function(){return t._lastResolveTimestamp=Date.now(),t._resolver.getCDNURL(n,t._fileFormat).then((function(n){return e&&(e.resolveLatency=Date.now()-t._lastResolveTimestamp),n}))},o=Date.now()-this._lastResolveTimestamp;return r=o<1001?new Promise((function(e,n){t._lastResolveToken=setTimeout((function(){a().then(e,n)}),1001-o)})):a(),r.then((function(e){t._resolvedURLs=[];var n,r=Vn(e.uris);try{for(r.s();!(n=r.n()).done;){var a=n.value.split("?")[0];t._resolvedURLs.push(a)}}catch(o){r.e(o)}finally{r.f()}return t._fallbackURLs=e.uris,t._resolvedURL=t._fallbackURLs.shift(),e})).catch((function(e){return e&&(e.track=t.toLogJSON()),Promise.reject(e)}))}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resolveLatency:0,manifestLatency:0};return this._loaded?(t.resolveLatency=0,t.manifestLatency=0,Promise.resolve(this)):Promise.all([this.resolve(t),this._getManifest(t)]).then((function(t){var n,r,a=(0,Q.Z)(t,2),o=a[0],i=a[1];if(e._loaded=!0,!o.protection||!i)return e;if(e._keySystem===it.INVALID_SPOTIFY_KEY)return e._protection=i.protection||"cenc",e._psshBox=new Uint8Array(0),e;var s=e._keySystemSettings.pssh_field.audio,l=Wn(s,i)?i[s]:null;if(!l&&"pssh_widevine"===s&&"pssh"in i&&(l=null!==(n=i.pssh)&&void 0!==n?n:null),!l)return(r=new _t(Z.FILE_FORMAT_NOT_SUPPORTED,"KeySystem does not support the file format.")).track=e.toLogJSON(),Promise.reject(r);if(e._protection=i.protection||"cenc",e._psshBox=e._parsePSSHBox(l),"segments"in i&&i.segments)e._calculateFragments(i);else{if(!("references"in i)||!i.references)return(r=new _t(Z.FILE_MALFORMED_SEEKTABLE,"Malformed seektable.")).track=e.toLogJSON(),Promise.reject(r);e._calculateFragmentsV1(i)}return e}))}},{key:"adaptToBandwidth",value:function(){return Promise.resolve(!1)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(gn);function zn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Qn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Xn=we.P.forTag("playback.media_buffer_manager");function Jn(e){if(!e)return"";var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n]?'="'.concat(e[n],'"'):"";t.push("".concat(n).concat(r))}return t.length?"; ".concat(t.join("; ")):""}var er=function(e){(0,p.Z)(n,e);var t=$n(n);function n(e){var r;(0,c.Z)(this,n),(r=t.call(this))._mediaSource=null,r._sourceBuffers={},r._currentInitSegments={},r._updateQueue=[],r._codecs=[],r._playId=0,r._lastBufferClearTime=Date.now(),r._customSourceBufferParams="";var a=e.codecs,o=e.customSourceBufferParams,i=e.disableBufferAbort;return r._codecs=a,r._customSourceBufferParams=Jn(o),r._disableBufferAbort=!!i,r._onSourceOpen=r._onSourceOpen.bind((0,u.Z)(r)),r._onSourceClose=r._onSourceClose.bind((0,u.Z)(r)),r.dequeueUpdates=r.dequeueUpdates.bind((0,u.Z)(r)),e.noInit||r._init(),r}return(0,d.Z)(n,[{key:"_init",value:function(){this._mediaSource=new MediaSource,this._mediaSource.addEventListener(ot.MEDIA_SOURCE_OPEN,this._onSourceOpen),this._mediaSource.addEventListener(ot.MEDIA_SOURCE_CLOSE,this._onSourceClose),this._sourceBuffers={},this._currentInitSegments={}}},{key:"_onSourceOpen",value:function(){var e;Xn.info("MediaSource opened.");var t=this._mediaSource;if(0===(null===(e=null==t?void 0:t.sourceBuffers)||void 0===e?void 0:e.length)&&"open"===(null==t?void 0:t.readyState)){Xn.info("Creating source buffers for codecs",this._codecs);var n,r=zn(this._codecs);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=t.addSourceBuffer(a+this._customSourceBufferParams);o.addEventListener(ot.SOURCE_BUFFER_UPDATE_END,this.dequeueUpdates),this._sourceBuffers[a]=o}}catch(i){r.e(i)}finally{r.f()}}this.dequeueUpdates(),this.emit(ot.BUFFER_SOURCE_OPEN,null)}},{key:"_onSourceClose",value:function(){Xn.info("MediaSource closed."),this._destroySourceBuffers(),this.emit(ot.BUFFER_SOURCE_CLOSE,null)}},{key:"_destroySourceBuffers",value:function(){var e=this._mediaSource;if(e){var t=e.sourceBuffers;if(t.length)for(var n=0,r=t.length;n<r;n++){var a=t[n];if(a){a.removeEventListener("updateend",this.dequeueUpdates);try{e.removeSourceBuffer(a),Xn.info("Removed source buffer")}catch(o){Xn.warn("Failed to remove sourcebuffer",o)}}}this._sourceBuffers={},this._currentInitSegments={}}}},{key:"_endUpdate",value:function(e){var t;this._isUpdating()?this._updateQueue.push(e):"open"===(null===(t=this._mediaSource)||void 0===t?void 0:t.readyState)&&(this._mediaSource.endOfStream(),e.resolve&&e.resolve(!0))}},{key:"_durationUpdate",value:function(e){this._isUpdating()?this._updateQueue.push(e):(this._mediaSource&&(this._mediaSource.duration=e.duration),e.resolve&&e.resolve(!0))}},{key:"_isUpdating",value:function(){if(!this._mediaSource)return!1;for(var e=this._mediaSource.sourceBuffers,t=0,n=e.length;t<n;t++){var r=e[t];if(r&&r.updating)return!0}return!1}},{key:"_appendUpdate",value:function(e){var t,n,r=this,a=this._sourceBuffers[e.codec];if(a&&!a.updating){var o=e.buffer;if(e.fragment.init&&this._currentInitSegments[e.codec]===e.profileId)return null===(t=e.resolve)||void 0===t||t.call(e,!0),void Promise.resolve().then(this.dequeueUpdates);if(e.initBuffer&&e.buffer&&this._currentInitSegments[e.codec]!==e.profileId){var i=new Uint8Array(e.initBuffer.byteLength+e.buffer.byteLength);i.set(new Uint8Array(e.initBuffer),0),i.set(new Uint8Array(e.buffer),e.initBuffer.byteLength),o=i.buffer}try{a.appendBuffer(o)}catch(c){var s=!1;return"QuotaExceededError"===c.name?(Xn.warn("Failed to append buffer: exceeded quota."),s=!0,this.emitSync(ot.BUFFER_QUOTA_EXCEEDED,null)):Xn.warn("Failed to append buffer",c),void new Promise((function(e){s?setTimeout(e,500):e()})).then((function(){r.emitSync(ot.FRAGMENT_APPENDED,e.fragment),r.dequeueUpdates()})).then((function(){e.init&&r._updateQueue.push(e)}))}this.emitSync(ot.FRAGMENT_APPENDED,e.fragment);var l=o.byteLength>e.buffer.byteLength;(e.fragment.init||l)&&(this._currentInitSegments[e.codec]=e.profileId),null===(n=e.resolve)||void 0===n||n.call(e,!0),l?Xn.info("Injected combined init segment and playable segment (".concat(e.codec,", ").concat(e.profileId,")")):e.init&&Xn.info("Injected individual init segment (".concat(e.codec,", ").concat(e.profileId,")"))}else this._updateQueue.push(e)}},{key:"_abortUpdate",value:function(e){var t;"fragment"in e&&this.emitSync(ot.FRAGMENT_APPENDED,e.fragment),null===(t=e.resolve)||void 0===t||t.call(e,!1),Promise.resolve().then(this.dequeueUpdates)}},{key:"dequeueUpdates",value:function(){var e=this._updateQueue.shift();e&&this.tryUpdate(e)}},{key:"tryUpdate",value:function(e){if(e.playId!==this._playId)return Xn.info("Try update dropped: playId has changed"),void this._abortUpdate(e);if(e.timestamp<this._lastBufferClearTime)return Xn.info("Try update dropped: update is older than the last clear"),void this._abortUpdate(e);var t=this._mediaSource;t&&"open"!==t.readyState&&"ended"!==t.readyState?this._updateQueue.push(e):"end"===e.type?this._endUpdate(e):"duration"===e.type?this._durationUpdate(e):"append"===e.type&&this._appendUpdate(e)}},{key:"appendBufferData",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now(),a=[];if(e.audio){var o=yt();this.tryUpdate({playId:n,timestamp:r,fragment:t,type:"append",profileId:e.audio.profileId,buffer:e.audio.buffer,initBuffer:e.audio.initBuffer,codec:e.audio.mimetype,init:!!t.init,resolve:o.resolve}),a.push(o.promise)}if(e.video){var i=yt();this.tryUpdate({playId:n,timestamp:r,fragment:t,type:"append",profileId:e.video.profileId,buffer:e.video.buffer,initBuffer:e.video.initBuffer,codec:e.video.mimetype,init:!!t.init,resolve:i.resolve}),a.push(i.promise)}return Promise.all(a)}},{key:"endOfStream",value:function(){this._mediaSource&&"ended"!==this._mediaSource.readyState&&this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"end"})}},{key:"abort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._lastBufferClearTime=Date.now(),this._disableBufferAbort)Xn.info("MediaSource abort skipped; action disabled.");else{var t=this._mediaSource;if(t)for(var n=t.sourceBuffers,r=0,a=n.length;r<a;r++){var o=n[r];if("open"===t.readyState&&o)try{o.abort();var i=o.buffered;if(e&&i.length){var s=i.start(0),l=i.end(i.length-1);o.remove(s,l),Xn.info("Cleared buffer range",s,l)}}catch(c){Xn.warn("MediaSourceManager.clear failed.",c)}}this._currentInitSegments={}}}},{key:"destroy",value:function(){var e=this._mediaSource;e&&(Xn.info("Source destroyed"),e.removeEventListener("sourceopen",this._onSourceOpen),e.removeEventListener("sourceclose",this._onSourceClose),this._destroySourceBuffers(),this._mediaSource=null)}},{key:"recreate",value:function(e){this.abort(),this.destroy(),this._codecs=e.codecs,this._customSourceBufferParams=Jn(e.customSourceBufferParams),this._init()}},{key:"setDuration",value:function(e){this.tryUpdate({playId:this._playId,timestamp:Date.now(),type:"duration",duration:e})}},{key:"getMediaSource",value:function(){return this._mediaSource}},{key:"setPlayId",value:function(e){this._playId=e}},{key:"getPlayId",value:function(){return this._playId}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var nr,rr=we.P.forTag("playback.content_buffer");function ar(){}!function(e){e[e.AUDIO=10]="AUDIO",e[e.VIDEO=20]="VIDEO"}(nr||(nr={}));var or,ir=function(e){(0,p.Z)(n,e);var t=tr(n);function n(e){var a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.Z)(this,n),(o=t.call(this))._appendingFragments=[],o._tracker=e;var l=s.customSourceBufferParams,d=s.noInit,p=s.disableBufferAbort;return o._mediaSourceManager=er.create({codecs:i,noInit:d,customSourceBufferParams:l,disableBufferAbort:p}),o._removeAppendingFragment=o._removeAppendingFragment.bind((0,u.Z)(o)),o._mediaSourceManager.on(ot.FRAGMENT_APPENDED,(function(e){var t=e.data;return o._removeAppendingFragment(t)})),o.proxyEmitAll(o._mediaSourceManager,(a={},(0,r.Z)(a,ot.BUFFER_SOURCE_OPEN,ot.BUFFER_SOURCE_OPEN),(0,r.Z)(a,ot.BUFFER_SOURCE_CLOSE,ot.BUFFER_SOURCE_CLOSE),(0,r.Z)(a,ot.BUFFER_QUOTA_EXCEEDED,ot.BUFFER_QUOTA_EXCEEDED),a)),o}return(0,d.Z)(n,[{key:"_trackBufferingProgress",value:function(e){e.audio&&e.audio.buffer&&this._tracker.trackBytesDownloaded(e.audio.buffer.byteLength),e.video&&e.video.buffer&&this._tracker.trackBytesDownloaded(e.video.buffer.byteLength)}},{key:"_checkStalling",value:function(e,t,n){var r,a,o,i=t.byteRanges.video?t.byteRanges.video.start:null!==(a=null===(r=t.byteRanges.audio)||void 0===r?void 0:r.start)&&void 0!==a?a:-1;e>9e3&&this.emit(ot.BUFFER_STALLED,{byteStart:i,timeStart:(o=t.timeStart,Math.ceil(1e3*o)),stallAmount:e-9e3,didTimeout:n})}},{key:"_removeAppendingFragment",value:function(e){if(e){var t=this._appendingFragments,n=t.indexOf(e);-1!==n&&t.splice(n,1)}}},{key:"dequeueUpdates",value:function(){this._mediaSourceManager.dequeueUpdates()}},{key:"appendFragment",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(-1!==this._appendingFragments.indexOf(t))return Promise.resolve([]);this._appendingFragments.push(t),this.emit(ot.BUFFERING_START,null);var a=Date.now(),o=this._mediaSourceManager.getPlayId(),i=e.toLogJSON();return e.getBufferForFragment(t).then((function(e){var i,s,l,c,d,u;return n._trackBufferingProgress(e),o!==n._mediaSourceManager.getPlayId()?(rr.info("Append fragment dropped: playId has changed."),[]):(r||n._checkStalling(Date.now()-a,t,!1),null!==(null===(i=e.audio)||void 0===i?void 0:i.bandwidth)&&n._tracker.trackBufferURL((null===(s=e.audio)||void 0===s?void 0:s.bufferURL)||"",{bandwidth:(null===(l=e.audio)||void 0===l?void 0:l.bandwidth)||0}),null!==(null===(c=e.video)||void 0===c?void 0:c.bandwidth)&&n._tracker.trackBufferURL((null===(d=e.video)||void 0===d?void 0:d.bufferURL)||"",{bandwidth:(null===(u=e.video)||void 0===u?void 0:u.bandwidth)||0}),n.emit(ot.BUFFERING_END,null),n._mediaSourceManager.appendBufferData(e,t,o,a))})).catch((function(e){return n._removeAppendingFragment(t),r||n._checkStalling(Date.now()-a,t,!0),n.emit(ot.BUFFER_APPEND_ERROR,{error:e,canPlayNext:!0,track:i}),Promise.reject(e)}))}},{key:"abort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._appendingFragments=[],this._mediaSourceManager.abort(e)}},{key:"getMediaSource",value:function(){return this._mediaSourceManager.getMediaSource()}},{key:"destroy",value:function(){this._mediaSourceManager.destroy()}},{key:"progress",value:function(e,t,n){var r=this._mediaSourceManager.getMediaSource();if(r){var a="video"===e.getMediaType()?nr.VIDEO:nr.AUDIO;if("open"===r.readyState||"ended"===r.readyState){var o,i=function(e,t){var n,r=null===(n=e.sourceBuffers[e.sourceBuffers.length-1])||void 0===n?void 0:n.buffered;if(r)for(var a,o,i=0;i<r.length;i++)if(a=r.start(i),o=r.end(i),a<=t&&t<=o)return{start:a,end:o};return null}(r,n);if(i){if(n+a>r.duration)return void("open"===r.readyState&&this._mediaSourceManager.endOfStream());var s=e.getFragmentLength();Math.ceil(n/s)>Math.floor(i.end/s)&&(o=e.getFragmentForTime(n))&&this.appendFragment(e,o,t).catch(ar);var l=Math.floor(i.end-n);if(l>a)return;var c=Math.min(e.getFragmentLength(),a-l);if(c<1)return;var d=Math.floor(i.end+c);(o=e.getFragmentForTime(d))?this.appendFragment(e,o,t).catch(ar):this._mediaSourceManager.endOfStream()}else if(o=e.getFragmentForTime(n)){if(this.appendFragment(e,o,t).catch(ar),o.timeEnd<n+5){var u=e.getFragmentAfterTime(o.timeStart);u?this.appendFragment(e,u,t).catch(ar):this._mediaSourceManager.endOfStream()}}else this._mediaSourceManager.endOfStream()}}}},{key:"recreate",value:function(e){this._appendingFragments=[],this._mediaSourceManager.recreate({codecs:e})}},{key:"setDuration",value:function(e){this._mediaSourceManager.setDuration(e)}},{key:"setPlayId",value:function(e){this._mediaSourceManager.setPlayId(e)}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new n(e,t,r)}}]),n}($.vp),sr=function(){function e(t){if((0,c.Z)(this,e),this._estimate=0,this._totalWeight=0,t<0)throw new TypeError("Halflife must be set to a positive value.");this._weightingDecrease=Math.exp(Math.log(.5)/t)}return(0,d.Z)(e,[{key:"sample",value:function(e,t){var n=Math.pow(this._weightingDecrease,e),r=t*(1-n)+n*this._estimate;isNaN(r)||(this._estimate=r,this._totalWeight+=t)}},{key:"getEstimate",value:function(){return this._estimate/1-Math.pow(this._weightingDecrease,this._totalWeight)}}]),e}(),lr=4e5,cr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;(0,c.Z)(this,e),this._totalBytes=0,this._overrideBitrate=0,this._currentBandwidth=t,this._short=new sr(2),this._long=new sr(5),this._init()}return(0,d.Z)(e,[{key:"_init",value:function(){if("undefined"!=typeof navigator){var e=navigator;e.connection&&e.connection.downlink&&(this._currentBandwidth=1e6*e.connection.downlink,this._onConnectionChange=this._onConnectionChange.bind(this),e.connection.addEventListener("change",this._onConnectionChange))}}},{key:"_onConnectionChange",value:function(e){var t=e.target.downlink||0;this._setBandwidth(t)}},{key:"_setBandwidth",value:function(e){this._currentBandwidth=1e6*e}},{key:"getBandwidthEstimate",value:function(){if(this._overrideBitrate)return this._overrideBitrate;if(this._totalBytes<128e3)return this._currentBandwidth;var e=this._short.getEstimate(),t=this._long.getEstimate();return Math.min(e,t)}},{key:"sample",value:function(e,t){if(!(e<16e3)){var n=t/1e3,r=8*e/n;this._totalBytes+=e,this._short.sample(n,r),this._long.sample(n,r)}}},{key:"overrideBitrate",value:function(e){this._overrideBitrate=e<=0?0:e}}]),e}();function dr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.SHOWING="showing",e.HIDDEN="hidden"}(or||(or={}));var pr=Array.prototype.slice,fr="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){return pr.call(e)};function hr(e,t){var n,r=dr(fr(e.getElementsByTagName(t)));try{for(r.s();!(n=r.n()).done;){var a=n.value;e.removeChild(a)}}catch(o){r.e(o)}finally{r.f()}}function _r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function gr(e){var t=e;return{id:t.id,text:t.text}}var vr="visible",br="hidden",Er=/^[A-Za-z]{2,4}([_-][A-Za-z]{4})?([_-]([A-Za-z]{2}|[0-9]{3}))?$/,wr=function(e){(0,p.Z)(n,e);var t=mr(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._isVisible=!1,r._player=null,r._crossOrigin=null,r._currentVideoContent=null,r._unsubscribers=[],r._displayedCues=[],r._deactivateListeners=!1,r._activeLanguage=void 0,r._preferredLanguage=e.language.toLowerCase(),e.deactivateListeners&&(r._deactivateListeners=!0),r._onEnter=r._onEnter.bind((0,u.Z)(r)),r._onExit=r._onExit.bind((0,u.Z)(r)),r._onLoadedMetadata=r._onLoadedMetadata.bind((0,u.Z)(r)),r.setPlayer(e.player),r}return(0,d.Z)(n,[{key:"_subscribeToCueEvents",value:function(e){var t,n=this,r=e.track;if(!r)throw new Error("No track");if(null===(t=r.cues)||void 0===t?void 0:t.length){r.mode=this._isVisible?or.SHOWING:or.HIDDEN,this._displayedCues=r.activeCues?Array.from(r.activeCues):[],this._emitDisplayedCues();for(var a=function(e){var t=r.cues[e];if(!t)return"continue";t.addEventListener("enter",n._onEnter),t.addEventListener("exit",n._onExit),n._unsubscribers.push((function(){t.removeEventListener("enter",n._onEnter),t.removeEventListener("exit",n._onExit)}))},o=0;o<r.cues.length;o++)a(o)}else{e.addEventListener("load",(function t(){n._subscribeToCueEvents(e),e.removeEventListener("load",t)}))}}},{key:"_unsubscribeFromCueEvents",value:function(){this._unsubscribers.forEach((function(e){return e()})),this._unsubscribers=[]}},{key:"_onEnter",value:function(e){var t=e.target;this._displayedCues.indexOf(t)>-1||(this._displayedCues.push(t),this._emitDisplayedCues())}},{key:"_onExit",value:function(e){var t=e.target,n=this._displayedCues.indexOf(t);n>-1&&(this._displayedCues.splice(n,1),this._emitDisplayedCues())}},{key:"_emitDisplayedCues",value:function(){this.emit(ot.PLAYER_DISPLAYED_CUES_CHANGED,{cues:this._displayedCues.map(gr)})}},{key:"_updateVisibleState",value:function(){var e,t,n=this;if(this._player){var r=this.getActiveLanguage();Array.from(null!==(t=null===(e=this._player)||void 0===e?void 0:e.querySelectorAll("track"))&&void 0!==t?t:[]).forEach((function(e){e.style.visibility=n._isVisible?vr:br}));for(var a=this._player.textTracks,o=0,i=a.length;o<i;o++){var s=a[o];s&&(s.mode=this._isVisible&&s.language.toLowerCase()===r?or.SHOWING:or.HIDDEN)}}}},{key:"_updateTextTracks",value:function(){var e=this._player;e&&(e.readyState>=1?this._onLoadedMetadata():this._currentVideoContent&&e.addEventListener(ot.MEDIA_LOADEDMETADATA,this._onLoadedMetadata))}},{key:"_onLoadedMetadata",value:function(){var e=this._player;if(e&&(hr(e,"track"),this._currentVideoContent)){e.crossOrigin="anonymous";var t,n=this._updateActiveLanguage(),r=_r(this._currentVideoContent.getSubtitles());try{for(r.s();!(t=r.n()).done;){var a=t.value,o=a.lang,i=a.url,s=o.toLowerCase()===n,l=document.createElement("track");l.label="".concat(o," subtitles"),l.kind="subtitles",l.srclang=o,l.src=i,l.default=s,l.style.visibility=this._isVisible?vr:br,e.appendChild(l),s&&!this._deactivateListeners&&this._subscribeToCueEvents(l)}}catch(c){r.e(c)}finally{r.f()}}}},{key:"_updateActiveLanguage",value:function(){if(this._player&&this._currentVideoContent){var e,t=this._currentVideoContent.getSubtitleLanguages(),n=this._preferredLanguage.split("-")[0],r=null,a=_r(t);try{for(a.s();!(e=a.n()).done;){var o=e.value.toLowerCase();if(o===this._preferredLanguage)return this._activeLanguage=o,this._activeLanguage;o.split("-")[0]===n&&null===r&&(r=o)}}catch(i){a.e(i)}finally{a.f()}return this._activeLanguage=null!=r?r:"en-us",this._activeLanguage}this._activeLanguage=void 0}},{key:"getActiveLanguage",value:function(){if(this._player&&this._currentVideoContent)return this._activeLanguage}},{key:"setVideoContent",value:function(e){this._unsubscribeFromCueEvents(),this._displayedCues=[],this._currentVideoContent=e,e||this.clear(),this._updateTextTracks()}},{key:"setPlayer",value:function(e){var t,n="VIDEO"===(null==e?void 0:e.tagName)?e:null;this._player!==n&&this.clear(),this._player=n||null,this._crossOrigin=null!==(t=null==n?void 0:n.crossOrigin)&&void 0!==t?t:null,this._updateTextTracks()}},{key:"getAvailableLanguages",value:function(){var e,t;return null!==(t=null===(e=this._currentVideoContent)||void 0===e?void 0:e.getSubtitleLanguages())&&void 0!==t?t:[]}},{key:"setLanguage",value:function(e){if(!e.length)throw new TypeError("Argument `code` must be a non-empty string. Hide subtitles using `hideSubtitles()`.");if(!Er.test(e))throw new TypeError("Argument `code` must be a valid BCP 47 formatted language code");this._preferredLanguage=e.toLowerCase(),this._updateTextTracks()}},{key:"hide",value:function(){this._isVisible=!1,this._updateVisibleState()}},{key:"show",value:function(){this._isVisible=!0,this._updateVisibleState()}},{key:"deactivateListeners",value:function(){this._deactivateListeners||this._player&&(this._deactivateListeners=!0,this._unsubscribeFromCueEvents())}},{key:"activateListeners",value:function(){this._deactivateListeners&&(this._deactivateListeners=!1,this._updateTextTracks())}},{key:"areListenersActivated",value:function(){return!this._deactivateListeners}},{key:"clear",value:function(){var e=this._player;e&&(this._unsubscribeFromCueEvents(),this._currentVideoContent=null,this._displayedCues=[],hr(e,"track"),e.removeEventListener(ot.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.crossOrigin=this._crossOrigin)}},{key:"visible",value:function(){return this._isVisible}}]),n}($.vp);var Sr=function(){function e(t){(0,c.Z)(this,e),this.bandwidthEstimator=t.bandwidthEstimator}return(0,d.Z)(e,[{key:"getSample",value:function(e,t){var n,r,a=this.bandwidthEstimator.getBandwidthEstimate(),o=function(e,t){for(var n=e.length,r=0;r<n;r++)if(e.start(r)<=t&&t<=e.end(r))return 1e3*(e.end(r)-t);return 0}(e.buffered,e.currentTime);if(t instanceof qn){var i=null===(r=null===(n=t.getFirstFragment())||void 0===n?void 0:n.bufferSet)||void 0===r?void 0:r.audio,s=null==i?void 0:i.bitrate;return{bandwidth:a,bufferAvailability:o,audio:{contentType:null==i?void 0:i.mimetype,bitrate:s}}}var l=t.getAudioProfile(),c=t.getVideoProfile(),d=t.getVideoProfiles(),u="getVideoPlaybackQuality"in e?e.getVideoPlaybackQuality():{creationTime:void 0,droppedVideoFrames:void 0,totalVideoFrames:void 0};return{bandwidth:a,bufferAvailability:o,video:{creationTime:u.creationTime,droppedVideoFrames:u.droppedVideoFrames,totalVideoFrames:u.totalVideoFrames,bitrate:null==c?void 0:c.video_bitrate,availableBitrates:d.map((function(e){return e.video_bitrate})),height:null==c?void 0:c.video_height,width:null==c?void 0:c.video_width,resolution:null==c?void 0:c.video_resolution,contentType:Un(null!=c?c:void 0)},audio:{bitrate:null==l?void 0:l.audio_bitrate,contentType:Un(null!=l?l:void 0)}}}}],[{key:"create",value:function(t){return new e(t)}}]),e}();function kr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pr,Tr=we.P.forTag("playback.audio_processor"),Ar=function(){function e(t){(0,c.Z)(this,e),this._player=null,this._audioContext=null,this._mediaElementSource=null,this._gainNode=null,this._nodes=[],this._audioContext=(null==t?void 0:t.audioContext)||("undefined"!=typeof AudioContext?new AudioContext:null),this._audioContext?(this._createSource(t.player),this._gainNode=this._audioContext.createGain(),this._applyNodes([this._gainNode].concat((0,le.Z)((null==t?void 0:t.nodes)||[])))):Tr.warn("The AudioContext is not supported. Any future operation related to `AudioProcessor` will be skipped.")}return(0,d.Z)(e,[{key:"_createSource",value:function(e){Tr.info("Creating new media element source"),this._audioContext&&(this._player=e,this._disconnectInput(),this._mediaElementSource=this._audioContext.createMediaElementSource(e)||null,this._connectInput(this._nodes))}},{key:"_disconnectNodes",value:function(e){Tr.info("Disconnecting the nodes",e);var t,n=kr(e);try{for(n.s();!(t=n.n()).done;){t.value.disconnect()}}catch(r){n.e(r)}finally{n.f()}}},{key:"_connectNodes",value:function(e){var t=e[0];if(!(e.length<2)&&t){var n=t;Tr.info("Connecting the nodes",e);for(var r=1;r<e.length;r++){var a=e[r];a&&(n.connect(a),n=a)}}}},{key:"_disconnectInput",value:function(){var e;Tr.info("Disconnecting the media element source"),null===(e=this._mediaElementSource)||void 0===e||e.disconnect()}},{key:"_connectInput",value:function(e){var t,n=e[0];n?(Tr.info("Connecting the media element source to first node",n),null===(t=this._mediaElementSource)||void 0===t||t.connect(n)):Tr.warn("Cannot connect the media element source")}},{key:"_connectOutput",value:function(e){var t=e[e.length-1];this._audioContext&&t&&(Tr.info("Connecting the last node to destination",t),t.connect(this._audioContext.destination))}},{key:"_applyNodes",value:function(e){Tr.info("Applying the audio nodes",e);var t=this._nodes;return this._disconnectNodes(t),this._connectNodes(e),this._disconnectInput(),this._connectInput(e),this._connectOutput(e),this._nodes=e,!0}},{key:"setPlayer",value:function(e){this._player!==e?this._createSource(e):Tr.info("The new player is the same as the current player")}},{key:"setAudioGain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._gainNode?(this._gainNode.gain.value=Math.pow(10,e/20),!0):(Tr.info("The default gain node is not available"),!1)}},{key:"getAudioContext",value:function(){return this._audioContext}},{key:"resume",value:function(){return this._audioContext&&"running"!==this._audioContext.state?this._audioContext.resume():Promise.resolve()}},{key:"suspend",value:function(){return this._audioContext&&"suspended"!==this._audioContext.state?this._audioContext.suspend():Promise.resolve()}},{key:"destroy",value:function(){var e;this._audioContext&&(null===(e=this._mediaElementSource)||void 0===e||e.connect(this._audioContext.destination)),this._nodes=[],this._player=null,this._audioContext=null,this._gainNode=null,this._mediaElementSource=null,Tr.info("The AudioProcessor is destroyed")}}],[{key:"create",value:function(t){return new e(t)}}]),e}();function Cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function Ir(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Or=we.P.forTag("playback.player"),Dr=/^blob:/,Nr=(Pr={},(0,r.Z)(Pr,lt.MP4,!0),(0,r.Z)(Pr,lt.MP4_DUAL,!0),(0,r.Z)(Pr,lt.MP4_CBCS,!0),(0,r.Z)(Pr,lt.MP4_FLAC,!0),(0,r.Z)(Pr,lt.MP3,!1),(0,r.Z)(Pr,lt.MANIFEST_ID,!1),Pr);function jr(e){return Math.ceil(1e3*e)}function Mr(e){return e/1e3}function xr(e){return document.createElement(e)}var Ur,Fr=function(e){(0,p.Z)(n,e);var t=Cr(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._cubicVolume=!1,r._player=null,r._emeManager=null,r._mediator=new $.vp,r._currentContent=null,r._upcomingContent=null,r._preloadingTracks={},r._playId=0,r._loaded=!1,r._licenseRequested=!1,r._playerActivated=!1,r._pauseToken=0,r._syntheticEndedToken=0,r._activeCodecs=[],r._playerVolume=1,r._playerSpeed=1,r._fatalOnNextError=!1,r._canPreloadEmitted=!1,r._lastTimeUpdatePostion=0,r._buffering=!1,r._preferredBitrate=0,r._disableLicensePrefetch=!1,r._allowMixedAVC1Codecs=!1,r._disableBufferingBeforeLicense=!1,r._audioProcessor=null,r._audioResolver=e.audioResolver,r._clearBufferOnSeek=!!e.clearBufferOnSeek,r._createPlayer=e.createPlayer||xr,r._cubicVolume=e.cubicVolume,r._disableCache=!!e.disableCache,r._licenseURLResolver=e.licenseURLResolver,r._newBufferPerTrack=!!e.newBufferPerTrack,r._newElementPerTrack=!!e.newElementPerTrack,r._newMediaKeysPerTrack=!!e.newMediaKeysPerTrack,r._rebufferOnQuotaExceeded=!!e.rebufferOnQuotaExceeded,r._disableLicensePrefetch=!!e.disableLicensePrefetch,r._synthesizeEnded=!!e.synthesizeEnded,r._tracker=e.tracker,r._transport=e.transport,r._videoPlayerContainer=e.videoPlayerContainer,r._audioPlayerContainer=e.audioPlayerContainer,r._allowMixedAVC1Codecs=e.allowMixedAVC1Codecs,r._videoResolver=e.videoResolver,r._abrManager=new cr,r._emeManager=e.disallowProtectedTracks?null:e.emeManager||null,r._disallowProfile=e.disallowProfile,r._disableBufferingBeforeLicense=!!e.disableBufferingBeforeLicense,r._cache=new ut.z6(e.trackCacheSize||2),r._subtitleManager=new wr({language:e.preferredSubtitleLanguage||navigator.language,player:r._player}),r._videoResolution=e.videoResolution,Or.info("Setting Player track cache to:",e.trackCacheSize||2),r._buffer=ir.create(r._tracker,void 0,{disableBufferAbort:!!e.disableBufferAbort,reinjectInitsOnAbort:!!e.reinjectInitsOnAbort,noInit:!0,customSourceBufferParams:e.customSourceBufferParams}),r._statistics=Sr.create({bandwidthEstimator:r._abrManager}),r._audioProcessorOptions=e.audioProcessorOptions,r._onCanPlay=r._onCanPlay.bind((0,u.Z)(r)),r._onCanPlayThrough=r._onCanPlayThrough.bind((0,u.Z)(r)),r._onTimeUpdate=r._onTimeUpdate.bind((0,u.Z)(r)),r._onDurationChange=r._onDurationChange.bind((0,u.Z)(r)),r._onPlay=r._onPlay.bind((0,u.Z)(r)),r._onPlaying=r._onPlaying.bind((0,u.Z)(r)),r._onPause=r._onPause.bind((0,u.Z)(r)),r._onSeeking=r._onSeeking.bind((0,u.Z)(r)),r._onEncrypted=r._onEncrypted.bind((0,u.Z)(r)),r._onEnded=r._onEnded.bind((0,u.Z)(r)),r._onError=r._onError.bind((0,u.Z)(r)),r._onRequiresDuration=r._onRequiresDuration.bind((0,u.Z)(r)),r._onQuotaExceeded=r._onQuotaExceeded.bind((0,u.Z)(r)),r._onLoadedMetadata=r._onLoadedMetadata.bind((0,u.Z)(r)),r._onWaiting=r._onWaiting.bind((0,u.Z)(r)),r._onFragmentFetched=r._onFragmentFetched.bind((0,u.Z)(r)),r._onProfileChanged=r._onProfileChanged.bind((0,u.Z)(r)),r._onPlayedThresholdReached=r._onPlayedThresholdReached.bind((0,u.Z)(r)),r._onSyntheticEnded=r._onSyntheticEnded.bind((0,u.Z)(r)),r._onLicenseRequestCapped=r._onLicenseRequestCapped.bind((0,u.Z)(r)),r._onLicenseRequestError=r._onLicenseRequestError.bind((0,u.Z)(r)),r._onNavigatorOffline=r._onNavigatorOffline.bind((0,u.Z)(r)),r._onBufferError=r._onBufferError.bind((0,u.Z)(r)),r._emitWarning=r._emitWarning.bind((0,u.Z)(r)),r._handleLoadingComplete=r._handleLoadingComplete.bind((0,u.Z)(r)),r._onRateChange=r._onRateChange.bind((0,u.Z)(r)),r._onVideoResize=r._onVideoResize.bind((0,u.Z)(r)),r._setAudioGain=r._setAudioGain.bind((0,u.Z)(r)),r._init(),r}return(0,d.Z)(n,[{key:"_init",value:function(){var e,t,n,a,o,i;(this._disableCache&&Or.info("Cache disabled."),this._transport.on(this._transport.EVENT_CONNECTION_OFFLINE,this._onNavigatorOffline),this.proxyEmitAllSync(this._tracker,(e={},(0,r.Z)(e,ot.TRACKER_TRACKING_DATA_CREATED,ot.PLAYER_TRACKING_DATA_CREATED),(0,r.Z)(e,ot.TRACKER_TRACKING_DATA_FINALIZED,ot.PLAYER_TRACKING_DATA_FINALIZED),(0,r.Z)(e,ot.TRACKER_PLAYBACK_START,ot.PLAYER_PLAYBACK_START),e)),this._tracker.on(ot.TRACKER_PLAYED_THRESHOLD_REACHED,this._onPlayedThresholdReached),this._emeManager)&&this._emeManager.addListeners((i={},(0,r.Z)(i,ot.EME_LICENSE_REQUEST_CAPPED,this._onLicenseRequestCapped),(0,r.Z)(i,ot.EME_LICENSE_REQUEST_ERROR,this._onLicenseRequestError),i));this._buffer.addListeners((t={},(0,r.Z)(t,ot.BUFFER_APPEND_ERROR,this._onBufferError),(0,r.Z)(t,ot.BUFFER_QUOTA_EXCEEDED,this._onQuotaExceeded),t)),this.proxyEmitAll(this._buffer,(0,r.Z)({},ot.BUFFER_STALLED,ot.PLAYER_BUFFER_STALLED)),this._mediator.addListeners((n={},(0,r.Z)(n,ct.FRAGMENT_FETCHED,this._onFragmentFetched),(0,r.Z)(n,ct.VIDEO_PROFILE_CHANGED,this._onProfileChanged),n)),this.proxyEmitAll(this._mediator,(a={},(0,r.Z)(a,ct.FRAGMENT_FETCH_ERROR,ot.PLAYER_FRAGMENT_FETCH_ERROR),(0,r.Z)(a,ct.SUBTITLE_LANGUAGES_LOADED,ot.PLAYER_SUBTITLE_LANGUAGES_LOADED),a)),this.proxyEmitSync(this._subtitleManager,ot.PLAYER_DISPLAYED_CUES_CHANGED,ot.PLAYER_DISPLAYED_CUES_CHANGED),this.proxyEmitAll(this._videoResolver,(o={},(0,r.Z)(o,ot.VIDEO_MANIFEST_RESOLVED,ot.PLAYER_VIDEO_MANIFEST_RESOLVED),(0,r.Z)(o,ot.VIDEO_MANIFEST_RESOLVE_FAILED,ot.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED),o))}},{key:"_onRateChange",value:function(){this._player&&(this._tracker.trackSpeedChanged(this._player.playbackRate),this.emit(ot.PLAYER_PLAYBACK_SPEED_CHANGED,{playback_speed:this._player.playbackRate}))}},{key:"_onLicenseRequestError",value:function(e){if(e.data.playId===this._playId){var t=this._currentContent;if(t){var n=e.data.error;n.shouldRefreshEndpoint&&this._licenseURLResolver.remove(t.getKeySystem(),t.getMediaType()),this._emitError(n,!n.unrecoverable,t.toLogJSON())}}}},{key:"_onFragmentFetched",value:function(e){var t=e.data;this._tracker.setBandwidth(t.bandwidth),this.emit(ot.PLAYER_FRAGMENT_FETCHED,t)}},{key:"_onProfileChanged",value:function(e){var t=e.data;this._tracker.setRenditionCount(t.profile.bitrate),this.emit(ot.PLAYER_VIDEO_PROFILE_CHANGED,t)}},{key:"_onLicenseRequestCapped",value:function(e){e.data.playId===this._playId&&(this._currentContent&&(this.pause(),this.emit(ot.PLAYER_CAPPED,null)))}},{key:"_shouldNextErrorBeFatal",value:function(){var e=this._currentContent;if(!e)return!1;if(e.isAd()||!e.isProtected())return!1;if(!this._player)return!1;var t=this._player.error;if(!(t&&t instanceof MediaError))return this._fatalOnNextError=!1,!1;switch(t.code){case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:case MediaError.MEDIA_ERR_DECODE:return!0;default:return!1}}},{key:"_onNavigatorOffline",value:function(){this._tracker.trackNavigatorOffline()}},{key:"_onBufferError",value:function(e){this._emitError(e.data.error,e.data.canPlayNext,e.data.track)}},{key:"_addPlayerEvents",value:function(e){e.addEventListener(ot.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.addEventListener(ot.MEDIA_PLAY,this._onPlay),e.addEventListener(ot.MEDIA_PLAYING,this._onPlaying),e.addEventListener(ot.MEDIA_PAUSE,this._onPause),e.addEventListener(ot.MEDIA_SEEKING,this._onSeeking),e.addEventListener(ot.MEDIA_ENCRYPTED,this._onEncrypted),e.addEventListener(ot.MEDIA_ENDED,this._onEnded),e.addEventListener(ot.MEDIA_ERROR,this._onError),e.addEventListener(ot.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.addEventListener(ot.MEDIA_DURATIONCHANGE,this._onDurationChange),e.addEventListener(ot.MEDIA_WAITING,this._onWaiting),e.addEventListener(ot.MEDIA_CANPLAY,this._onCanPlay),e.addEventListener(ot.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.addEventListener(ot.MEDIA_RATECHANGE,this._onRateChange),e.addEventListener(ot.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration),e.addEventListener(ot.MEDIA_RESIZE,this._onVideoResize)}},{key:"_removePlayerEvents",value:function(e){e.removeEventListener(ot.MEDIA_TIMEUPDATE,this._onTimeUpdate),e.removeEventListener(ot.MEDIA_PLAY,this._onPlay),e.removeEventListener(ot.MEDIA_PLAYING,this._onPlaying),e.removeEventListener(ot.MEDIA_PAUSE,this._onPause),e.removeEventListener(ot.MEDIA_SEEKING,this._onSeeking),e.removeEventListener(ot.MEDIA_ENCRYPTED,this._onEncrypted),e.removeEventListener(ot.MEDIA_ENDED,this._onEnded),e.removeEventListener(ot.MEDIA_ERROR,this._onError),e.removeEventListener(ot.MEDIA_WAITING,this._onWaiting),e.removeEventListener(ot.MEDIA_CANPLAY,this._onCanPlay),e.removeEventListener(ot.MEDIA_RATECHANGE,this._onRateChange),e.removeEventListener(ot.MEDIA_CANPLAYTHROUGH,this._onCanPlayThrough),e.removeEventListener(ot.MEDIA_LOADEDMETADATA,this._onLoadedMetadata),e.removeEventListener(ot.MEDIA_DURATIONCHANGE,this._onDurationChange),e.removeEventListener(ot.INTERNAL_MEDIA_REQUIRES_DURATION,this._onRequiresDuration),e.removeEventListener(ot.MEDIA_RESIZE,this._onVideoResize)}},{key:"_recreateMediaElement",value:function(e,t,n,r){if(t!==this._playId)return Or.info("Recreate player dropped: playId has changed."),Promise.resolve(!1);var a=this._player;if(a){if(!this._newElementPerTrack&&("AUDIO"!==a.tagName||"video"!==n)){var o,i=!0,s=Ir(e);try{for(s.s();!(o=s.n()).done;){var l=o.value;if('audio/mp2t;codecs="mp4a.40.2"'!==l&&!a.canPlayType(l)){i=!1;break}}}catch(f){s.e(f)}finally{s.f()}if(i)return Or.info("Reusing media element."),e.join(",")===this._activeCodecs.join(",")&&!this._newBufferPerTrack||r||(Or.info("Recreating buffer."),this._buffer.recreate(e),this._activeCodecs=e),this._resumeAudioProcessor(a),Promise.resolve(!0)}this._removePlayerEvents(a),a.pause(),this._emeManager&&this._emeManager.removeMediaKeys(a).catch((function(e){Or.warn("Failed to remove media keys.",e)})),this._player=null;var c=this._getContainerElement(this._videoPlayerContainer);c&&a.parentNode===c&&(c.removeChild(a),this.emit(ot.PLAYER_VIDEO_ELEMENT_REMOVED,null));var d=this._getContainerElement(this._audioPlayerContainer);d&&a.parentNode===d&&d.removeChild(a)}Or.info("Creating new media element.");var u=this._createPlayer(n),p=this._playerVolume;return u.volume=this._cubicVolume?p*p*p:p,u.autoplay=!1,u.loop=!1,"playsInline"in u&&(u.playsInline=!0),this._resumeAudioProcessor(u),this._player=u,this._subtitleManager.setPlayer(u),this._playerActivated=!1,this._addPlayerEvents(u),r||this._buffer.recreate(e),this._activeCodecs=e,Promise.resolve(!0)}},{key:"_getContainerElement",value:function(e){return"string"==typeof e?document.querySelector(e):e||null}},{key:"_onVideoResize",value:function(){if(this._player instanceof HTMLVideoElement){var e=this._player,t=e.videoWidth,n=e.videoHeight;this.emit(ot.PLAYER_VIDEO_RESIZED,{width:t,height:n})}}},{key:"_onDurationChange",value:function(){var e=this,t=this._playId,n=function(){if(e._player)if(t===e._playId){var n=jr(e._player.duration),r=jr(e._player.currentTime);e._tracker.setActualDuration(n),e.emit(ot.PLAYER_DURATION_CHANGED,{timestamp:Date.now(),position:r,duration:n})}else Or.info("Duration changed drop: playId has changed.")};this._loaded?n():this.once(ot.PLAYER_LOAD,n)}},{key:"_onPlay",value:function(){var e;if(this._player&&this._currentContent){var t=jr(this._player.currentTime);this._tracker.trackPlay(t,this._player.playbackRate),this.emit(ot.PLAYER_PLAY,{timestamp:Date.now(),position:t,logData:null!==(e=this._currentContent.getLogData())&&void 0!==e?e:null})}}},{key:"_onPlaying",value:function(){if(this._player){this._playerActivated=!0;var e=this._currentContent,t=jr(this._player.currentTime);this._tracker.trackPlaying(t),this.emit(ot.PLAYER_PLAYING,{timestamp:Date.now(),position:t,logData:e?e.getLogData():null})}}},{key:"_onPause",value:function(){var e=this;if(this._player){var t=jr(this._player.currentTime);this._tracker.trackPaused(t);var n=this._currentContent?this._currentContent.getLogData():null;this._pauseToken=setTimeout((function(){clearTimeout(e._syntheticEndedToken),e.emit(ot.PLAYER_PAUSED,{position:t,logData:n})}),10)}}},{key:"_onSeeking",value:function(){this.emit(ot.PLAYER_SEEKING,null),this._buffer.abort(this._clearBufferOnSeek),this._lastTimeUpdatePostion=0,this._onTimeUpdate()}},{key:"_onRequiresDuration",value:function(){this._currentContent&&this._currentContent.isProtected()&&this._player&&(this._player.duration=this._currentContent.getCalculatedDuration())}},{key:"_onQuotaExceeded",value:function(){this._player&&this._rebufferOnQuotaExceeded&&(Or.info("Exceeded quota: rebuffering current track."),this._buffer.abort(!0),this._player.currentTime=this._player.currentTime,this._onTimeUpdate())}},{key:"_onEncrypted",value:function(e){Or.info("Got Encrypted event"),this._currentContent&&this.emitSync(ot.INTERNAL_ENCRYPTED,{initData:e.initData,fromPolyfill:!!e.fromPolyfill})}},{key:"_onEnded",value:function(){!this._currentContent||this._synthesizeEnded&&this._currentContent.isProtected()||(Or.info("Native ended emitted."),this._emitEnded())}},{key:"_onSyntheticEnded",value:function(){this._synthesizeEnded&&this._currentContent&&this._currentContent.isProtected()&&(Or.info("Synthetic ended emitted."),this._emitEnded())}},{key:"_onError",value:function(){if(this._player){var e,t,n,r,a=this._player.error,o=!1,i=this._currentContent,s=!1;i&&(o=i.isProtected(),e=i.toLogJSON(),s=i.isAd(),i.clearCachedBuffers());var l=!0,c=!i||s||!this._fatalOnNextError,d=a&&a.msExtendedCode?"0x".concat((a.msExtendedCode>>>0).toString(16).toUpperCase()):null,u="data:".concat((null==e?void 0:e.fileId)||"unknown");if(a instanceof MediaError){switch(a.code){case MediaError.MEDIA_ERR_ABORTED:t=Z.MEDIA_ABORTED,n="Media aborted.";break;case MediaError.MEDIA_ERR_NETWORK:t=Z.MEDIA_NETWORK_ERROR,n="Network error.";break;case MediaError.MEDIA_ERR_DECODE:t=Z.MEDIA_DECODING_ERROR,n="Media decoding error.",l=c;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:t=Z.MEDIA_NOT_SUPPORTED,n="Media not supported.",l=c;break;default:t=Z.PLAYER_MEDIA_ERROR,n="Media error.",r=!0}var p=a.message||d||u||a.toString();n+=" (".concat(p,")")}else t=Z.PLAYER_PLAYBACK_ERROR,n="Error message undefined",r=!0;this._buffer.abort(!0);var f=new ft(t,n);l||(f.unrecoverable=!0),f.listPlayerIgnore=s,f.debug.src_url=u,f.debug.protected=o,f.debug.extendedCode=d,f.debug.rawExCode=a&&a.msExtendedCode||null,r&&a&&(f.debug.nativeCode=a.code||null,f.debug.errorData=a),this._emitError(f,l,e)}}},{key:"_onLoadedMetadata",value:function(){this.emitSync(ot.INTERNAL_PLAYER_LOADED_METADATA,null)}},{key:"_onCanPlay",value:function(){this._buffering=!1,this.emitSync(ot.INTERNAL_PLAYER_CANPLAY,null),this.emit(ot.PLAYER_FIRST_BYTES,null)}},{key:"_onCanPlayThrough",value:function(){this.emitSync(ot.INTERNAL_PLAYER_CANPLAYTHROUGH,null)}},{key:"_onWaiting",value:function(){var e=this;clearTimeout(this._syntheticEndedToken);var t=this._player;if(t&&this._currentContent){var n=t.seeking;this._buffering=!0;var r=this._currentContent.canLowerBitrate(),a=this._tracker;this.emit(ot.PLAYER_BUFFERING_START,Object.assign({position:jr(t.currentTime),msPlayed:this._tracker.getMSPlayed(),canLowerBitrate:r,seeking:n},a.getStallsInformation())),this._getBufferingLatency().then((function(o){n||e._tracker.trackMsStalled(o),e.emit(ot.PLAYER_BUFFERING_END,Object.assign({position:jr(t.currentTime),msPlayed:e._tracker.getMSPlayed(),canLowerBitrate:r,msStalled:o,seeking:n},a.getStallsInformation()))}))}}},{key:"_onPlayedThresholdReached",value:function(e){this._currentContent&&this._player&&this.emit(ot.PLAYER_PLAYED_THRESHOLD_REACHED,{played:e.data.played,threshold:e.data.threshold,position:jr(this._player.currentTime)})}},{key:"_emitEnded",value:function(){this._currentContent&&"video"===this._currentContent.getMediaType()&&this.emit(ot.PLAYER_ENDED_VIDEO,null),clearTimeout(this._pauseToken),this.emit(ot.PLAYER_ENDED,null)}},{key:"_emitError",value:function(e,t,n){Or.error("Player Error",e,n,t),this._tracker.setHadError(!0),!this._disableCache&&n&&n.fileId&&this._cache.remove(n.fileId),this.emit(ot.PLAYER_ERROR,{playId:this._playId,error:e,track:n,canPlayNext:t,position:this._player?jr(this._player.currentTime):0})}},{key:"_emitWarning",value:function(e,t){Or.error("Player Warning",e,t,!0),this._tracker.trackWarning(),this.emit(ot.PLAYER_WARNING,{playId:this._playId,error:e,track:t,canPlayNext:!0,position:this._player?jr(this._player.currentTime):0})}},{key:"_prepareMediaElement",value:function(e,t){var n=this;return t===this._playId&&this._upcomingContent?this._recreateMediaElement(this._upcomingContent.getPlayableCodecs(),t,this._upcomingContent.getMediaType(),this._upcomingContent.getKeySystem()===it.FAIRPLAY).then((function(r){var a;if(!r||t!==n._playId)return Or.info("Loading content dropped after recreate: playId has changed."),Promise.resolve(!1);n._player.playbackRate=(null===(a=n._loadingOptions)||void 0===a?void 0:a.useDefaultPlaybackSpeed)?1:n._playerSpeed;var o=n._player;return"VIDEO"===(null==o?void 0:o.tagName)&&(e.poster?o.poster=e.poster:o.removeAttribute("poster")),o&&n._upcomingContent&&n._upcomingContent.isProtected()&&n._emeManager&&(!o.mediaKeys||o.mediaKeys.shouldRefreshPerTrack||n._newMediaKeysPerTrack)?(Or.info("Creating media keys"),n._emeManager.createMediaKeys(o).then((function(){return!0})).catch((function(e){return e.unrecoverable=!0,n._emitError(e,!1,n._upcomingContent?n._upcomingContent.toLogJSON():void 0),Promise.reject(e)}))):Promise.resolve(!0)})):(Or.info("Loading content dropped: playId has changed."),Promise.resolve(!1))}},{key:"_handleLoadingComplete",value:function(e){var t=this._currentContent&&this._currentContent.getMediaType(),n=this._getContainerElement("video"===t?this._videoPlayerContainer:this._audioPlayerContainer);return n&&this._player&&this._player.parentNode!==n&&(n.appendChild(this._player),"video"===t&&this.emit(ot.PLAYER_VIDEO_ELEMENT_APPENDED,null)),this._upcomingContent=null,e}},{key:"_handleLoadingError",value:function(e,t,n,r){if(this._upcomingContent=null,n!==this._playId)return Promise.resolve(!1);if(this._tracker.trackLoadFailed(),this.emit(ot.PLAYER_LOADING_FAILED,{uri:e,logData:t.logData}),r){var a=r.track||{uri:e,fileId:t.fileId,format:t.format,deviceId:t.logData.deviceId};this._emitError(r,"StorageError"!==r.name||!!r.canPlayNext,a)}return Promise.reject(r)}},{key:"_handleLoadedMetadata",value:function(e,t,n){var r=this;if(e===this._playId){this._loaded=!0;var a=this._player;if(a){this._buffer.dequeueUpdates();var o=n.position>a.duration?0:n.position;this._lastTimeUpdatePostion=0,a.currentTime<o&&(Or.info("Resetting initial position after metadata."),a.currentTime=o),this._tracker.trackLoadDone(jr(a.currentTime)),this.emitSync(ot.PLAYER_LOAD,{autoplay:n.autoplay,position:jr(o),logData:t}),Promise.resolve().then((function(){r._onTimeUpdate()}));var i=function(){a.currentTime<o&&(Or.info("Resetting initial position after playable."),a.currentTime=o)};n.autoplay&&!a.error&&(i=function(){(a.currentTime<o&&(Or.info("Resetting initial position after playable."),a.currentTime=o),r._playId===e)?new Promise((function(e){return e(r._player&&r._player.play())})).catch((function(e){if(e){if("NotSupportedError"===e.name)return Promise.reject(e);if("NotAllowedError"===e.name)return r.emit(ot.PLAYER_AUTOPLAY_FAILED,null),Promise.reject(e)}return r._player?r._player.play():Promise.resolve()})).catch((function(){r._onPause()})):Or.info("Play trigger dropped; different playId")}),a.readyState>2?(Or.info("Ready to play, triggering play."),i()):(Or.info("Waiting to be playable."),this.once(ot.INTERNAL_PLAYER_CANPLAY,i))}}else Or.info("LoadedMetadata operations dropped: playId has changed.")}},{key:"_handleCanPlayThrough",value:function(e){e===this._playId?this._tracker.trackCanPlayThrough():Or.info("CanPlayThrough operations dropped: playId has changed.")}},{key:"_loadContent",value:function(e,t){var n=this;if(t!==this._playId||!this._upcomingContent)return Or.info("Loading content dropped: playId has changed."),Promise.resolve(!1);if(!this._player)throw new ft(Z.PLAYER_INVALID_INTERNAL_STATE,"Cannot load content without an HTMLMediaElement");this._canPreloadEmitted=!1;var r=this._upcomingContent;this._upcomingContent=null,this._currentContent=r,this._setAudioGain(r),this._subtitleManager.setVideoContent(r instanceof Yn?r:null);var a=e.callback;a&&this.once(ot.PLAYER_LOAD,(function(){n._playId&&t===n._playId?a():Or.info("Load content event dropped: playId has changed.")})),this.once(ot.INTERNAL_PLAYER_LOADED_METADATA,this._handleLoadedMetadata.bind(this,t,this._currentContent.getLogData(),e)),this.once(ot.INTERNAL_PLAYER_CANPLAYTHROUGH,this._handleCanPlayThrough.bind(this,t));var o=e.position,i=r.getCalculatedDuration();i&&o>i&&(o=e.position=0);try{this._player.currentTime=o}catch(l){Or.warn("Cannot set initial position before loading.",l)}var s=r.isProtected();return this._tracker.setProtected(s),r.getKeySystem()===it.FAIRPLAY?r instanceof qn&&!s?Promise.resolve(this._loadUnprotectedTrack()):Promise.resolve(this._loadHLSProtectedTrack(e,t)):r instanceof Yn?this._loadVideoTrack(e,t):s?this._loadProtectedTrack(e,t):Promise.resolve(this._loadUnprotectedTrack())}},{key:"_getBufferingLatency",value:function(){var e=this;return new Promise((function(t){if(e._player){var n=Date.now();e._player.addEventListener("canplaythrough",(function e(){this.removeEventListener("canplaythrough",e),t(Date.now()-n)}))}else t(0)}))}},{key:"_loadVideoTrack",value:function(e,t){var n=this;if(!(this._player&&this._currentContent&&this._currentContent instanceof Yn))return Promise.resolve(!1);var r=this._currentContent;Or.info("_loadVideoTrack");var a=function(){n._currentContent&&n._currentContent.isProtected()&&n._requestLicense(t).then((function(){n._playId===t&&(n._licenseRequested=!0,n._disableBufferingBeforeLicense&&n._onTimeUpdate())}))};this._disableLicensePrefetch?this.once(ot.INTERNAL_ENCRYPTED,a):this._buffer.once(ot.BUFFER_SOURCE_OPEN,a),this._player.src=URL.createObjectURL(this._buffer.getMediaSource());var o=r.getVideoProfile(),i=r.getAudioProfile();return i||o?(this._tracker.trackVideoLoadStart({bitrate:null==o?void 0:o.video_bitrate,audioProfile:null!=i?i:void 0,videoProfile:null!=o?o:void 0}),this._tracker.trackBufferLoadStart(),this._buffer.appendFragment(r,r.getInitFragment()).then((function(){return n._buffer.setDuration(r.getCalculatedDuration())})).then(this._onAppendedHeadSegment(t))):Promise.resolve(!1)}},{key:"_loadHLSProtectedTrack",value:function(e,t){var n=this;if(Or.info("Load HLS Protected Track"),!this._player||!this._currentContent)return!1;var r=this._currentContent.getResolvedURL();if(!r)throw new _t(Z.FILE_NOT_RESOLVED,"Cannot load HLS protected track: File not resolved.");this.on(ot.INTERNAL_ENCRYPTED,(function e(r){r.data.fromPolyfill&&(n.removeListener(ot.INTERNAL_ENCRYPTED,e),n._requestLicense(t,{initData:r.data.initData}))}));var a=this._currentContent;if(a instanceof Yn){var o=a.getVideoProfile(),i=a.getAudioProfile();this._tracker.trackVideoLoadStart({bitrate:null==o?void 0:o.video_bitrate,audioProfile:null!=i?i:void 0,videoProfile:null!=o?o:void 0})}this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(r,{bandwidth:0});var s=document.createElement("source");return s.src=this._currentContent.getHLSURL(),s.type=vn,this._player.appendChild(s),this._player.load(),!0}},{key:"_loadUnprotectedTrack",value:function(){if(!this._player||!this._currentContent)return!1;var e=this._currentContent.getResolvedURL();return!!e&&(Or.info("_loadUnprotectedTrack",this._currentContent.getURI()),this._tracker.trackBufferLoadStart(),this._tracker.trackBufferURL(e,{bandwidth:0}),this._player.src=e,this._player.load(),!0)}},{key:"_onAppendedHeadSegment",value:function(e){var t=this;return function(){return e===t._playId&&(t._player&&t._player.spload&&t._player.spload(),Or.info("Head segment appended."),!0)}}},{key:"_loadProtectedTrack",value:function(e,t){var n=this;if(!(this._currentContent&&this._player&&this._currentContent instanceof qn))return Promise.resolve(!1);var r=this._currentContent;Or.info("_loadProtectedTrack",r.getURI());var a=function(){return n._requestLicense(t).then((function(){n._playId===t&&(n._licenseRequested=!0,n._disableBufferingBeforeLicense&&n._onTimeUpdate())}))};this._disableLicensePrefetch?this.once(ot.INTERNAL_ENCRYPTED,a):this._buffer.once(ot.BUFFER_SOURCE_OPEN,a),this._player.src=URL.createObjectURL(this._buffer.getMediaSource()),this._tracker.trackBufferLoadStart();var o=r.getFragmentForTime(e.position),i=null;return o===r.getFirstFragment()?(Or.info("Appending combined init and playable fragment."),i=this._buffer.appendFragment(r,r.getHeadFragment())):(Or.info("Appending split init and playable fragment."),i=this._buffer.appendFragment(r,o)),i.then(this._onAppendedHeadSegment(t)).then((function(){return Promise.resolve(t===n._playId)}))}},{key:"_requestLicense",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this._playId){var r="Request license dropped: playId has changed.";return Or.info(r),Promise.resolve(!1)}if(!this._player||!this._currentContent||!this._emeManager)return Promise.resolve(!1);var a,o=Date.now(),i=this._player.mediaKeys,s=this._currentContent,l=s.getFileId(),c=s.getLogData(),d=s.toLogJSON(),u=s.getKeySystem(),p=s.getLicenseEndpoint();if(p)a=Promise.resolve(p);else{if(!l)return Promise.reject(new TypeError("Missing: fileId or licenseEndpoint"));a=this._licenseURLResolver.get(u,s.getMediaType()).then((function(e){return e.replace(/\{contentId\}/,l)}))}var f=this._emeManager,h=this._tracker;return h.setKeySystem(u),h.setKeySystemImpl(f.getKeySystemImpl()),Promise.all([a,s.getInitParams()]).then((function(t){var r=(0,Q.Z)(t,2),a=r[0],s=r[1];h.setLicenseSessionLatency(Date.now()-o);var l=s.initDataType,c=n.initData||s.initData;if(i&&c&&l){var d=Object.assign(Object.assign({},s),{playId:e,initData:c,mediaKeys:i,licenseServer:a,initDataType:l});return f.createSessionWithParams(d)}return Promise.resolve(!1)})).then((function(n){if(e!==t._playId)return Or.info("License tracking dropped: playId has changed."),Promise.resolve(!1);"boolean"!=typeof n&&"elapsed"in n&&(h.setLicenseGenerationLatency(n.elapsed.generate),h.setLicenseRequestLatency(n.elapsed.request),h.setLicenseUpdateLatency(n.elapsed.update));var r=Date.now()-o;return h.setKeyLatency(r),t.emit(ot.PLAYER_KEY_RECEIVED,{requestTime:r,logData:c}),Or.info("License updated."),Promise.resolve(!0)})).catch((function(n){if(!n||e!==t._playId)return Promise.resolve(!1);var r=!n||!("canPlayNext"in n)||n.canPlayNext;return t._emitError(n,r,d),Promise.reject(n)}))}},{key:"_onTimeUpdate",value:function(){var e;if(this._loaded&&(null===(e=this._player)||void 0===e?void 0:e.readyState)&&this._currentContent){var t=this._currentContent,n=this._player.seeking,r=this._player.currentTime,a="video"===t.getMediaType();if(t.isProtected()&&this._disableBufferingBeforeLicense&&!this._licenseRequested)Or.log("Dropping time update event: buffering before license disabled.");else if(n||!this._lastTimeUpdatePostion||this._lastTimeUpdatePostion!==r){this._lastTimeUpdatePostion=n?0:r,t.getKeySystem()!==it.FAIRPLAY&&(a||t.isProtected())&&this._buffer.progress(t,n,r);var o=this._player.duration,i=jr(r),s=t.getLogData();n?(this._tracker.trackPositionChanged(i),this.emit(ot.PLAYER_POSITION_CHANGED,{position:i,logData:s})):(this._tracker.trackProgress(i,"getCurrentBitrate"in t?t.getCurrentBitrate():0),this.emit(ot.PLAYER_PROGRESS,{timestamp:Date.now(),position:i,played:this._tracker.getMSPlayed(),interval:500,logData:s})),!this._canPreloadEmitted&&o-r<=10?(this._canPreloadEmitted=!0,this.emit(ot.PLAYER_CAN_PRELOAD,null)):this._canPreloadEmitted=!1,clearTimeout(this._syntheticEndedToken),this._synthesizeEnded&&t.isProtected()&&this._isPlaying()&&(this._syntheticEndedToken=setTimeout(this._onSyntheticEnded,jr(o-r)))}else Or.warn("Dropping duplicate time update.")}}},{key:"_isPlaying",value:function(){return!!this._player&&!this._player.paused}},{key:"_createAudioContent",value:function(e,t){var n=this,r={manifestLatency:0,resolveLatency:0};return(this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve({keySystem:it.INVALID_SPOTIFY_KEY})).then((function(a){return qn.create({abrManager:n._abrManager,mediator:n._mediator,keySystem:a.keySystem,licenseEndpoint:t.licenseEndpoint,transport:n._transport,resolver:n._audioResolver,uri:e,fileId:t.fileId,fileFormat:t.fileFormat,format:t.format,isAd:t.isAd,resolvedURL:t.resolvedURL,noManifest:t.noManifest,preloadedManifest:t.preloadedManifest,logData:t.logData,disableCache:n._disableCache,emitWarning:n._emitWarning,audioGain:t.audioGain}).load(r)})).then((function(e){var a=n._tracker;return a.setResolveLatency(r.resolveLatency),a.setManifestLatency(r.manifestLatency),e.isProtected()&&t.fileId&&!n._disableCache&&n._cache.set(t.fileId,e),e}))}},{key:"_createVideoContent",value:function(e,t){var n=this,r={manifestLatency:0,resolveLatency:0},a=t.fileId;return(this._emeManager?this._emeManager.getKeySystemInfo():this.getMediaConfig().then((function(e){return{keySystem:it.INVALID_SPOTIFY_KEY,audioFormats:e.formatsInfo.audio,videoFormats:e.formatsInfo.video}}))).then((function(o){return Yn.create({uri:e,abrManager:n._abrManager,mediator:n._mediator,resolver:n._videoResolver,keySystem:o.keySystem,licenseEndpoint:t.licenseEndpoint,fileId:a,noAuth:t.noAuth,format:lt.MANIFEST_ID,isAd:t.isAd,transport:n._transport,videoFormats:o.videoFormats,videoResolution:n._videoResolution,audioFormats:o.audioFormats,disableCache:n._disableCache,disallowProfile:n._disallowProfile,allowMixedAVC1Codecs:n._allowMixedAVC1Codecs,audioGain:t.audioGain}).load(r)})).then((function(e){var t=n._tracker;return t.setResolveLatency(r.resolveLatency),t.setManifestLatency(r.manifestLatency),e.isProtected()&&a&&!n._disableCache&&n._cache.set(a,e),e}))}},{key:"_preinitMediaElement",value:function(){var e=this;return this._player||!this._emeManager?Promise.resolve(this):this._emeManager.getKeySystemInfo().then((function(t){var n,r,a=[];return(null===(n=t.audioFormats)||void 0===n?void 0:n[0])&&a.push(t.audioFormats[0].contentType),(null===(r=t.videoFormats)||void 0===r?void 0:r[0])&&a.push(t.videoFormats[0].contentType),!!a.length&&e._recreateMediaElement(a,e._playId,a.length>1?"video":"audio",t.keySystem!==it.FAIRPLAY)})).then((function(){return e}),(function(t){return Or.warn("Cannot precreate media element:",null==t?void 0:t.message),e}))}},{key:"_resumeAudioProcessor",value:function(e){var t;return!e||(null===(t=this._audioProcessorOptions)||void 0===t?void 0:t.disable)?Promise.resolve():(this._audioProcessor||(this._audioProcessor=Ar.create(Object.assign(Object.assign({},this._audioProcessorOptions),{player:e}))),this._player!==e&&this._audioProcessor.setPlayer(e),this._audioProcessor.resume())}},{key:"_setAudioGain",value:function(e){var t;null===(t=this._audioProcessor)||void 0===t||t.setAudioGain(e.getAudioGain())}},{key:"getCodecInfo",value:function(){return{audiocodec:"mp3",bitrate:160}}},{key:"getMediaSource",value:function(){return this._buffer.getMediaSource()}},{key:"load",value:function(e,t,n){var r,a=this,o=function(e,t){return t&&t.hasOwnProperty(e)}(t.uriProperty,e)?t.uriProperty:"uri",i=e[o];if(Or.info("load",i),!i)return Promise.reject(new ft(Z.PLAYER_CANNOT_FIND_PLAYABLE_URI,"Cannot find a playable URI."));if(!e.logData)return Promise.reject(new Error("Invalid track: logging info not specified"));this.stop(e.logData,e.mediaType),this._loaded=!1,this._licenseRequested=!1,this._buffering=!0,this._currentContent=null,this._subtitleManager.setVideoContent(null);var s,l=++this._playId,c=this._tracker;c.trackLoadStart(i,e.fileId,l.toString(),e.logData,e.metadata),this.emit(ot.PLAYER_BEFORE_LOAD,{track:e,options:t,logData:e.logData,uri:i,timestamp:Date.now()}),this._buffer.setPlayId(l),this._loadingOptions={position:Mr(t.position||0),autoplay:!("autoplay"in t)||t.autoplay,poster:e.poster,useDefaultPlaybackSpeed:!!(null===(r=e.options)||void 0===r?void 0:r.useDefaultPlaybackSpeed),callback:n},c.setPlayIntended(this._loadingOptions.autoplay),c.setPlayedThreshold(t.playedThreshold);var d=this._cache,u="video"===e.mediaType?this._createVideoContent.bind(this,i,e):this._createAudioContent.bind(this,i,e,l);if(e.fileId){var p=e.fileId,f=this._preloadingTracks[p],h=this._disableCache?null:d.get(p);f?(Or.info("Waiting for preloading track.",p),s=f.then((function(e){return Or.info("Preloading succeeded.",p),c.setResolveLatency(e.resolveLatency),c.setManifestLatency(e.manifestLatency),d.get(p)}),(function(){return Or.info("Preloading failed, creating new track",p),u()}))):h?(Or.info("Using cached track.",p,h),c.setMemoryCached(!0),s=Promise.resolve(h)):(Or.info("Creating new track from fileId",p),s=u())}else Or.info("Creating new track without fileId",e.resolvedURL),s=u();return s.then((function(t){return t.isProtected()&&!a._emeManager?Promise.reject(new ft(Z.DISALLOW_PROTECTED_TRACK_ERROR,"Protected tracks not supported")):(t.setLogData(e.logData),c.setCalculatedDuration(jr(t.getCalculatedDuration())),a._upcomingContent=t,Promise.resolve())})).then(this._prepareMediaElement.bind(this,this._loadingOptions,l)).then(this._loadContent.bind(this,this._loadingOptions,l)).then(this._handleLoadingComplete,this._handleLoadingError.bind(this,i,e,l))}},{key:"preload",value:function(e){var t=this,n=!this._disableCache,r=e.uri,a=e.fileId,o=this._cache;if(!n||!a||!this._emeManager)return Promise.resolve(null);var i="video"===e.mediaType;if(!(Nr[e.format]&&!i)||o.get(a))return Promise.resolve(null);var s=this._preloadingTracks,l=s[a];if(l)return l;Or.info("Preloading track",a);var c={manifestLatency:0,resolveLatency:0},d=this._emeManager.getKeySystemInfo().then((function(n){return qn.create({abrManager:t._abrManager,keySystem:n.keySystem,licenseEndpoint:e.licenseEndpoint,transport:t._transport,resolver:t._audioResolver,uri:r,fileId:a,format:e.format,fileFormat:e.fileFormat,isAd:e.isAd,resolvedURL:e.resolvedURL,noManifest:e.noManifest,preloadedManifest:e.preloadedManifest,logData:e.logData,disableCache:t._disableCache,emitWarning:t._emitWarning,audioGain:e.audioGain}).load(c)})).then((function(t){return Promise.all([t,"MP4_CBCS"!==e.format?t.getBufferForFragment(t.getHeadFragment()):null])})).then((function(e){var t=(0,Q.Z)(e,1)[0];return o.set(a,t),delete s[a],Or.info("Cached",a),c})).catch((function(e){return delete s[a],Or.warn("Preloading error",e),t.emit(ot.PLAYER_PRELOADING_ERROR,{error:e,track:e.track||null,canPlayNext:!("canPlayNext"in e)||e.canPlayNext,preloading:!0}),Promise.reject(e)}));return s[a]=d,d}},{key:"togglePlay",value:function(){return this._isPlaying()?this.pause():this.resume()}},{key:"setSubtitleLanguage",value:function(e){this._subtitleManager.setLanguage(e)}},{key:"getSubtitleLanguages",value:function(){return this._subtitleManager.getAvailableLanguages()}},{key:"getActiveSubtitleLanguage",value:function(){return this._subtitleManager.getActiveLanguage()}},{key:"deactivateCueEvents",value:function(){this._subtitleManager.deactivateListeners()}},{key:"activateCueEvents",value:function(){this._subtitleManager.activateListeners()}},{key:"setVolume",value:function(e,t){if(!this.emitSync(ot.PLAYER_BEFORE_VOLUME_CHANGE,{volume:e,options:t}).defaultPrevented){if(e<0||e>1)throw new ft(Z.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE,"Volume should be in range [0, 1]");this._playerVolume=e,this._player&&(this._player.volume=this._cubicVolume?e*e*e:e)}}},{key:"getVolume",value:function(){return this._playerVolume}},{key:"getPlayerState",value:function(){var e,t,n,r=this._player,a=this._currentContent,o={src:(null==r?void 0:r.src)?"data:".concat((null==a?void 0:a.getFileId())||"unknown"):void 0,height:(null==r?void 0:r.clientWidth)||0,width:(null==r?void 0:r.clientHeight)||0},i={};if(a){var s=a.getPlayableCodecs(),l=(0,Q.Z)(s,2),c=l[0],d=l[1];i.audio_format=c,i.video_format=d,a instanceof Yn&&r instanceof HTMLVideoElement&&(i.video_height=r.videoHeight,i.video_width=r.videoWidth,o.poster=r.poster)}return{playing:null!==(e=!(null==r?void 0:r.paused))&&void 0!==e&&e,position:r?jr(r.currentTime):0,duration:r?jr(r.duration):0,volume:null!==(t=this._playerVolume)&&void 0!==t?t:1,playback_speed:null!==(n=null==r?void 0:r.playbackRate)&&void 0!==n?n:0,buffering:this._buffering,media_type:(null==a?void 0:a.getMediaType())||null,media_info:i,player_element:o}}},{key:"getPlayerPosition",value:function(){return this._player?jr(this._player.currentTime):0}},{key:"seek",value:function(e){var t=this;if(this._player){var n=this._playId,r=function(){if(t._player&&n===t._playId){var r=Mr(e);r<0?r=0:r>=t._player.duration&&(r=t._player.duration),t._player.currentTime=r}else Or.info("Seek dropped: playId has changed.")};this._loaded?r():this.once(ot.PLAYER_LOAD,r),this._getBufferingLatency().then((function(e){t._tracker.trackSeekRebuffering(e)}))}}},{key:"pause",value:function(){var e=this;return new Promise((function(t){var n;e._player&&e._isPlaying()?(null===(n=e._audioProcessor)||void 0===n||n.suspend(),t(e._player&&e._player.pause())):t()}))}},{key:"resume",value:function(){var e=this;return new Promise((function(t){e._player&&!e._isPlaying()?(e._resumeAudioProcessor(e._player),t(e._player&&e._player.play())):t()}))}},{key:"stop",value:function(e,t){var n,r,a=[],o=e||{};this.emit(ot.PLAYER_BEFORE_STOP,{timestamp:Date.now(),logData:o}),this._tracker.trackStopped(this._player?jr(this._player.currentTime):-1,e,this.getStatistics()||void 0),this._buffer.abort(!0),null===(n=this._audioProcessor)||void 0===n||n.suspend(),this._emeManager&&a.push(this._emeManager.destroySessions());var i=this._player;if(i){this._subtitleManager.clear(),this._fatalOnNextError=this._shouldNextErrorBeFatal(),this._fatalOnNextError&&Or.warn("MediaError detected: next immediate media error will be fatal.");var s=i.src;if(s)Dr.test(s)&&URL.revokeObjectURL(s),i.removeAttribute("src");else{var l=fr(i.getElementsByTagName("source"));Or.info("HTMLSourceElements to removed: ".concat(l.length));var c,d=Ir(l);try{for(d.s();!(c=d.n()).done;){var u=c.value;i.removeChild(u)}}catch(h){d.e(h)}finally{d.f()}Or.info("Releasing HLS URLs"),null===(r=this._currentContent)||void 0===r||r.releaseHLSURL()}i.load()}if(this._currentContent&&this._disableCache&&this._currentContent.clearCachedBuffers(),i&&this._currentContent&&"video"===this._currentContent.getMediaType()){var p=this._getContainerElement(this._videoPlayerContainer);p&&i.parentNode===p&&(this._newElementPerTrack||"video"!==t)&&(this._subtitleManager.setPlayer(null),p.removeChild(i),this.emit(ot.PLAYER_VIDEO_ELEMENT_REMOVED,null))}else if(i&&this._currentContent&&"audio"===this._currentContent.getMediaType()){var f=this._getContainerElement(this._audioPlayerContainer);f&&i.parentNode===f&&(this._newElementPerTrack||"audio"!==t)&&f.removeChild(i)}return this.emit(ot.PLAYER_STOPPED,null),Promise.all(a).then((function(){return!0}))}},{key:"hideSubtitles",value:function(){this._subtitleManager.hide()}},{key:"showSubtitles",value:function(){this._subtitleManager.show()}},{key:"areSubtitlesShown",value:function(){return this._subtitleManager.visible()}},{key:"getKeySystemInfo",value:function(){return this._emeManager?this._emeManager.getKeySystemInfo():Promise.resolve(null)}},{key:"getVideoVariants",value:function(){if(!(this._currentContent&&this._currentContent instanceof Yn))return[];var e,t=[],n=Ir(this._currentContent.getVideoProfiles());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push({width:r.video_width,height:r.video_height,bitrate:r.video_bitrate})}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"setPreferredBitrate",value:function(e){return"number"!=typeof e?Promise.resolve(st.INVALID):(this._preferredBitrate=e,this._currentContent&&"video"===this._currentContent.getMediaType()&&e>0&&this._buffer.abort(!0),this._abrManager.overrideBitrate(e),Promise.resolve(st.SUCCESS))}},{key:"getCurrentBandwidth",value:function(){return this._abrManager.getBandwidthEstimate()}},{key:"setBackgrounded",value:function(e){this._abrManager.overrideBitrate(e?1e-32:this._preferredBitrate)}},{key:"setVideoResolution",value:function(e){this._videoResolution=Object.assign(Object.assign({},this._videoResolution),e),this._currentContent instanceof Yn&&this._currentContent.setVideoResolution(this._videoResolution)}},{key:"activateElement",value:function(){return this._resumeAudioProcessor(this._player),!(this._playerActivated||!this._player||this._player.src)&&(this._player.load(),this._playerActivated=!0,!0)}},{key:"getMediaConfig",value:function(){var e=this;return void 0===this._mediaConfig?function(e,t){var n=t||xr("video"),r=function(e){n.canPlayType("audio/mp3")&&(e.formats.audio.push("audio/mp3"),e.formatsInfo.audio.push({mimeType:"audio/mp3",codec:"mp3",contentType:'audio/mp3; codecs="mp3"'}),e.supports.unprotected_audio=!0)};if(e)return e.getKeySystemInfo().then((function(e){var t=e.audioFormats,n=e.videoFormats,a={supports:{protected_audio:!!t.length,unprotected_audio:!0,protected_video:!!n.length,unprotected_video:!0},formats:{audio:t.map((function(e){return e.contentType})),video:n.map((function(e){return e.contentType}))},formatsInfo:{audio:(0,le.Z)(t),video:(0,le.Z)(n)}};return a.keysystem=e.keySystem,a.keysystem_impl=e.keySystemImpl,r(a),a}));var a="undefined"!=typeof window&&window.MediaSource?function(e){return MediaSource.isTypeSupported(e)}:function(e){return"probably"===n.canPlayType(e)||"probably"===n.canPlayType(e.split(";")[0])},o=tn([Xt[0]],a),i=[],s=[],l=[],c=[];if(o){var d,u=o.audioCapabilities,p=o.videoCapabilities,f=Ir(u);try{for(f.s();!(d=f.n()).done;){var h=d.value;i.push(h.contentType),l.push(rn(h.contentType))}}catch(v){f.e(v)}finally{f.f()}var _,y=Ir(p);try{for(y.s();!(_=y.n()).done;){var m=_.value;s.push(m.contentType),c.push(rn(m.contentType))}}catch(v){y.e(v)}finally{y.f()}}var g={supports:{protected_audio:!1,unprotected_audio:!!i.length,protected_video:!1,unprotected_video:!!s.length},formats:{audio:i,video:s},formatsInfo:{audio:l,video:c}};return r(g),Promise.resolve(g)}(this._emeManager,this._player).then((function(t){return e._mediaConfig=t,e._mediaConfig})):Promise.resolve(this._mediaConfig)}},{key:"setPlaybackSpeed",value:function(e){var t;return!(!Number.isFinite(e)||e<=0)&&(!(null===(t=this._loadingOptions)||void 0===t?void 0:t.useDefaultPlaybackSpeed)&&(this._playerSpeed=null!=e?e:1,this._player&&(this._player.playbackRate=this._playerSpeed,this._tracker.trackSpeedChanged(this._playerSpeed)),!0))}},{key:"getStatistics",value:function(){return this._player&&this._currentContent?this._statistics.getSample(this._player,this._currentContent):null}},{key:"getAudioProcessor",value:function(){return this._audioProcessor}}],[{key:"create",value:function(e){var t=Object.assign({},e);return e.disallowProtectedTracks?n.createWithOptions(t):fn.create({transport:e.transport,disallowRobustnessValues:e.disallowRobustnessValues,disallowCodecs:e.disallowCodecs,noServerCertificate:e.noServerCertificate,precacheServerCertificate:e.precacheServerCertificate,unauthServerCertificateBase:e.unauthServerCertificateBase,preferredKeySystems:e.preferredKeySystems}).then((function(e){t.emeManager=e;var r=new n(t);return t.preinitMediaElement?r._preinitMediaElement():r})).catch((function(r){if(e.enableWithoutEME)return n.createWithOptions(t);throw r}))}},{key:"createWithOptions",value:function(e){return new Promise((function(t){var r=new n(e);t(e.preinitMediaElement?r._preinitMediaElement():r)}))}}]),n}($.vp);!function(e){e.INVALID_IDENT_DATA="INVALID_IDENT_DATA",e.LOGGING_REQUEST_FAILED="LOGGING_REQUEST_FAILED"}(Ur||(Ur={}));var Zr="unknown",Br="",Yr="0.0.0";function Kr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Vr=function(e){(0,p.Z)(n,e);var t=Kr(n);function n(e,r,a){var o;return(0,c.Z)(this,n),(o=t.call(this,r)).name="LoggingError",o.code=e,o.status=a||0,o}return(0,d.Z)(n)}((0,ae.Z)(Error));function Gr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wr(e,t){var n=e.indexOf(t);return-1===n?[e,""]:[e.slice(0,n),e.slice(n+t.length)]}var qr=202,zr=function(){function e(t){(0,c.Z)(this,e),this._transport=t.transport,this._endpoint=t.endpoint||"@webgate/melody",this._batchQueue=[],this._identData=Promise.all([t.sdkId,t.platform,t.clientVersion]).then((function(e){var t=(0,Q.Z)(e,3),n=t[0],r=t[1],a=t[2];return{sdk_id:n||Br,platform:r||Br,client_version:a||Yr}}))}return(0,d.Z)(e,[{key:"_assertValidIdentData",value:function(e){if(!e.sdk_id)throw new Vr(Ur.INVALID_IDENT_DATA,"sdkId must be a non-empty string.",0)}},{key:"_sendBatchedLogs",value:function(){var e=this;return this._identData.then((function(t){e._assertValidIdentData(t);var n,r=e._batchQueue.splice(0,e._batchQueue.length);if(r.length){var a=(n="endpoint",r.reduce((function(e,t){var r,a=t[n];return void 0===a||(e[a]=null!==(r=e[a])&&void 0!==r?r:[],e[a].push(t)),e}),{})),o=Object.keys(a).map((function(n){var r,o=null===(r=a[n])||void 0===r?void 0:r.map((function(e){return e.payload}));return(null==o?void 0:o.length)?e._transport.request("".concat(e._endpoint).concat(n),{method:"POST",payload:JSON.stringify(Object.assign({messages:o},t)),retry:{maxRetries:5,condition:function(e){return e.status!==qr}}}).then((function(e){var t=e.status;return t===qr||Promise.reject(new Vr(Ur.LOGGING_REQUEST_FAILED,"Logging service responded with status ".concat(t),t))})):Promise.resolve(!0)}));return Promise.all(o).then((function(){return!0}))}return Promise.resolve(!0)}))}},{key:"_sendLog",value:function(e,t){return this.sendLog(e,t)}},{key:"sendLog",value:function(e,t,n){var r=this,a=null==n?void 0:n.forget;if(null==n?void 0:n.batch){if(a)throw new Error("'forget' cannot be used together with 'batch'.");return new Promise((function(n){r._batchQueue.push({endpoint:e,payload:t}),queueMicrotask((function(){r._sendBatchedLogs().then(n)}))}))}return this._identData.then((function(n){r._assertValidIdentData(n);var o=r._endpoint+e,i=a?r._transport.getLastToken():null;return i&&(o=function(e,t,n){var r,a=Wr(e,"#"),o=(0,Q.Z)(a,2),i=o[0],s=o[1],l=Wr(i,"?"),c=(0,Q.Z)(l,2),d=c[0],u=c[1],p=s?"#".concat(s):"",f="".concat(t,"=").concat(encodeURIComponent(n)),h=Gr(u.split("&"));try{for(h.s();!(r=h.n()).done;){var _=r.value;_.length>0&&Wr(_,"=")[0]!==t&&(f+="&".concat(_))}}catch(y){h.e(y)}finally{h.f()}return"".concat(d,"?").concat(f).concat(p)}(o,"access_token",i)),r._transport.request(o,{method:"POST",payload:JSON.stringify(Object.assign(Object.assign({},t),n)),forget:a,retry:{maxRetries:5,condition:function(e){return e.status!==qr}}})})).then((function(e){var t=e.status;return!(!a&&t!==qr)||Promise.reject(new Vr(Ur.LOGGING_REQUEST_FAILED,"Logging service responded with status ".concat(t),t))}))}}]),e}();function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var $r=function(e){(0,p.Z)(n,e);var t=Qr(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).debug={},a.name="LoggingError",a.message=r,a.code=e,a}return(0,d.Z)(n)}((0,ae.Z)(Error));const Xr="7.19.0-9c00b49",Jr="7.19.0";function ea(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ta(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ra=we.P.forTag("playback.logger"),aa=function(e){(0,p.Z)(n,e);var t=na(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._currentTrackingData=null,r._sequenceId=0,r._sequenceSessionStorage={},r._sessionId="0",r._transport=e.transport,r._logSender=e.logSender,r._player=e.player,r._init(),r}return(0,d.Z)(n,[{key:"_init",value:function(){var e=this._player;e.on(ot.PLAYER_LOAD,this._onPlayerLoad.bind(this)),e.on(ot.PLAYER_ERROR,this._onError.bind(this,!1)),e.on(ot.PLAYER_WARNING,this._onError.bind(this,!0)),e.on(ot.PLAYER_PRELOADING_ERROR,this._onError.bind(this,!1)),e.on(ot.PLAYER_TRACKING_DATA_CREATED,this._onTrackingDataCreated.bind(this)),e.on(ot.PLAYER_TRACKING_DATA_FINALIZED,this._onTrackingDataFinalized.bind(this)),e.on(ot.PLAYER_PLAYBACK_START,this._onPlaybackStart.bind(this))}},{key:"_emitError",value:function(e,t){this.emit(ot.LOGGER_ERROR,{error:e,trackingData:t})}},{key:"_onError",value:function(e,t){var n,r,a,o=t.data,i=this._currentTrackingData;if(i&&!i.noLog){var s=o.error,l=null!==(n=null==s?void 0:s.debug)&&void 0!==n?n:{};l.position="position"in o?o.position:0;var c={track:o.track||{},debug:l,preloading:"preloading"in o&&!!o.preloading,session_id:this._sessionId,playback_id:i.playbackId||null,player_play_id:"playId"in o?o.playId:null,http_status_code:null!==(r=null==s?void 0:s.status)&&void 0!==r?r:null,license_server:null!==(a=null==s?void 0:s.licenseServer)&&void 0!==a?a:null};this._logError(s.code||Z.UNKNOWN,s,c,i,e)}}},{key:"_onPlayerLoad",value:function(e){var t=e.data.logData;if(t)if(t.impressionURLs){var n,r=ea(t.impressionURLs);try{for(r.s();!(n=r.n()).done;){var a=n.value;this._logImpression(a)}}catch(o){r.e(o)}finally{r.f()}}else t.impressionURL&&this._logImpression(t.impressionURL)}},{key:"_onPlaybackStart",value:function(e){var t=e.data.trackingData;t.noLog||t.noStats||this._logPlaybackStart(t)}},{key:"_onTrackingDataCreated",value:function(e){var t=e.data.trackingData;t.noLog?this._currentTrackingData=null:(this._currentTrackingData=t,this._setSessionId(),t.noTSV||this._setSequenceId())}},{key:"_setSessionId",value:function(){this._sessionId=this._transport.getInitTime().toString()}},{key:"_setSequenceId",value:function(){this._sessionId&&(this._sequenceId=this._getSequenceId(this._sessionId))}},{key:"_onTrackingDataFinalized",value:function(e){var t=e.data.trackingData;if(!t.noLog){var n=this._sessionId!==this._transport.getInitTime().toString();if(n&&this._setSessionId(),t.playbackId&&!t.noTSV){if(n&&this._setSequenceId(),!t.playIntended&&!t.played)return void this._rollbackSequenceId(this._sessionId);this._logTrackStreamVerification(t)}t.noStats||this._logPlaybackStats(t)}}},{key:"_logTrackStreamVerification",value:function(e){var t=this,n={play_track:e.currentTrackUri,playback_id:e.playbackId,ms_played:e.msPlayed,ms_nominal_played:e.msNominalPlayed,session_id:this._sessionId,sequence_id:this._sequenceId,next_playback_id:e.nextPlaybackId};ra.debug("Logged TrackStreamVerification",n),this._logSender.logTrackStreamVerification(n).catch((function(r){var a=new $r(Z.TSV_SENDING_FAILED,r.message||"Unknown reason.");t._logError(a.code,r,n,e,!1),t._emitError(a,e)}))}},{key:"_logPlaybackStats",value:function(e){var t=this,n={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,internal_play_id:e.internalPlayId,memory_cached:e.memoryCached,persistent_cached:e.persistentCached,audio_format:e.audiocodec||"",video_format:e.videocodec||"",manifest_id:e.fileId,protected:!1,key_system:e.keySystem,key_system_impl:e.keySystemImpl,urls_json:JSON.stringify(e.urls),start_time:e.loadTime,end_time:e.stopTime,external_start_time:e.externalLoadTime,ms_play_latency:e.msPlayLatency,ms_init_latency:e.msInitLatency,ms_head_latency:e.msHeadLatency,ms_manifest_latency:e.msManifestLatency,ms_resolve_latency:e.msResolveLatency,ms_license_session_latency:e.msLicenseSessionLatency,ms_license_generation_latency:e.msLicenseGenerationLatency,ms_license_request_latency:e.msLicenseRequestLatency,ms_license_update_latency:e.msLicenseUpdateLatency,ms_played:e.msPlayed,ms_nominal_played:e.msNominalPlayed,ms_file_duration:e.msFileDuration,ms_actual_duration:e.msActualDuration,ms_start_position:e.startPosition,ms_end_position:e.position,ms_seek_rebuffer:e.msSeekRebuffering,ms_seek_rebuffer_longest:e.maxMsSeekRebuffering,ms_stall_rebuffer:e.msStalled,ms_stall_rebuffer_longest:e.maxMsStalled,n_stalls:e.nStalls,n_rendition_upgrade:e.nRenditionUpgrade,n_rendition_downgrade:e.nRenditionDowngrade,bps_bandwidth_max:e.bpsBandwidthMax,bps_bandwidth_min:e.bpsBandwidthMin,bps_bandwidth_avg:e.bpsBandwidthAvg,n_seekback:e.nSeeksBackward,n_seekforward:e.nSeeksForward,start_bitrate:e.startBitrate||e.bitrate||0,audio_quality:e.audioQuality,time_weighted_bitrate:e.timeWeightedBitrate,reason_start:e.reasonStart,reason_end:e.reasonEnd,initially_paused:!e.playIntended,had_error:e.hadError,n_warnings:e.nWarnings,n_navigator_offline:e.nOffline,session_id:this._sessionId,sequence_id:this._sequenceId,client_id:e.clientId,correlation_id:e.correlationId,n_dropped_video_frames:e.droppedVideoFrames,n_total_video_frames:e.totalVideoFrames};ra.info("Logging PlaybackStats"),this._logSender.logJSSDKPlaybackStats(n).catch((function(r){var a=new $r(Z.PLAYBACK_STATS_SENDING_FAILED,r.message||"Unknown reason.");t._logError(a.code,r,n,e,!1),t._emitError(a,e)}))}},{key:"_logPlaybackStart",value:function(e){var t=this,n={play_track:e.currentTrackUri,file_id:e.fileId,playback_id:e.playbackId,session_id:this._sessionId,ms_start_position:e.startPosition,initially_paused:!e.playIntended,client_id:e.clientId,correlation_id:e.correlationId};ra.info("Logging PlaybackStart"),this._logSender.logJSSDKPlaybackStart(n).catch((function(r){var a=new $r(Z.PLAYBACK_START_SENDING_FAILED,r.message||"Unknown reason.");t._logError(a.code,r,n,e,!1),t._emitError(a,e)}))}},{key:"_getSequenceId",value:function(e){var t=this._sequenceSessionStorage[e];return t||(t=0),t+1>=9007199254740991&&(t=0),this._sequenceSessionStorage[e]=t+1,t}},{key:"_rollbackSequenceId",value:function(e){var t=this._sequenceSessionStorage[e];t&&(this._sequenceSessionStorage[e]=Math.max(t-1,0))}},{key:"_logImpression",value:function(e){this._transport.request(e,{forget:!0}).catch((function(e){ra.warn("Unable to send impression request",e)}))}},{key:"_logError",value:function(e,t,n,r,a){var o="";t&&((o=t.stack||"")||(o=t.toString()));var i={source:"playback",source_version:Xr||Zr,type:e||Zr,message:t&&t.message||Br,stack:JSON.stringify(o),json_data:JSON.stringify(n||{}),json_data_version:"1.0.0",client_id:r.clientId,correlation_id:r.correlationId};a?this._logSender.logJSSDKWarning(i).catch((function(e){return ra.warn("Failed to log warning",i,e)})):this._logSender.logJSSDKError(i).catch((function(e){return ra.warn("Failed to log error",i,e)}))}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);function oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ia=function(e){(0,p.Z)(n,e);var t=oa(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.STORAGE_ERROR,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Storage Error";return(0,c.Z)(this,n),(e=t.call(this,a)).status=-1,e.fileId="",e.debug={},e.canPlayNext=!0,e.code=r,e.message=a,e.name="StorageError",e}return(0,d.Z)(n)}((0,ae.Z)(Error)),sa=we.P.forTag("playback.storage_resolve"),la=function(){function e(t){(0,c.Z)(this,e),this._transport=t}return(0,d.Z)(e,[{key:"_parseResponse",value:function(e,t){var n,r;if(200!==t.status)return(r=new ia(Z.STORAGE_FAILED_WITH_STATUS,"Storage Resolve responded with ".concat(t.status))).status=t.status,r.fileId=e,Promise.reject(r);var a=t.body;if(!(null===(n=null==a?void 0:a.cdnurl)||void 0===n?void 0:n.length))return(r=new ia(Z.STORAGE_RETURNED_NO_TRACKS,"Storage Resolve returned no tracks for fileId ".concat(e))).fileId=e,Promise.reject(r);var o={uri:a.cdnurl[0],uris:a.cdnurl,protection:"cenc"};return Promise.resolve(o)}},{key:"getCDNURL",value:function(e,t){sa.info("Requesting CDN URL for ",e);var n="files/audio/interactive",r=t?"v2/".concat(n,"/").concat(t,"/").concat(e):"".concat(n,"/").concat(e),a="@webgate/storage-resolve/".concat(r,"?").concat("version=10000000&product=9&platform=39&alt=json");return this._transport.request(a,{responseType:"json",retry:{condition:function(e,t){return e.getStatusFamily()!==t.SUCCESS}}}).then(this._parseResponse.bind(this,e))}},{key:"getManifest",value:function(e){var t="".concat("https://seektables.scdn.co/seektable","/").concat(e,".json");return sa.info("Requesting JSON manifest for ",e),this._transport.request(t,{responseType:"json",retry:{condition:function(e,t){return e.getStatusFamily()!==t.SUCCESS}}}).then((function(t){var n;return 200!==t.status?((n=new ia(Z.STORAGE_TRACK_MANIFEST_FAILED,"Track manifest request failed with status code ".concat(t.status))).debug.file_id=e,n.status=t.status,Promise.reject(n)):t.body?t.body:((n=new ia(Z.STORAGE_TRACK_MANIFEST_EMPTY,"Received empty manifest.")).debug.file_id=e,n.status=t.status,Promise.reject(n))}))}}]),e}();function ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var da=function(e){(0,p.Z)(n,e);var t=ca(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).debug={},a.name="TrackingError",a.message=r,a.code=e,a}return(0,d.Z)(n)}((0,ae.Z)(Error)),ua=(n(54678),n(56977),function(){function e(){(0,c.Z)(this,e),this._version="1.0.0",this._map={}}return(0,d.Z)(e,[{key:"clear",value:function(){this._map={}}},{key:"track",value:function(e,t){var n=this._map[e];n||(n={url:e,segments:0,bandwidths:[],totalBandwidth:0},this._map[e]=n),n.segments+=1,n.bandwidths.push(t.bandwidth),n.totalBandwidth+=t.bandwidth}},{key:"toJSON",value:function(){var e=[];for(var t in this._map)if(this._map[t]){var n=this._map[t];n&&e.push({url:t,segments:n.segments,avg_bw:parseFloat((n.totalBandwidth/n.bandwidths.length).toFixed(7))})}return{version:this._version,urls:e}}}]),e}()),pa=function(){function e(){(0,c.Z)(this,e),this._bitrates={},this._isFinalized=!1,this._needsEndSegment=!1,this._segments=[],this._cdnURLTracker=new ua,this._currentSpeed=1,this.audiocodec=null,this.bitrate=0,this.audioQuality=void 0,this.bufferingPercentage=0,this.bufferLoadStartTime=0,this.urls={},this.currentTrackUri="",this.displayTrack="",this.externalLoadTime=0,this.fileId="",this.gaiaDevId="none",this.hadError=!1,this.internalPlayId="",this.isProtected=!1,this.keySystem="",this.keySystemImpl="",this.lastPlayPosition=-1,this.loadTime=0,this.localTimeMs=-1,this.maxContinuous=0,this.maxMsSeekRebuffering=0,this.maxMsStalled=0,this.memoryCached=!1,this.msActualDuration=0,this.msFileDuration=0,this.msHeadLatency=0,this.msInitLatency=0,this.msKeyLatency=0,this.msLicenseGenerationLatency=0,this.msLicenseRequestLatency=0,this.msLicenseSessionLatency=0,this.msLicenseUpdateLatency=0,this.msManifestLatency=0,this.msPlayed=0,this.msNominalPlayed=0,this.msPlayedUnion=0,this.msPlayLatency=0,this.msResolveLatency=0,this.msSeekRebuffering=0,this.msSeeksBackward=0,this.msSeeksForward=0,this.nextPlaybackId="",this.nOffline=0,this.noLog=!1,this.noTSV=!1,this.noStats=!1,this.nWarnings=0,this.msStalled=0,this.nSeeksBackward=0,this.nSeeksForward=0,this.nSpeedChanges=!1,this.nStalls=0,this.nRenditionUpgrade=0,this.nRenditionDowngrade=0,this.bpsBandwidthMax=0,this.bpsBandwidthMin=0,this.bpsBandwidthAvg=0,this.nBandwidthSamples=0,this.totalBandwidth=0,this.lastVideoProfileBitrate=0,this.persistentCached=!1,this.playbackId="",this.playContext="",this.played=!1,this.position=0,this.reasonEnd="unknown",this.reasonStart="unknown",this.referrer="unknown",this.referrerVendor="unknown",this.referrerVersion="unknown",this.sourceEnd="unknown",this.sourceStart="unknown",this.startPosition=0,this.stopTime=0,this.streamingRule="none",this.timeWeightedBitrate=0,this.totalBytes=0,this.playIntended=!1,this.videocodec=null,this.clientId="unknown",this.correlationId="unknown",this.droppedVideoFrames=0,this.totalVideoFrames=0}return(0,d.Z)(e,[{key:"_calculateUnion",value:function(){for(var e=this._segments.slice(0),t=0,n=0,r=0,a=0,o=0,i=0,s=this.maxContinuous;o<e.length;o++)o%2!=0&&void 0!==e[o-1]&&"start"===e[o-1].type&&(s=(i=e[o].time-e[o-1].time)>s?i:s);for(this.maxContinuous=s,e.sort((function(e,t){return e.time-t.time}));a<e.length;a++)"start"===e[a].type&&(0===n&&(r=a),++n),"end"===e[a].type&&0===--n&&(t+=e[a].time-e[r].time);return t}},{key:"_calculateWeightedBitrate",value:function(e){var t=this._bitrates,n=0;for(var r in t)r&&t.hasOwnProperty(r)&&e>0&&(n+=parseInt(r,10)*t[r]/e);return Math.round(n)}},{key:"registerVideoVariant",value:function(e){var t=e.bitrate;t&&(this._bitrates[t]=this._bitrates[t]||0,this.startBitrate||(this.startBitrate=t)),e.audioProfile&&e.audioProfile.audio_codec&&(this.audiocodec=e.audioProfile.audio_codec),e.videoProfile&&e.videoProfile.video_codec&&(this.lastVideoProfileBitrate=e.videoProfile.video_bitrate,this.videocodec=e.videoProfile.video_codec)}},{key:"addStartSegment",value:function(){this._segments.push({type:"start",time:this.position}),this._needsEndSegment=!0}},{key:"addEndSegment",value:function(){this._needsEndSegment&&(this._segments.push({type:"end",time:this.position}),this._needsEndSegment=!1)}},{key:"addMSPlayed",value:function(e){if(e){if(e<0)throw new TypeError("Cannot add negative msPlayed value: ".concat(e));this.msPlayed+=e/this._currentSpeed,this.msNominalPlayed+=e}}},{key:"addSpeedChange",value:function(e){this.nSpeedChanges=!0,this._currentSpeed=e}},{key:"trackBitrate",value:function(e,t){var n=e||"dummy";this._bitrates[n]=this._bitrates[n]||0,this._bitrates[n]+=t}},{key:"trackBufferURL",value:function(e,t){this._cdnURLTracker.track(e,t)}},{key:"finalize",value:function(){var e;if(this._isFinalized)throw new da(Z.TRACK_DATA_ALREADY_FINALIZED,"TrackData already finalized.");this.msPlayedUnion=this._calculateUnion(),this.nSeeksBackward||this.nSeeksForward||this.nSpeedChanges||(this.msNominalPlayed=this.maxContinuous=this.msPlayedUnion,this.msPlayed=this.msNominalPlayed/this._currentSpeed,this.nSpeedChanges=!1);var t=this.msPlayed;return this.timeWeightedBitrate=this._calculateWeightedBitrate(t),this.bufferingPercentage=this.msStalled/t,this.startBitrate||(this.startBitrate=this.bitrate),this.bpsBandwidthAvg=null!==(e=this.totalBandwidth/this.nBandwidthSamples)&&void 0!==e?e:0,this.urls=this._cdnURLTracker.toJSON(),this._isFinalized=!0,!0}},{key:"getURLsJSON",value:function(){var e,t;return null!==(t=null===(e=this._cdnURLTracker.toJSON().urls)||void 0===e?void 0:e.map((function(e){return e.url})))&&void 0!==t?t:[]}},{key:"getPlaybackStats",value:function(){var e;switch(this.keySystem){case it.WIDEVINE:e="widevine";break;case it.PLAYREADY:case it.PLAYREADY_HARDWARE:e="playready";break;default:e="none"}return{ms_total_est:this.msActualDuration,ms_manifest_latency:this.msManifestLatency,ms_latency:this.msPlayLatency,start_offset_ms:this.startPosition,ms_initial_buffering:this.msPlayLatency,ms_seek_rebuffering:this.msSeekRebuffering,ms_stalled:this.msStalled,max_ms_seek_rebuffering:this.maxMsSeekRebuffering,max_ms_stalled:this.maxMsStalled,n_stalls:this.nStalls,n_rendition_upgrade:this.nRenditionUpgrade,n_rendition_downgrade:this.nRenditionDowngrade,bps_bandwidth_max:this.bpsBandwidthMax,bps_bandwidth_min:this.bpsBandwidthMin,bps_bandwidth_avg:this.bpsBandwidthAvg,audiocodec:this.audiocodec?this.audiocodec.toLowerCase():void 0,videocodec:this.videocodec?this.videocodec.toLowerCase():void 0,start_bitrate:this.startBitrate||this.bitrate||void 0,full_screen:void 0,time_weighted_bitrate:this.timeWeightedBitrate,buffering_percentage:void 0,prefetched_bytes:void 0,prefetched_bytes_loaded:void 0,prefetched_initial_bitrate:void 0,key_system:e,ms_key_latency:this.msKeyLatency,total_bytes:this.totalBytes,local_time_ms:this.localTimeMs,ms_played_background:void 0,n_dropped_video_frames:this.droppedVideoFrames,n_total_video_frames:this.totalVideoFrames}}},{key:"isFinalized",value:function(){return this._isFinalized}}],[{key:"create",value:function(){return new e}}]),e}();function fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ha=we.P.forTag("playback.tracker"),_a=31e3,ya=function(e){(0,p.Z)(n,e);var t=fa(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)(this,n),(e=t.call(this))._playedThreshold=_a,e._playedThresholdReached=!1,e._trackingData=null,e._playedThreshold=r.playerThreshold||_a,e}return(0,d.Z)(n,[{key:"_checkPlayedThreshold",value:function(){var e=this._trackingData;!e||!this._playedThreshold||this._playedThresholdReached||e.msPlayed<this._playedThreshold||(this._playedThresholdReached=!0,this.emit(ot.TRACKER_PLAYED_THRESHOLD_REACHED,{played:e&&e.msPlayed||0,threshold:this._playedThreshold}))}},{key:"getMSPlayed",value:function(){return this._trackingData?this._trackingData.msPlayed:0}},{key:"getStallsInformation",value:function(){return this._trackingData?{nStalls:this._trackingData.nStalls,msTotalStalled:this._trackingData.msStalled}:{nStalls:0,msTotalStalled:0}}},{key:"trackLoadStart",value:function(e,t,n,r,a){var o=pa.create();this._trackingData=o,this._playedThresholdReached=!1,o.fileId=null!=t?t:"",o.currentTrackUri=e,o.loadTime=Date.now(),o.internalPlayId=n,o.externalLoadTime=r.externalLoadTime||0,o.displayTrack=r.displayTrack||"",o.playbackId=r.playbackId||"",o.playContext=r.playContext||"",o.reasonStart=r.reason||"unknown",o.sourceStart=r.source||"unknown",o.clientId=r.clientId||"",o.correlationId=r.correlationId||"";var i=r.referrer||{};o.referrer=void 0!==i.name?i.name:"unknown",o.referrerVersion=void 0!==i.version?i.version:"unknown",o.referrerVendor=void 0!==i.vendor?i.vendor:"unknown";var s=r.format||{};s.codec&&(o.audiocodec=s.codec.toLowerCase()),s.bitrate&&(o.bitrate=s.bitrate),s.audioQuality&&(o.audioQuality=s.audioQuality),o.gaiaDevId=r.deviceId||"none",o.noLog=r.noLog||!1,o.noTSV=r.noTSV||!1,o.noStats=r.noStats||!1,o.contentMetadata=a,this.emit(ot.TRACKER_TRACKING_DATA_CREATED,{trackingData:o})}},{key:"trackBufferLoadStart",value:function(){var e=this._trackingData;e&&(e.bufferLoadStartTime=Date.now())}},{key:"trackBytesDownloaded",value:function(e){var t=this._trackingData;t&&(t.totalBytes+=e)}},{key:"trackLoadDone",value:function(e){var t=this._trackingData;if(t){var n=Date.now();t.msInitLatency=n-t.bufferLoadStartTime,t.localTimeMs=n,t.position=e,t.addStartSegment()}}},{key:"trackPlay",value:function(e,t){var n=this._trackingData;n&&(n.played||this.emit(ot.TRACKER_PLAYBACK_START,{trackingData:n}),n.played=!0,n.position=e,n.startPosition=e,n.addSpeedChange(t||1))}},{key:"trackCanPlayThrough",value:function(){var e=this._trackingData;if(e&&!e.msPlayLatency){var t=Date.now();e.msPlayLatency=t-e.loadTime,e.msHeadLatency=t-e.bufferLoadStartTime}}},{key:"trackBufferURL",value:function(e,t){var n=this._trackingData;n&&n.trackBufferURL(e,t)}},{key:"trackNavigatorOffline",value:function(){var e=this._trackingData;e&&(e.nOffline+=1)}},{key:"trackSeekRebuffering",value:function(e){var t=this._trackingData;t&&(e>t.maxMsSeekRebuffering&&(t.maxMsSeekRebuffering=e),t.msSeekRebuffering+=e)}},{key:"trackMsStalled",value:function(e){var t=this._trackingData;t&&(e>t.maxMsStalled&&(t.maxMsStalled=e),t.msStalled+=e,t.nStalls++)}},{key:"trackLoadFailed",value:function(){var e=this._trackingData;e&&(e.msPlayLatency=Date.now()-e.loadTime,e.position=0,e.addStartSegment())}},{key:"trackStopped",value:function(e,t,n){var r,a,o,i,s=this._trackingData;if(s&&!s.isFinalized()){var l=Date.now();if(s.stopTime=l,s.lastPlayPosition>=0&&e>=0&&s.lastPlayPosition<e){var c=e-s.lastPlayPosition;s.addMSPlayed(c)}s.addEndSegment(),s.sourceEnd=t.source||"unknown",s.reasonEnd=t.reason||"unknown",s.nextPlaybackId=t.playbackId||"",s.droppedVideoFrames=null!==(a=null===(r=null==n?void 0:n.video)||void 0===r?void 0:r.droppedVideoFrames)&&void 0!==a?a:0,s.totalVideoFrames=null!==(i=null===(o=null==n?void 0:n.video)||void 0===o?void 0:o.totalVideoFrames)&&void 0!==i?i:0,s.finalize(),ha.info("Tracker data finalized.");var d=s.getPlaybackStats();this.emit(ot.TRACKER_TRACKING_DATA_FINALIZED,{trackingData:s,playbackStats:d})}}},{key:"trackPositionChanged",value:function(e){var t=this._trackingData;if(t){var n=t.position;e!==n&&(t.addEndSegment(),e>n?(t.nSeeksForward++,t.msSeeksForward+=e-n):e<n&&(t.nSeeksBackward++,t.msSeeksBackward+=n-e),t.position=e,t.lastPlayPosition=-1,t.addStartSegment())}}},{key:"trackPlaying",value:function(e){var t=this._trackingData;if(t){if(t.lastPlayPosition>=0&&t.lastPlayPosition<e){var n=e-t.lastPlayPosition;t.addMSPlayed(n)}t.position=e,t.lastPlayPosition=e}}},{key:"trackPaused",value:function(e){var t=this._trackingData;if(t){if(t.lastPlayPosition>=0&&t.lastPlayPosition<e){var n=e-t.lastPlayPosition;t.addMSPlayed(n)}t.position=e,t.lastPlayPosition=e}}},{key:"trackProgress",value:function(e,t){var n=this._trackingData;if(null==n?void 0:n.played){var r=0;if(n.lastPlayPosition>=0){if((r=e-n.lastPlayPosition)<0)return void ha.warn("Skipping msPlayed calculation: late progress event.");n.addMSPlayed(r)}this._checkPlayedThreshold(),n.position=e,n.lastPlayPosition=e,t&&n.trackBitrate(t,r)}}},{key:"trackSpeedChanged",value:function(e){var t=this._trackingData;t&&t.addSpeedChange(e)}},{key:"trackVideoLoadStart",value:function(e){var t=this._trackingData;t&&t.registerVideoVariant(e)}},{key:"trackWarning",value:function(){var e=this._trackingData;e&&e.nWarnings++}},{key:"trackOffline",value:function(){var e=this._trackingData;e&&e.nOffline++}},{key:"setActualDuration",value:function(e){var t=this._trackingData;t&&(t.msActualDuration=e)}},{key:"setKeySystem",value:function(e){var t=this._trackingData;t&&(t.keySystem=e)}},{key:"setKeySystemImpl",value:function(e){var t=this._trackingData;t&&(t.keySystemImpl=e)}},{key:"setManifestLatency",value:function(e){var t=this._trackingData;t&&(t.msManifestLatency=e)}},{key:"setPlayIntended",value:function(e){var t=this._trackingData;t&&(t.playIntended=e)}},{key:"setKeyLatency",value:function(e){var t=this._trackingData;t&&(t.msKeyLatency=e)}},{key:"setMemoryCached",value:function(e){var t=this._trackingData;t&&(t.memoryCached=e)}},{key:"setPersistentCached",value:function(e){var t=this._trackingData;t&&(t.persistentCached=e)}},{key:"setProtected",value:function(e){var t=this._trackingData;t&&(t.isProtected=e)}},{key:"setHadError",value:function(e){var t=this._trackingData;t&&(t.hadError=e)}},{key:"setLicenseSessionLatency",value:function(e){var t=this._trackingData;t&&(t.msLicenseSessionLatency=e)}},{key:"setLicenseGenerationLatency",value:function(e){var t=this._trackingData;t&&(t.msLicenseGenerationLatency=e)}},{key:"setLicenseRequestLatency",value:function(e){var t=this._trackingData;t&&(t.msLicenseRequestLatency=e)}},{key:"setLicenseUpdateLatency",value:function(e){var t=this._trackingData;t&&(t.msLicenseUpdateLatency=e)}},{key:"setResolveLatency",value:function(e){var t=this._trackingData;t&&(t.msResolveLatency=e)}},{key:"setCalculatedDuration",value:function(e){var t=this._trackingData;t&&(t.msFileDuration=e)}},{key:"setPlayedThreshold",value:function(e){this._playedThreshold=e}},{key:"setBandwidth",value:function(e){var t=this._trackingData;t&&((e<t.bpsBandwidthMin||!t.bpsBandwidthMin)&&(t.bpsBandwidthMin=e),e>t.bpsBandwidthMax&&(t.bpsBandwidthMax=e),t.totalBandwidth+=e,t.nBandwidthSamples++)}},{key:"setRenditionCount",value:function(e){var t=this._trackingData;t&&(e<t.lastVideoProfileBitrate&&t.nRenditionDowngrade++,e>t.lastVideoProfileBitrate&&t.nRenditionUpgrade++,t.lastVideoProfileBitrate=e)}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ga=function(e){(0,p.Z)(n,e);var t=ma(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._transport=e,r._parseManifestResponse=r._parseManifestResponse.bind((0,u.Z)(r)),r}return(0,d.Z)(n,[{key:"_parseManifestResponse",value:function(e){var t,n=e.metadata.startTime;if(200!==e.status){var r=new ia(Z.STORAGE_VIDEO_MANIFEST_FAILED,"Video manifest request failed with status ".concat(e.status));return r.status=e.status,this.emit(ot.VIDEO_MANIFEST_RESOLVE_FAILED,{url:e.url,error:r,start_time:n}),Promise.reject(r)}var a=e.body,o=null===(t=e.headers)||void 0===t?void 0:t.get("content-length");return this.emit(ot.VIDEO_MANIFEST_RESOLVED,{url:e.url,manifest_size:o?parseInt(o,10):JSON.stringify(a).length,start_time:n,end_time:Date.now()}),Promise.resolve(a)}},{key:"getInitSegmentURLs",value:function(e,t,n,r){var a="";n&&(a=e+t.replace("{{profile_id}}",n.id.toString(10)).replace("{{file_type}}",n.file_type));var o="";return r&&(o=e+t.replace("{{profile_id}}",r.id.toString(10)).replace("{{file_type}}",r.file_type)),{audio:a,video:o,audioLogging:a,videoLogging:o}}},{key:"getSegmentURLs",value:function(e,t,n,r,a){var o="";r&&(o=e+t.replace("{{profile_id}}",r.id.toString(10)).replace("{{file_type}}",r.file_type));var i="";return a&&(i=e+t.replace("{{profile_id}}",a.id.toString(10)).replace("{{file_type}}",a.file_type)),{audio:o.replace("{{segment_timestamp}}",n.toString()),video:i.replace("{{segment_timestamp}}",n.toString()),audioLogging:o,videoLogging:i}}},{key:"getManifest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"@webgate/manifests/v8/unauth/json/sources":"@webgate/manifests/v7/json/sources",r="".concat(n,"/").concat(e,"/options/supports_drm");return this._transport.request(r,{authorize:!t,responseType:"json",parseResponseHeaders:!0,retry:{condition:function(e,t){return e.getStatusFamily()!==t.SUCCESS}},metadata:{startTime:Date.now()}}).then(this._parseManifestResponse)}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ba,Ea,wa=function(e){(0,p.Z)(n,e);var t=va(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this)).status=-1,a.debug={},a.canPlayNext=!0,a.unrecoverable=!1,a.name="LicenseError",a.code=e,a.message=r,a}return(0,d.Z)(n,null,[{key:"fatal",value:function(e,t){var r=new n(e,t);return r.unrecoverable=!0,r.canPlayNext=!1,r}}]),n}((0,ae.Z)(Error)),Sa=function(){function e(t){var n=this;(0,c.Z)(this,e),this._sdk={name:"",version:""},this._securityLevel=null,this._urls={},t.sdk&&(this._sdk=t.sdk),t.securityLevel&&(this._securityLevel=t.securityLevel),this._transport=t.transport,this._useTestLicenseServer=!!t.useTestLicenseServer,this._transport.on(this._transport.EVENT_CONNECTION_ID,(function(){n._urls={}}))}return(0,d.Z)(e,[{key:"get",value:function(e,t){var n=this,r="".concat(e,":").concat(t),a=this._urls[r];if(a&&a.expires>Date.now()+6e4)return Promise.resolve(a.uri);var o=this._useTestLicenseServer?"&use_test_license_server=true":"",i="".concat("@webgate/melody/v1/license_url","?keysystem=").concat(e,"&mediatype=").concat(t,"&sdk_name=").concat(this._sdk.name,"&sdk_version=").concat(this._sdk.version).concat(o);return this._transport.request(i,{responseType:"json",retry:{condition:function(e,t){var n=e.getStatusFamily();return n===t.SERVER_ERROR||n===t.CONNECTION_ERROR}}}).then((function(e){var t,a=e.body;return a&&200===e.status?(a.expires*=1e3,a.uri="@webgate/".concat(a.uri),n._securityLevel&&(a.uri+=[-1!==a.uri.indexOf("?")?"&":"?","sl=",n._securityLevel].join("")),n._urls[r]=a,a.uri):((t=a?400===e.status&&a&&"deprecated-version"===a.code?wa.fatal(Z.LICENSE_RESOLVER_DEPRECATED_VERSION,"This version of the SDK is no longer supported. Please upgrade"):new wa(Z.LICENSE_RESOLVER_CANT_RESOLVE_URL,"License URL endpoint responded with status ".concat(e.status)):wa.fatal(Z.LICENSE_RESOLVE_INVALID_RESPONSE,"License URL endpoint responded with invalid response")).status=e.status,Promise.reject(t))}))}},{key:"remove",value:function(e,t){this._urls["".concat(e,":").concat(t)]=null}}]),e}(),ka=function(){function e(t){(0,c.Z)(this,e),this._melodyLogger=new zr(t)}return(0,d.Z)(e,[{key:"logTrackStreamVerification",value:function(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"track_stream_verification",message:e},{batch:!0})}},{key:"logJSSDKPlaybackStats",value:function(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_playback_stats",message:e},{batch:!0})}},{key:"logJSSDKPlaybackStart",value:function(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_playback_start",message:e},{batch:!0})}},{key:"logJSSDKError",value:function(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_error",message:e},{batch:!0})}},{key:"logJSSDKWarning",value:function(e){return this._melodyLogger.sendLog("/v1/msg/batch",{type:"jssdk_warning",message:e},{batch:!0})}}]),e}();!function(e){e[e.ABORTED=101]="ABORTED",e[e.NETWORK=102]="NETWORK",e[e.MEDIA_DECODING=103]="MEDIA_DECODING",e[e.SRC_NOT_SUPPORTED=104]="SRC_NOT_SUPPORTED",e[e.EME=105]="EME",e[e.GENERIC=100]="GENERIC"}(Ea||(Ea={}));var Ra,Pa=(ba={},(0,r.Z)(ba,Z.MEDIA_ABORTED,Ea.ABORTED),(0,r.Z)(ba,Z.MEDIA_DECODING_ERROR,Ea.MEDIA_DECODING),(0,r.Z)(ba,Z.MEDIA_NOT_SUPPORTED,Ea.SRC_NOT_SUPPORTED),(0,r.Z)(ba,Z.MEDIA_NETWORK_ERROR,Ea.NETWORK),ba);function Ta(e){var t=Pa[e];return/_REQUEST_|_RESPONSE$/.test(e)?t=Ea.NETWORK:t||(t=/^EME_/.test(e)?Ea.EME:Ea.GENERIC),t}function Aa(e){var t,n=e.match(/^https?:\/\/([^\/]+@)?([^\/?#]+)/);return null!==(t=null==n?void 0:n[2])&&void 0!==t?t:""}!function(e){e.READY="playerready",e.VIDEO_CHANGE="videochange",e.PLAY="play",e.PLAYING="playing",e.PAUSE="pause",e.TIMEUPDATE="timeupdate",e.SEEKING="seeking",e.SEEKED="seeked",e.ERROR="error",e.ENDED="ended",e.RENDITION_CHANGE="renditionchange",e.REQUEST_COMPLETED="requestcompleted",e.REQUEST_FAILED="requestfailed",e.REQUEST_CANCELED="requestcanceled"}(Ra||(Ra={}));var Ca,Ia,La,Oa,Da,Na,ja={player_is_paused:!0,player_width:0,player_height:0,video_source_height:0,video_source_width:0,player_is_fullscreen:void 0,player_autoplay_on:void 0,player_preload_on:void 0,video_source_url:void 0,video_source_mime_type:void 0,video_source_duration:void 0,video_poster_url:void 0,player_language_code:void 0},Ma=function(){function e(t){(0,c.Z)(this,e),this._playerId="spotify-playback-".concat(Date.now()),this._currentContentInfo=null,this._readyDeferred=yt(),this._isMuxInitialized=!1,this._muxInitData=null,this._player=t.player,this._mux=t.mux,this._getPlayheadTime=this._getPlayheadTime.bind(this),this._getStateData=this._getStateData.bind(this),this._init(t)}return(0,d.Z)(e,[{key:"_init",value:function(e){var t=this;Promise.all([Promise.resolve(e.deviceInfo)]).then((function(n){var a,o,i=(0,Q.Z)(n,1)[0];t._muxInitData={data:Object.assign({env_key:e.envKey||"2qbjhhcl4u87btjbo7dh8vi2n",player_name:null!==(o=null==i?void 0:i.platform_name)&&void 0!==o?o:null==i?void 0:i.platform,player_version:null==i?void 0:i.version,viewer_device_manufacturer:null==i?void 0:i.brand,viewer_device_category:null==i?void 0:i.type,viewer_device_name:null==i?void 0:i.model,player_software_name:e.sdk||"spotify-playback",player_software_version:e.sdkVersion||Jr,player_mux_plugin_name:"spotify-playback-mux-reporter",player_mux_plugin_version:Jr},e.muxCustomDimensions),getPlayheadTime:t._getPlayheadTime,getStateData:t._getStateData},t._player.addListeners((a={},(0,r.Z)(a,ot.PLAYER_BEFORE_LOAD,t._onBeforeLoad.bind(t)),(0,r.Z)(a,ot.PLAYER_PLAY,t._onPlay.bind(t)),(0,r.Z)(a,ot.PLAYER_PLAYING,t._onPlaying.bind(t)),(0,r.Z)(a,ot.PLAYER_PAUSED,t._onPause.bind(t)),(0,r.Z)(a,ot.PLAYER_PROGRESS,t._onProgress.bind(t)),(0,r.Z)(a,ot.PLAYER_SEEKING,t._onSeeking.bind(t)),(0,r.Z)(a,ot.PLAYER_POSITION_CHANGED,t._onPositionChanged.bind(t)),(0,r.Z)(a,ot.PLAYER_ERROR,t._onError.bind(t)),(0,r.Z)(a,ot.PLAYER_ENDED,t._onEnded.bind(t)),(0,r.Z)(a,ot.PLAYER_DURATION_CHANGED,t._onDurationChanged.bind(t)),(0,r.Z)(a,ot.PLAYER_VIDEO_RESIZED,t._onVideoResized.bind(t)),(0,r.Z)(a,ot.PLAYER_VIDEO_PROFILE_CHANGED,t._onVideoProfileChanged.bind(t)),(0,r.Z)(a,ot.PLAYER_FRAGMENT_FETCHED,t._onFragmentFetched.bind(t)),(0,r.Z)(a,ot.PLAYER_FRAGMENT_FETCH_ERROR,t._onFragmentFetchError.bind(t)),(0,r.Z)(a,ot.PLAYER_VIDEO_MANIFEST_RESOLVED,t._onVideoManifestResolved.bind(t)),(0,r.Z)(a,ot.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED,t._onVideoManifestResolveFailed.bind(t)),a))})).then(this._readyDeferred.resolve,this._readyDeferred.reject)}},{key:"_getPlayheadTime",value:function(){return this._player.getPlayerPosition()}},{key:"_getStateData",value:function(){return this._currentContentInfo?Object.assign(Object.assign({},this._currentContentInfo.stateData),{player_language_code:this._player.getActiveSubtitleLanguage()}):null}},{key:"_onDurationChanged",value:function(e){this._currentContentInfo&&(this._currentContentInfo.stateData.video_source_duration=e.data.duration)}},{key:"_onVideoResized",value:function(e){this._currentContentInfo&&(this._currentContentInfo.stateData.player_width=e.data.width,this._currentContentInfo.stateData.player_height=e.data.height)}},{key:"_onBeforeLoad",value:function(e){var t=e.data,n=t.track,r=t.options,a=t.logData,o=!!this._currentContentInfo;if("video"!==n.mediaType||(null==a?void 0:a.noLog)||(null==a?void 0:a.noMuxEvents))return o&&this._mux.emit(this._playerId,Ra.VIDEO_CHANGE,{}),void(this._currentContentInfo=null);var i={video_id:n.fileId,video_title:(null==a?void 0:a.displayTitle)||void 0,video_series:(null==a?void 0:a.displayGroup)||void 0,video_duration:(null==a?void 0:a.displayDuration)||void 0},s=Object.assign({},ja);this._currentContentInfo={track:n,options:r,videoData:i,stateData:s},!this._isMuxInitialized&&this._muxInitData?(this._mux.init(this._playerId,this._muxInitData),this._mux.emit(this._playerId,Ra.READY),this._isMuxInitialized=!0):o&&this._mux.emit(this._playerId,Ra.VIDEO_CHANGE,i)}},{key:"_onPlay",value:function(){var e,t;if(this._currentContentInfo){var n=this._currentContentInfo.stateData,r=this._player.getPlayerState(),a=r.media_info,o=(null===(t=null===(e=this._currentContentInfo)||void 0===e?void 0:e.options)||void 0===t?void 0:t.autoplay)||!1,i=r.player_element,s=i.width,l=i.height,c=i.src,d=i.poster;n.player_is_paused=!r.playing,n.player_width=s||0,n.player_height=l||0,n.video_source_height=a.video_height||0,n.video_source_width=a.video_width||0,n.player_autoplay_on=o,n.video_source_url=c,n.video_source_mime_type=a.video_format,n.video_source_duration=r.duration,n.video_poster_url=d,this._mux.emit(this._playerId,Ra.PLAY,this._currentContentInfo.videoData)}}},{key:"_onPlaying",value:function(){this._currentContentInfo&&(this._currentContentInfo.stateData.player_is_paused=!1,this._mux.emit(this._playerId,Ra.PLAYING))}},{key:"_onPause",value:function(){this._currentContentInfo&&(this._currentContentInfo.stateData.player_is_paused=!0,this._mux.emit(this._playerId,Ra.PAUSE))}},{key:"_onProgress",value:function(e){this._currentContentInfo&&this._mux.emit(this._playerId,Ra.TIMEUPDATE,{player_playhead_time:e.data.position})}},{key:"_onSeeking",value:function(){this._currentContentInfo&&this._mux.emit(this._playerId,Ra.SEEKING)}},{key:"_onPositionChanged",value:function(){this._currentContentInfo&&this._mux.emit(this._playerId,Ra.SEEKED)}},{key:"_onError",value:function(e){var t,n,r=null===(n=null===(t=e.data)||void 0===t?void 0:t.error)||void 0===n?void 0:n.code;this._currentContentInfo&&r&&this._mux.emit(this._playerId,Ra.ERROR,{player_error_code:Ta(r),player_error_message:r})}},{key:"_onEnded",value:function(){this._currentContentInfo&&this._mux.emit(this._playerId,Ra.ENDED)}},{key:"_onVideoProfileChanged",value:function(e){if(this._currentContentInfo){var t=e.data.profile,n=this._currentContentInfo.stateData;n.video_source_height=t.height||0,n.video_source_width=t.width||0,n.video_source_mime_type=t.mimeType,this._mux.emit(this._playerId,Ra.RENDITION_CHANGE,{video_source_bitrate:t.bitrate,video_source_width:t.width,video_source_height:t.height})}}},{key:"_onFragmentFetched",value:function(e){var t=e.data;if(this._currentContentInfo||"video"===t.media_type){var n="".concat(t.segment_type).concat(t.init?"_init":"");this._mux.emit(this._playerId,Ra.REQUEST_COMPLETED,{request_type:n,request_hostname:Aa(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.byte_length})}}},{key:"_onFragmentFetchError",value:function(e){var t=e.data;if(this._currentContentInfo||"video"===t.media_type){var n="".concat(t.segment_type).concat(t.init?"_init":"");this._mux.emit(this._playerId,Ra.REQUEST_FAILED,{request_type:n,request_hostname:Aa(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}}},{key:"_onVideoManifestResolved",value:function(e){var t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,Ra.REQUEST_COMPLETED,{request_type:"manifest",request_hostname:Aa(t.url),request_start:t.start_time,request_response_end:t.end_time,request_bytes_loaded:t.manifest_size})}},{key:"_onVideoManifestResolveFailed",value:function(e){var t=e.data;this._currentContentInfo&&this._mux.emit(this._playerId,Ra.REQUEST_FAILED,{request_type:"manifest",request_hostname:Aa(t.url),request_start:t.start_time,request_error:t.error.code,request_error_code:t.error.status,request_error_text:""})}},{key:"ready",value:function(){return this._readyDeferred.promise}}],[{key:"create",value:function(t){return new e(t)}}]),e}();function xa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}!function(e){e.NULL_VALUE="NULL_VALUE",e.LIST_START="LIST_START",e.LIST_END="LIST_END",e.FORBIDDEN="FORBIDDEN",e.IGNORE="IGNORE",e.PAUSE="PAUSE"}(Ca||(Ca={})),function(e){e.MP4_AUDIO="audio/mp4",e.MP4_VIDEO="video/mp4",e.MTS_VIDEO="video/mp2t",e.WEBM_AUDIO="audio/webm",e.WEBM_VIDEO="video/webm"}(Ia||(Ia={})),function(e){e.AAC_LC="mp4a.40.2",e.FLAC="flac",e.OPUS="opus",e.VP9="vp9",e.VP8="vp8",e.H264_31="avc1.4d401f"}(La||(La={})),function(e){e.UNKNOWN="UNKNOWN",e.DEFAULT="DEFAULT",e.LOW="LOW",e.NORMAL="NORMAL",e.HIGH="HIGH",e.VERY_HIGH="VERY_HIGH",e.HIFI="HIFI"}(Oa||(Oa={})),function(e){e.NONE="NONE",e.CONTEXT="CONTEXT",e.TRACK="TRACK"}(Da||(Da={})),function(e){e.EMPTY="EMPTY",e.SW_CRYPTO="SW_CRYPTO",e.SW_DECODE="SW_DECODE",e.HW_CRYPTO="HW_CRYPTO",e.HW_DECODE="HW_DECODE",e.HW_ALL="HW_ALL"}(Na||(Na={}));var Ua=function(e){(0,p.Z)(n,e);var t=xa(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this)).unrecoverable=!1,a.listPlayerIgnore=!1,a.debug={},a.name="PlaybackError",a.code=e,a.message=r,a}return(0,d.Z)(n,null,[{key:"fatal",value:function(e,t){var r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,ae.Z)(Error));function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function Za(e){return"uri"in e}var Ba=function(e){(0,p.Z)(n,e);var t=Fa(n);function n(e){var r;if((0,c.Z)(this,n),(r=t.call(this))._trackPlayerPromise=yt(),r._maxListErrors=5,r._uid=0,r._loadedList=null,r._loadedOptions=null,r._currentTrack=null,r._currentTrackOptions=null,r._listPlayCount=0,r._listErrorCount=0,r._shuffled=!1,r._repeatMode=Da.NONE,r._currentSeqId=0,!e.trackPlayer)throw new TypeError("Argument `options.trackPlayerManager` not found.");return e.maxListErrors&&(r._maxListErrors=e.maxListErrors),r._setListOptions=r._setListOptions.bind((0,u.Z)(r)),r._replaceCurrentList=r._replaceCurrentList.bind((0,u.Z)(r)),r._handleCapped=r._handleCapped.bind((0,u.Z)(r)),r._handlePlaying=r._handlePlaying.bind((0,u.Z)(r)),r._handlePaused=r._handlePaused.bind((0,u.Z)(r)),r._handleEnded=r._handleEnded.bind((0,u.Z)(r)),r._handleCanPreload=r._handleCanPreload.bind((0,u.Z)(r)),r._handleError=r._handleError.bind((0,u.Z)(r)),r._handlePositionChanged=r._handlePositionChanged.bind((0,u.Z)(r)),r._handleDurationChanged=r._handleDurationChanged.bind((0,u.Z)(r)),r._handleTimeout=r._handleTimeout.bind((0,u.Z)(r)),r._handlePlayerInitError=r._handlePlayerInitError.bind((0,u.Z)(r)),r._handleProgress=r._handleProgress.bind((0,u.Z)(r)),r._handlePlayedThresholdReached=r._handlePlayedThresholdReached.bind((0,u.Z)(r)),r._handleBeforeLoad=r._handleBeforeLoad.bind((0,u.Z)(r)),r._init(e.trackPlayer),r}return(0,d.Z)(n,[{key:"_init",value:function(e){var t=this;this._trackPlayerPromise.promise.catch((function(){})),Promise.resolve(e).then((function(e){t._attachPlayerEvents(e),t._trackPlayerPromise.resolve(e)})).catch(this._handlePlayerInitError)}},{key:"_attachPlayerEvents",value:function(e){var t,n,a;e.addListeners((t={},(0,r.Z)(t,ot.PLAYER_CAN_PRELOAD,this._handleCanPreload),(0,r.Z)(t,ot.PLAYER_CAPPED,this._handleCapped),(0,r.Z)(t,ot.PLAYER_ENDED,this._handleEnded),(0,r.Z)(t,ot.PLAYER_ERROR,this._handleError),(0,r.Z)(t,ot.PLAYER_PAUSED,this._handlePaused),(0,r.Z)(t,ot.PLAYER_PLAYING,this._handlePlaying),(0,r.Z)(t,ot.PLAYER_TIMEOUT,this._handleTimeout),(0,r.Z)(t,ot.PLAYER_POSITION_CHANGED,this._handlePositionChanged),(0,r.Z)(t,ot.PLAYER_DURATION_CHANGED,this._handleDurationChanged),(0,r.Z)(t,ot.PLAYER_PROGRESS,this._handleProgress),(0,r.Z)(t,ot.PLAYER_BEFORE_LOAD,this._handleBeforeLoad),(0,r.Z)(t,ot.PLAYER_PLAYED_THRESHOLD_REACHED,this._handlePlayedThresholdReached),t)),this.proxyEmitAllSync(e,(n={},(0,r.Z)(n,ot.PLAYER_BEFORE_VOLUME_CHANGE,ot.LIST_PLAYER_BEFORE_VOLUME_CHANGE),(0,r.Z)(n,ot.PLAYER_LOAD,ot.LIST_PLAYER_PLAYER_LOAD),n)),this.proxyEmitAll(e,(a={},(0,r.Z)(a,ot.PLAYER_AUTOPLAY_FAILED,ot.LIST_PLAYER_AUTOPLAY_FAILED),(0,r.Z)(a,ot.PLAYER_TRACKING_DATA_CREATED,ot.LIST_PLAYER_TRACKING_DATA_CREATED),(0,r.Z)(a,ot.PLAYER_TRACKING_DATA_FINALIZED,ot.LIST_PLAYER_TRACKING_DATA_FINALIZED),(0,r.Z)(a,ot.PLAYER_BUFFER_STALLED,ot.LIST_PLAYER_BUFFER_STALLED),(0,r.Z)(a,ot.PLAYER_BUFFERING_START,ot.LIST_PLAYER_BUFFERING_START),(0,r.Z)(a,ot.PLAYER_BUFFERING_END,ot.LIST_PLAYER_BUFFERING_END),(0,r.Z)(a,ot.PLAYER_VIDEO_ELEMENT_APPENDED,ot.LIST_PLAYER_VIDEO_ELEMENT_APPENDED),(0,r.Z)(a,ot.PLAYER_VIDEO_ELEMENT_REMOVED,ot.LIST_PLAYER_VIDEO_ELEMENT_REMOVED),(0,r.Z)(a,ot.PLAYER_DISPLAYED_CUES_CHANGED,ot.LIST_PLAYER_DISPLAYED_CUES_CHANGED),(0,r.Z)(a,ot.LIST_PLAYER_VIDEO_PROFILE_CHANGED,ot.PLAYER_VIDEO_PROFILE_CHANGED),(0,r.Z)(a,ot.LIST_PLAYER_PLAYBACK_SPEED_CHANGED,ot.PLAYER_PLAYBACK_SPEED_CHANGED),(0,r.Z)(a,ot.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED,ot.PLAYER_SUBTITLE_LANGUAGES_LOADED),a))}},{key:"_translatePosition",value:function(e){var t,n,r;return null!==(r=null===(n=null===(t=this._loadedList)||void 0===t?void 0:t.translatePosition)||void 0===n?void 0:n.call(t,e))&&void 0!==r?r:e}},{key:"_translateDuration",value:function(e){var t,n,r;return null!==(r=null===(n=null===(t=this._loadedList)||void 0===t?void 0:t.translateDuration)||void 0===n?void 0:n.call(t,e))&&void 0!==r?r:e}},{key:"_handleProgress",value:function(e){var t=e.data;this.emit(ot.LIST_PLAYER_PROGRESS,Object.assign(Object.assign({},t),{position:this._translatePosition(t.position)}))}},{key:"_handleBeforeLoad",value:function(e){var t=e.data;this.emit(ot.LIST_PLAYER_BEFORE_PLAYER_LOAD,Object.assign(Object.assign({},t),{options:Object.assign(Object.assign({},t.options),{position:this._translatePosition(t.options.position)})}))}},{key:"_handlePlayerInitError",value:function(e){this._trackPlayerPromise.reject(new Ua(Z.LIST_PLAYER_NO_TRACK_PLAYER,e.message||"Track player promise was rejected."))}},{key:"_handleCapped",value:function(){var e=this._currentTrack;e&&this.emit(ot.LIST_PLAYER_CAPPED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList})}},{key:"_handlePlaying",value:function(e){var t=this._currentTrack;t&&this.emit(ot.LIST_PLAYER_PLAYING,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}},{key:"_handlePaused",value:function(e){var t=this._currentTrack;t&&this.emit(ot.LIST_PLAYER_PAUSED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}},{key:"_handleCanPreload",value:function(){this._preloadUpcomingTrack().catch((function(){}))}},{key:"_handleEnded",value:function(){var e=this._currentTrack;e&&(this.emit(ot.LIST_PLAYER_TRACK_ENDED,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(z.TRACK_DONE))}},{key:"_handleTimeout",value:function(){var e=this._currentTrack;e&&(this.emit(ot.LIST_PLAYER_TRACK_TIMEOUT,{uid:this._uid,track:e,options:this._currentTrackOptions,list:this._loadedList}),this.next(z.TRACK_ERROR))}},{key:"_handlePositionChanged",value:function(e){var t=this._currentTrack;t&&this.emit(ot.LIST_PLAYER_POSITION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position)})}},{key:"_handleDurationChanged",value:function(e){var t=this._currentTrack;t&&this.emit(ot.LIST_PLAYER_DURATION_CHANGED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,position:this._translatePosition(e.data.position),duration:this._translateDuration(e.data.duration)})}},{key:"_handlePlayedThresholdReached",value:function(e){var t=this._currentTrack;t&&this.emit(ot.LIST_PLAYER_PLAYED_THRESHOLD_REACHED,{uid:this._uid,track:t,options:this._currentTrackOptions,list:this._loadedList,threshold:e.data.threshold,position:this._translatePosition(e.data.position)})}},{key:"_handleError",value:function(e){var t=this._currentTrack,n=e.data;if(t){n.position=this._translatePosition(e.data.position),this.emit(ot.LIST_PLAYER_ERROR,n),this.emitSync(ot.LIST_PLAYER_ERROR_SYNC,n);var r=!!n.error&&n.error.listPlayerIgnore;r||this._listErrorCount++,n.canPlayNext&&(r||this._listErrorCount<=this._maxListErrors?this.next(z.TRACK_ERROR):this.emit(ot.LIST_PLAYER_MAX_LIST_ERRORS_REACHED,{count:this._listErrorCount,threshold:this._maxListErrors}))}}},{key:"_handleTrackLoaded",value:function(e){this.emitSync(ot.LIST_PLAYER_TRACK_LOADED,e)}},{key:"_incrementSeqId",value:function(){return this._currentSeqId>=9007199254740991?this._currentSeqId=0:this._currentSeqId+=1,this._currentSeqId}},{key:"_getTrackPlayer",value:function(){return this._trackPlayerPromise.promise}},{key:"_setListIndex",value:function(e,t){var n=t.index&&-1!==t.index?t.index:0;return Promise.all([e,t,e.startAt(n)])}},{key:"_setListOptions",value:function(e){var t=(0,Q.Z)(e,3),n=t[0],r=t[1];t[2];return Promise.all([n.setShuffle(!!this._shuffled),n.setRepeatMode(this._repeatMode)]).then((function(){return[n,r]}))}},{key:"_replaceCurrentList",value:function(e){var t=(0,Q.Z)(e,2),n=t[0],r=t[1];return this.emitSync(ot.LIST_PLAYER_BEFORE_LIST_CHANGE,{newList:n,newOptions:r,oldList:this._loadedList,oldOptions:this._loadedOptions}),this._loadedList=n,this._loadedOptions=r,this._listPlayCount=0,this._listErrorCount=0,this.emit(ot.LIST_PLAYER_LIST_CHANGED,{list:n,options:r}),st.SUCCESS}},{key:"_preloadTrack",value:function(e){return this._getTrackPlayer().then((function(t){return t.preload(e).catch((function(){})),st.SUCCESS}))}},{key:"_changeTrack",value:function(e,t,n){var r=this;if(this._currentSeqId!==n)return Promise.resolve(st.CANCELLED);this.emitSync(ot.LIST_PLAYER_BEFORE_TRACK_LOAD,{list:this._loadedList,newTrack:e,oldTrack:this._currentTrack}),this._uid++;var a=++this._listPlayCount,o=this._loadedOptions,i=!0,s=0,l=3e4;o&&(1===a?(i=!o.paused,s=o.initialPosition||o.position||0):s=o.position||0);var c=t===z.TRACK_DONE;if(e.options){var d=e.options;void 0!==d.paused&&(i=!d.paused),void 0!==d.position&&(s=d.position),void 0!==d.playedThreshold&&(l=d.playedThreshold)}this._currentTrack=e,this._currentTrackOptions={reason:t,paused:!i,position:s,playedThreshold:l};var u=this._handleTrackLoaded.bind(this,{uid:this._uid,track:this._currentTrack,options:this._currentTrackOptions,list:this._loadedList});return this._getTrackPlayer().then((function(t){return r._currentSeqId!==n?st.CANCELLED:(Promise.resolve(t.load(e,{uriProperty:"playableURI",autoplay:i,position:s,playedThreshold:l,continuePrevious:c},u)).catch((function(){})),st.SUCCESS)}))}},{key:"_preloadUpcomingTrack",value:function(){var e=this,t=this._loadedList;if(!t)return Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));var n={reason:z.TRACK_DONE,listConstants:Ca};return t.peekNext(n).then((function(t){return t===Ca.FORBIDDEN?st.FORBIDDEN:t===Ca.NULL_VALUE?e._preloadUpcomingTrack():t===Ca.LIST_END?st.LIST_END:Za(t)&&t.playable?e._preloadTrack(t):st.INVALID}))}},{key:"activateElement",value:function(){return this._getTrackPlayer().then((function(e){return e.activateElement(),st.SUCCESS}))}},{key:"load",value:function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={index:-1,position:0,initialPosition:0,duration:-1,paused:!1,reason:z.UNKNOWN};return void 0!==e.index&&(t.index=e.index),void 0!==e.position&&(t.position=e.position),void 0!==e.initialPosition&&(t.initialPosition=e.initialPosition),void 0!==e.duration&&(t.duration=e.duration),void 0!==e.paused&&(t.paused=e.paused),void 0!==e.reason&&(t.reason=e.reason),t}(t||this._loadedOptions||{});return this._setListIndex(e,n).then(this._setListOptions).then(this._replaceCurrentList)}},{key:"play",value:function(e,t){var n=this;return this.load(e,t).then((function(){if(n._loadedList!==e)return st.CANCELLED;var t=n._loadedOptions?n._loadedOptions.reason:z.UNKNOWN;return n.next(t)}))}},{key:"canChangeTrack",value:function(){return this._loadedList?this._loadedList.peekNext({reason:z.FORWARD_BUTTON,listConstants:Ca}).then((function(e){return e!==Ca.FORBIDDEN})):Promise.resolve(!0)}},{key:"next",value:function(e){var t=this;if(!e)return Promise.reject(new Ua(Z.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));var n=this._loadedList;if(!n)return Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(ot.LIST_PLAYER_BEFORE_NEXT,{list:n,reason:e});var r=this._incrementSeqId(),a={reason:e,listConstants:Ca};return n.next(a).then((function(a){return t._currentSeqId!==r?st.CANCELLED:a===Ca.FORBIDDEN?st.FORBIDDEN:a===Ca.NULL_VALUE?t.next(e):a===Ca.LIST_END?(t.emit(ot.LIST_PLAYER_LIST_ENDED,{list:n,reason:z.END_PLAY}),t.clear(e),st.LIST_END):Za(a)?a.playable?t._changeTrack(a,e,r):(t.emit(ot.LIST_PLAYER_TRACK_UNPLAYABLE,{track:a,list:n}),t.next(e)):st.INVALID}))}},{key:"previous",value:function(e){var t=this;if(!e)return Promise.reject(new Ua(Z.LIST_PLAYER_INVALID_ARGUMENT,"The argument `reason` is required."));var n=this._loadedList;if(!n)return Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));this.emitSync(ot.LIST_PLAYER_BEFORE_PREVIOUS,{list:n,reason:e});var r=this._incrementSeqId(),a={reason:e,listConstants:Ca};return n.previous(a).then((function(a){return t._currentSeqId!==r?st.CANCELLED:a===Ca.FORBIDDEN?st.FORBIDDEN:a===Ca.NULL_VALUE?t.previous(e):a===Ca.LIST_START?(t.emit(ot.LIST_PLAYER_LIST_ENDED,{list:n,reason:z.END_PLAY}),t.clear(e),st.LIST_END):Za(a)?a.playable?t._changeTrack(a,e,r):(t.emit(ot.LIST_PLAYER_TRACK_UNPLAYABLE,{track:a,list:n}),t.previous(e)):st.INVALID}))}},{key:"pause",value:function(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((function(e){return e.pause().then((function(){return st.SUCCESS})).catch((function(e){return"AbortError"===(null==e?void 0:e.name)?st.CANCELLED:st.FORBIDDEN}))})):Promise.resolve(st.SUCCESS):Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}},{key:"resume",value:function(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((function(e){return e.resume().then((function(){return st.SUCCESS})).catch((function(e){return"AbortError"===(null==e?void 0:e.name)?st.CANCELLED:st.FORBIDDEN}))})):Promise.resolve(st.SUCCESS):Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}},{key:"togglePlay",value:function(){return this._loadedList?this._currentTrack?this._getTrackPlayer().then((function(e){return e.togglePlay().then((function(){return st.SUCCESS})).catch((function(e){return"AbortError"===(null==e?void 0:e.name)?st.CANCELLED:st.FORBIDDEN}))})):Promise.resolve(st.SUCCESS):Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."))}},{key:"stop",value:function(e){var t=this,n={reason:e||z.UNKNOWN},r=this._currentTrack;return r&&r.logData&&(n.source=r.logData.source),this._incrementSeqId(),this._getTrackPlayer().then((function(e){return e.stop(n),t.emit(ot.LIST_PLAYER_STOPPED,{uid:t._uid,options:t._currentTrackOptions,list:t._loadedList}),st.SUCCESS}))}},{key:"clear",value:function(e){var t=this;return this.stop(e).then((function(){return t._loadedList=null,t._loadedOptions=null,t._currentTrack=null,t._currentTrackOptions=null,t.emit(ot.LIST_PLAYER_CLEARED,null),st.SUCCESS}))}},{key:"setShuffle",value:function(e){var t=!!e;if(this._shuffled!==t){this._shuffled=t,this.emit(ot.LIST_PLAYER_SHUFFLE_CHANGED,{player:this,shuffled:t});var n=this._loadedList;n&&n.setShuffle(this._shuffled)}return Promise.resolve(st.SUCCESS)}},{key:"setRepeatMode",value:function(e){if(!(e in Da))return Promise.reject(new Ua(Z.LIST_PLAYER_INVALID_ARGUMENT,"The value of repeat mode is not a correct RepeatMode enum value"));if(this._repeatMode!==e){this._repeatMode=e,this.emit(ot.LIST_PLAYER_REPEAT_MODE_CHANGED,{player:this,repeatMode:e});var t=this._loadedList;t&&t.setRepeatMode(this._repeatMode)}return Promise.resolve(st.SUCCESS)}},{key:"getVolume",value:function(){return this._getTrackPlayer().then((function(e){return e.getVolume()}))}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._getTrackPlayer().then((function(r){return r.setVolume(e,{commandId:null!=n?n:void 0}),t.emit(ot.LIST_PLAYER_VOLUME_CHANGED,{volume:e,commandId:n}),st.SUCCESS}))}},{key:"seek",value:function(e){var t,n,r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.SEEK,o=this._loadedList;if(!o)return Promise.reject(new Ua(Z.LIST_PLAYER_NO_LIST,"Cannot perform operation; no list was loaded."));if("function"==typeof o.allowSeeking&&!o.allowSeeking())return Promise.reject(new Ua(Z.LIST_PLAYER_FORBIDDEN,"The operation is not allowed."));var i=null!==(n=null===(t=o.handleSeek)||void 0===t?void 0:t.call(o,e,{reason:a,listConstants:Ca}))&&void 0!==n?n:e;return i===Ca.PAUSE?this.pause().then((function(t){return r.emit(ot.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:i}),t})):i===Ca.IGNORE?(this.emit(ot.LIST_PLAYER_SEEK_HANDLED,{position:e,reason:i}),Promise.resolve(st.SUCCESS)):this._currentTrack?this._getTrackPlayer().then((function(e){return e.seek(i),st.SUCCESS})):Promise.resolve(st.SUCCESS)}},{key:"getListConstants",value:function(){return Ca}},{key:"getLoadedList",value:function(){return this._loadedList}},{key:"getLoadedOptions",value:function(){return this._loadedOptions}},{key:"getPlayerState",value:function(){var e=this;return this._getTrackPlayer().then((function(t){var n=t.getPlayerState();return Object.assign(Object.assign({},n),{position:e._translatePosition(n.position),duration:e._translateDuration(n.duration)})}))}},{key:"getState",value:function(){var e=this;return this.getPlayerState().then((function(t){return{playbackState:t,track:e._currentTrack,list:e._loadedList,options:e._loadedOptions}}))}},{key:"getMediaConfig",value:function(){return this._getTrackPlayer().then((function(e){return e.getMediaConfig()}))}},{key:"hideSubtitles",value:function(){return this._getTrackPlayer().then((function(e){return e.hideSubtitles()})).then((function(){return st.SUCCESS}))}},{key:"showSubtitles",value:function(){return this._getTrackPlayer().then((function(e){return e.showSubtitles()})).then((function(){return st.SUCCESS}))}},{key:"areSubtitlesShown",value:function(){return this._getTrackPlayer().then((function(e){return e.areSubtitlesShown()}))}},{key:"getSubtitleLanguages",value:function(){return this._getTrackPlayer().then((function(e){return e.getSubtitleLanguages()}))}},{key:"getActiveSubtitleLanguage",value:function(){return this._getTrackPlayer().then((function(e){var t;return null!==(t=e.getActiveSubtitleLanguage())&&void 0!==t?t:null}))}},{key:"deactivateCueEvents",value:function(){return this._getTrackPlayer().then((function(e){return e.deactivateCueEvents()})).then((function(){return st.SUCCESS}))}},{key:"activateCueEvents",value:function(){return this._getTrackPlayer().then((function(e){return e.activateCueEvents()})).then((function(){return st.SUCCESS}))}},{key:"getCurrentBandwidth",value:function(){return this._getTrackPlayer().then((function(e){return e.getCurrentBandwidth()}))}},{key:"setSubtitleLanguage",value:function(e){return this._getTrackPlayer().then((function(t){return t.setSubtitleLanguage(e)})).then((function(){return st.SUCCESS}))}},{key:"setPlaybackSpeed",value:function(e){return this._getTrackPlayer().then((function(t){return t.setPlaybackSpeed(e)})).then((function(e){return e?st.SUCCESS:st.FORBIDDEN}))}},{key:"getStatistics",value:function(){return this._getTrackPlayer().then((function(e){return e.getStatistics()}))}},{key:"getAudioProcessor",value:function(){return this._getTrackPlayer().then((function(e){return e.getAudioProcessor()}))}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp),Ya=we.P.forTag("playback.init");function Ka(e){return new Promise((function(t,n){var r,a,o,i,s,l,c;if(e.transport){if("undefined"!=typeof window)("boolean"==typeof window.isSecureContext?window.isSecureContext:function(){if("undefined"==typeof window||!window.location)return!1;var e=window.location;if("https"===e.protocol||"file"===e.protocol)return!0;var t=e.hostname;return!!/^127(\.[0-255]){3}$|^locahost\.?$|\.localhost\.?$/.test(t)}())||null===(r=window.console)||void 0===r||r.warn("%cDRM might not be available from unsecure contexts","background: #222; color: #bada55; font-size: 40px");var d=e.transport,u=(e.sdkId||"").split(":"),p=(0,Q.Z)(u,2),f=p[0],h=void 0===f?"":f,_=p[1],y=void 0===_?"":_,m=Object.assign(Object.assign({},e),{tracker:ya.create(),audioResolver:new la(d),videoResolver:new ga(d),licenseURLResolver:new Sa({transport:d,sdk:{name:h,version:y},securityLevel:e.securityLevel,useTestLicenseServer:e.useTestLicenseServer}),newBufferPerTrack:null===(a=e.newBufferPerTrack)||void 0===a||a,preinitMediaElement:null===(o=e.preinitMediaElement)||void 0===o||o});e.unauthenticatedLogs&&!(null===(i=e.loggerOptions)||void 0===i?void 0:i.endpoint)&&(e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{endpoint:"https://spclient.wg.spotify.com/melody/unauth"})),(null===(s=null==e?void 0:e.loggerOptions)||void 0===s?void 0:s.deviceInfo)||Promise.all([null===(l=e.loggerOptions)||void 0===l?void 0:l.platform,null===(c=e.loggerOptions)||void 0===c?void 0:c.clientVersion]).then((function(t){var n=(0,Q.Z)(t,2),r=n[0],a=n[1];e.loggerOptions=Object.assign(Object.assign({},e.loggerOptions),{deviceInfo:{platform:r,version:a}})})),Fr.create(m).then((function(t){var n=Object.assign({disableMux:!0},e.loggerOptions),r=function(e){return new ka(e)}(Object.assign(Object.assign({},n),{transport:d,sdkId:e.sdkId,platform:Promise.resolve(n.deviceInfo).then((function(e){var t;return null!==(t=null==e?void 0:e.platform)&&void 0!==t?t:""})),clientVersion:Promise.resolve(n.deviceInfo).then((function(e){var t;return null!==(t=null==e?void 0:e.version)&&void 0!==t?t:""}))})),a=aa.create({transport:d,player:t,logSender:r});return n.disableMux||Ma.create({player:t,mux:dt,envKey:null==n?void 0:n.muxEnvKey,sdk:h,sdkVersion:y,deviceInfo:n.deviceInfo,muxCustomDimensions:n.muxCustomDimensions}).ready().then((function(){return Ya.info("MuxReporter ready")}),(function(e){return Ya.error("Failed to instantiate MuxReporter",null==e?void 0:e.message)})),{player:t,logger:a}})).then(t,n)}else n(new TypeError("Argument transport is required."))}))}function Va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Ga=function(e){(0,p.Z)(n,e);var t=Va(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._client=e.client,r._initialVolume=e.initialVolume,r._listPlayer=e.listPlayer,r._playerPromise=e.playerPromise,r._playbackServiceClient=e.playbackServiceClient,r._playbackStateObserver=e.playbackStateObserver,r._stopOnBackground=e.stopOnBackground,r._init(),r}return(0,d.Z)(n,[{key:"_init",value:function(){var e,t,n,a,o,i=this;this._client.addListeners((e={},(0,r.Z)(e,"before_disconnect",this._onClientBeforeDisconnect.bind(this)),(0,r.Z)(e,"before_offline_disconnect",this._onClientBeforeOfflineDisconnect.bind(this)),e));var s=this._listPlayer;s.addListeners((t={},(0,r.Z)(t,ot.LIST_PLAYER_CAPPED,this._onCapped.bind(this)),(0,r.Z)(t,ot.LIST_PLAYER_TRACK_ENDED,this._onTrackEnded.bind(this)),(0,r.Z)(t,ot.LIST_PLAYER_BEFORE_VOLUME_CHANGE,this._onBeforeVolumeChange.bind(this)),(0,r.Z)(t,ot.LIST_PLAYER_VOLUME_CHANGED,this._onVolumeChanged.bind(this)),(0,r.Z)(t,ot.LIST_PLAYER_ERROR,(function(e){i._onError(e,ee.PLAYBACK)})),t)),this.proxyEmitAll(s,(n={},(0,r.Z)(n,ot.LIST_PLAYER_AUTOPLAY_FAILED,"autoplay_failed"),(0,r.Z)(n,ot.LIST_PLAYER_TRACK_LOADED,"track_loaded"),(0,r.Z)(n,ot.LIST_PLAYER_DURATION_CHANGED,"duration_changed"),(0,r.Z)(n,ot.LIST_PLAYER_POSITION_CHANGED,"position_changed"),(0,r.Z)(n,ot.LIST_PLAYER_PROGRESS,"progress"),(0,r.Z)(n,ot.LIST_PLAYER_BUFFER_STALLED,"stalled"),(0,r.Z)(n,ot.LIST_PLAYER_BUFFERING_END,"buffering_end"),(0,r.Z)(n,ot.LIST_PLAYER_BUFFERING_START,"buffering_start"),(0,r.Z)(n,ot.LIST_PLAYER_MAX_LIST_ERRORS_REACHED,"max_list_errors_reached"),(0,r.Z)(n,ot.LIST_PLAYER_VIDEO_ELEMENT_APPENDED,"video_element_appended"),(0,r.Z)(n,ot.LIST_PLAYER_VIDEO_ELEMENT_REMOVED,"video_element_removed"),(0,r.Z)(n,ot.LIST_PLAYER_LIST_ENDED,"context_ended"),(0,r.Z)(n,ot.LIST_PLAYER_SEEK_HANDLED,"streamer_seek_handled"),(0,r.Z)(n,ot.LIST_PLAYER_DISPLAYED_CUES_CHANGED,"displayed_cues_changed"),(0,r.Z)(n,ot.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED,"subtitle_languages_loaded"),(0,r.Z)(n,ot.LIST_PLAYER_PLAYBACK_SPEED_CHANGED,"speed_changed"),n));var l=this._playbackServiceClient;l.addListeners((a={},(0,r.Z)(a,"logout",this._onPlaybackClientLogout.bind(this)),(0,r.Z)(a,"error",(function(e){i._onError(e,e.data.source)})),a)),this.proxyEmitAll(l,(o={},(0,r.Z)(o,"max_subscriptions_reached","max_subscriptions_reached"),(0,r.Z)(o,"deregistered","deregistered"),(0,r.Z)(o,"registered","registered"),(0,r.Z)(o,"registration_aborted","registration_aborted"),(0,r.Z)(o,"internal_endcontent","internal_endcontent"),o)),this.proxyEmit(this._playbackStateObserver,"state_changed","state_changed"),this._stopOnBackground&&document.addEventListener&&document.addEventListener("visibilitychange",(function(){document.hidden&&i.stop()&&i.emitSync("stopped_on_background",null)})),this._playerPromise.then((function(e){e.setVolume(i._initialVolume),i.emit("player_initialization_done",null)}),(function(e){i.emit("player_initialization_failed",{reason:e.message,error:e})}))}},{key:"_assertOperationSuccess",value:function(e){return e===st.SUCCESS}},{key:"_onTrackEnded",value:function(){this.emit("track_ended",null)}},{key:"_onClientBeforeDisconnect",value:function(e){e.data.awaitPromise(this.deregister().catch((function(){})))}},{key:"_onClientBeforeOfflineDisconnect",value:function(e){e.data.awaitPromise(this.pause().catch((function(){})))}},{key:"_onBeforeVolumeChange",value:function(e){var t;this.emitSync("before_volume_change",{volume:e.data.volume,remote:!!(null===(t=e.data.options)||void 0===t?void 0:t.commandId)}).defaultPrevented&&e.preventDefault()}},{key:"_onVolumeChanged",value:function(e){this.emit("volume_changed",{volume:e.data.volume,remote:!!e.data.commandId})}},{key:"_onCapped",value:function(){this.emit("playback_capped",null)}},{key:"_onError",value:function(e,t){var n=e.data.error;n&&(n.registration&&this.emit("registration_error",{error:n}),this.emit("error",{source:t,error:n}),this._client.notifyError(t,n))}},{key:"_onPlaybackClientLogout",value:function(){this.emit("logged_out",null)}},{key:"stop",value:function(){return this._playbackServiceClient.stop()}},{key:"register",value:function(){return this._playbackServiceClient.register()}},{key:"deregister",value:function(){return this._playbackServiceClient.deregister()}},{key:"resume",value:function(){return this._listPlayer.resume().then(this._assertOperationSuccess)}},{key:"pause",value:function(){return this._listPlayer.pause().then(this._assertOperationSuccess)}},{key:"nextTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.FORWARD_BUTTON;return this._listPlayer.next(e).then(this._assertOperationSuccess)}},{key:"canChangeTrack",value:function(){return this._listPlayer.canChangeTrack()}},{key:"previousTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.BACK_BUTTON;return this._listPlayer.previous(e).then(this._assertOperationSuccess)}},{key:"togglePlay",value:function(){return this._listPlayer.togglePlay().then(this._assertOperationSuccess)}},{key:"setVolume",value:function(e){return this._listPlayer.setVolume(e).then(this._assertOperationSuccess)}},{key:"getVolume",value:function(){return this._listPlayer.getVolume()}},{key:"seek",value:function(e){return this._listPlayer.seek(e).then(this._assertOperationSuccess)}},{key:"getCurrentState",value:function(){return this._playbackStateObserver.getCurrentState()}},{key:"getVideoVariants",value:function(){return this._playerPromise.then((function(e){return e.getVideoVariants()}))}},{key:"setPreferredBitrate",value:function(e){var t=this;return this._playerPromise.then((function(n){return n.setPreferredBitrate(e).then(t._assertOperationSuccess)}))}},{key:"setVideoResolution",value:function(e){return this._playerPromise.then((function(t){return t.setVideoResolution(e)}))}},{key:"setBackgrounded",value:function(e){return this._playerPromise.then((function(t){return t.setBackgrounded(e)}))}},{key:"activateElement",value:function(){return this._playerPromise.then((function(e){return e.activateElement()}))}},{key:"hideSubtitles",value:function(){return this._listPlayer.hideSubtitles().then(this._assertOperationSuccess)}},{key:"showSubtitles",value:function(){return this._listPlayer.showSubtitles().then(this._assertOperationSuccess)}},{key:"areSubtitlesShown",value:function(){return this._listPlayer.areSubtitlesShown()}},{key:"getSubtitleLanguages",value:function(){return this._listPlayer.getSubtitleLanguages()}},{key:"getActiveSubtitleLanguage",value:function(){return this._listPlayer.getActiveSubtitleLanguage()}},{key:"setSubtitleLanguage",value:function(e){return this._listPlayer.setSubtitleLanguage(e).then(this._assertOperationSuccess)}},{key:"getMediaConfig",value:function(){return this._listPlayer.getMediaConfig()}},{key:"setPlaybackSpeed",value:function(e){return this._listPlayer.setPlaybackSpeed(e).then(this._assertOperationSuccess)}},{key:"deactivateSubtitleEvents",value:function(){return this._listPlayer.deactivateCueEvents().then(this._assertOperationSuccess)}},{key:"activateSubtitleEvents",value:function(){return this._listPlayer.activateCueEvents().then(this._assertOperationSuccess)}}]),n}($.vp);function Ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Wa,qa=function(e){(0,p.Z)(n,e);var t=Ha(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).status=-1,a.maxedSubscriptions=!1,a.unrecoverable=!1,a.debug={},a.registration=!1,a.code=e,a.name="TrackPlayerAPIClientError",a}return(0,d.Z)(n,null,[{key:"fatal",value:function(e,t){var r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,ae.Z)(Error)),za=function(){function e(t,n){(0,c.Z)(this,e),this._stateMachine=null,this._currentState=null,this._currentStateIndex=null,this._pausedState=!1,this._initialPlaybackPosition=null,this._uri=t,this._manifestTrackResolver=n}return(0,d.Z)(e,[{key:"setPaused",value:function(e){this._pausedState=e}},{key:"isPaused",value:function(){return this._currentStateIndex&&this._currentStateIndex<0&&this._currentState&&this._currentState.transitions.advance?!!this._currentState.transitions.advance.paused:this._pausedState}},{key:"setInitialPosition",value:function(e){this._initialPlaybackPosition=e}},{key:"setStateMachine",value:function(e){this._stateMachine=e}},{key:"setDeviceId",value:function(e){this._deviceId=e}},{key:"startAtState",value:function(e){var t=this._stateMachine&&this._stateMachine.states[e.state_index];if(!t)throw new qa(H.TP_MISSING_INITIAL_STATE,"Invalid state reference.");var n=t.transitions;this._currentStateIndex=-1,this._currentState={decoy:!0,paused:!!e.paused,track:-1,state_id:null,transitions:{advance:e,show_next:n.show_next,show_prev:n.show_prev,skip_next:e,skip_prev:n.skip_prev},duration_override:t.duration_override,position_offset:t.position_offset}}},{key:"setCurrentState",value:function(e){var t=e.state_index;this._currentStateIndex=t,this._currentState=this._stateMachine&&this._stateMachine.states[t]}},{key:"getStateMachine",value:function(){return this._stateMachine}},{key:"getInternalStateRef",value:function(){var e=this._pausedState,t=this._currentStateIndex;if(!t)return null;if(t&&t<0){var n=this._currentState&&this._currentState.transitions.advance;n&&(t=n.state_index,e=!!n.paused)}return{paused:e,state_index:t}}},{key:"getStateRef",value:function(){var e,t,n=this._stateMachine;if(!n||null===this._currentStateIndex)return null;if(this._currentStateIndex<0){var r=this._currentState&&this._currentState.transitions.advance;r&&(e=n.states[r.state_index],t=r.paused)}else e=n.states[this._currentStateIndex],t=this._pausedState;return e?{state_machine_id:n.state_machine_id,state_id:e.state_id,paused:!!t}:null}},{key:"getCurrentTrack",value:function(){var e,t=this._stateMachine;if(!t||null===this._currentStateIndex)return null;if(this._currentStateIndex<0){var n=this._currentState&&this._currentState.transitions.advance;n&&(e=t.states[n.state_index])}else e=t.states[this._currentStateIndex];return e?t.tracks[e.track]:null}},{key:"startAt",value:function(){return Promise.resolve(st.SUCCESS)}},{key:"setShuffle",value:function(){return Promise.resolve(st.SUCCESS)}},{key:"setRepeatMode",value:function(){return Promise.resolve(st.SUCCESS)}},{key:"next",value:function(e){var t=this._currentState,n=null;if(t){var r=t.transitions;if(e.reason===z.FORWARD_BUTTON)"skip_next"in r&&(n=r.skip_next);else"advance"in r&&(n=r.advance)}return this._transitionTo(e,n,!1)}},{key:"peekNext",value:function(e){var t=this._currentState,n=null;if(t){var r=t.transitions;if(e.reason===z.FORWARD_BUTTON)"skip_next"in r&&(n=r.skip_next);else"advance"in r&&(n=r.advance)}return this._transitionTo(e,n,!0)}},{key:"previous",value:function(e){var t=this._currentState,n=null;t&&(n=t.transitions.skip_prev);return this._transitionTo(e,n,!1)}},{key:"translatePosition",value:function(e){var t,n;return(null!==(n=null===(t=this._currentState)||void 0===t?void 0:t.position_offset)&&void 0!==n?n:0)+e}},{key:"translateDuration",value:function(e){var t,n;return null!==(n=null===(t=this._currentState)||void 0===t?void 0:t.duration_override)&&void 0!==n?n:e}},{key:"handleSeek",value:function(e,t){var n;return(null===(n=this._currentState)||void 0===n?void 0:n.duration_override)&&t.reason!==z.REMOTE?t.listConstants.IGNORE:e}},{key:"allowSeeking",value:function(){return!!this._currentState&&!this._currentState.disallow_seeking}},{key:"_transitionTo",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(a){var o,i=e.reason,s=e.listConstants;if(!t)return a(s.FORBIDDEN);var l=n._stateMachine;if(!l)return a(s.NULL_VALUE);var c=l.states[t.state_index];if(!c)return a(s.NULL_VALUE);var d=l.tracks[c.track];if(!(null===(o=null==d?void 0:d.metadata)||void 0===o?void 0:o.uri))return a(s.NULL_VALUE);if(!n._currentState)return a(s.NULL_VALUE);var u=n._currentState,p=u.decoy?!!u.paused:t.paused;r||(n._currentState=c,n._currentStateIndex=t.state_index,n._pausedState=!!p);var f=0;return r||null===n._initialPlaybackPosition?"initial_playback_position"in c&&(f=c.initial_playback_position||0):(f=n._initialPlaybackPosition,n._initialPlaybackPosition=null),n._manifestTrackResolver.resolveFromStateTrack(d).then((function(e){if(!e)return a(s.NULL_VALUE);var t=n._uri;d.metadata&&d.metadata.context_uri&&(t=d.metadata.context_uri);var r=i,o=d.ms_played_until_update,l={playbackQuality:e.playbackQuality,hifiStatus:e.hifi_status},u={uri:e.uri,playableURI:e.uri,fileId:e.fileId,resolvedURL:e.resolvedURL,playable:e.playable,isAd:e.isAd,format:e.format,fileFormat:e.fileFormat,mediaType:e.mediaType,noManifest:e.noManifest,metadata:l,options:{position:f,paused:p,playedThreshold:o},logData:{noLog:!!e.noLog,noTSV:!!e.noTSV,noStats:!!e.noStats,deviceId:n._deviceId,playbackId:c.state_id?c.state_id:void 0,reason:r,displayTrack:e.uri,playContext:t,impressionURL:e.impressionURL,impressionURLs:e.impressionURLs,format:{codec:e.format,bitrate:e.bitrate},uriType:e.uriType,displayTitle:d.metadata.name,displayGroup:d.metadata.group_name,displayDuration:d.metadata.duration},stateId:c.state_id?c.state_id:void 0,audioGain:e.gainDb};return a(u)}))}))}},{key:"getCurrentState",value:function(){return this._currentState}}],[{key:"create",value:function(t,n){return new e(t,n)}}]),e}();!function(e){e.ON="ON",e.OFF="OFF",e.NONE="NONE"}(Wa||(Wa={}));var Qa=/^disallow_([^]+)_reasons$/;function $a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Xa,Ja=we.P.forTag("tp.stream.PlaybackStateObserver"),eo=function(e){(0,p.Z)(n,e);var t=$a(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.Z)(this,n),(r=t.call(this))._tpApiClient=e,r._numPreviousTracks=a.numPrevious||2,r._numNextTracks=a.numNextTracks||2,r._currentState=null,r._init(),r}return(0,d.Z)(n,[{key:"_init",value:function(){this._tpApiClient.on("state_changed",this._onStateChanged.bind(this)),this._tpApiClient.on("state_cleared",this._onStateCleared.bind(this))}},{key:"_onStateChanged",value:function(e){var t,n,r,a,o,i,s,l,c,d=e.data,u=d.stateMachine,p=d.stateRef,f=d.position,h=d.paused,_=d.loading,y=d.currentTrackInfo,m=null==u?void 0:u.states;if(u&&(null==m?void 0:m.length)&&p){var g=m[p.state_index],v=u.tracks[null==g?void 0:g.track];if(g&&v){var b=null!==(t=y.duration)&&void 0!==t?t:0,E=this._createTrackWindow(u,g,b);b||(b=null!==(r=null===(n=E.current_track)||void 0===n?void 0:n.duration_ms)&&void 0!==r?r:0);var w=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&"disallow_resuming_reasons"!==r&&"disallow_pausing_reasons"!==r&&(n[r]=e[r]);return t?n.disallow_pausing_reasons=["already_paused"]:n.disallow_resuming_reasons=["not_paused"],n}(g.restrictions||{},h),S=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],a=!(!r||!r.length);t[n.replace(Qa,"$1")]=a}return t}(w),k={timestamp:Date.now(),context:{uri:null!==(o=null===(a=v.metadata)||void 0===a?void 0:a.context_uri)&&void 0!==o?o:null,metadata:{}},position:f,duration:b,paused:h,playback_quality:null!==(i=y.playbackQuality)&&void 0!==i?i:Oa.UNKNOWN,playback_features:{hifi_status:null!==(s=y.hifiStatus)&&void 0!==s?s:Wa.NONE,change_playback_speed:null!==(l=y.changePlaybackSpeed)&&void 0!==l&&l},shuffle:this._getShuffleSetting(u),repeat_mode:this._getRepeatSetting(u),track_window:E,restrictions:w,disallows:S,loading:_,playback_speed:y.playbackSpeed,playback_id:g.state_id};(null===(c=v.metadata)||void 0===c?void 0:c.context_description)&&(k.context.metadata.context_description=v.metadata.context_description),this._currentState=k,this.emit("state_changed",{state:k?Object.assign({},k):null})}else Ja.warn("_onStateChanged called with no current state or track",e)}else Ja.warn("_onStateChanged called with no current state",e)}},{key:"_createTrackWindow",value:function(e,t,n){var r=this,a=e.states;return{current_track:this._getTrackMetadata(e,t,n),next_tracks:this._getNextStates(t,a).map((function(t){return r._getTrackMetadata(e,t,null)})).filter((function(e){return!!e})),previous_tracks:this._getPreviousStates(t,a).map((function(t){return r._getTrackMetadata(e,t,null)})).filter((function(e){return!!e}))}}},{key:"_onStateCleared",value:function(){this._currentState=null,this.emit("state_changed",{state:null})}},{key:"_getRepeatSetting",value:function(e){var t=e.attributes.options;return t.repeating_track?te.TRACK:t.repeating_context?te.CONTEXT:te.OFF}},{key:"_getShuffleSetting",value:function(e){return e.attributes.options.shuffling_context}},{key:"_getNextStates",value:function(e,t){for(var n=this._numNextTracks,r=[],a=e;a&&"show_next"in a.transitions&&a.transitions.show_next;){var o=t[a.transitions.show_next.state_index];if(o&&r.push(o),a=o,r.length>=n)break}return r}},{key:"_getPreviousStates",value:function(e,t){for(var n=this._numPreviousTracks,r=[],a=e;a&&"show_prev"in a.transitions&&a.transitions.show_prev;){var o=t[a.transitions.show_prev.state_index];if(o&&r.unshift(o),a=o,r.length>=n)break}return r}},{key:"_getTrackMetadata",value:function(e,t,n){var r=null==e?void 0:e.tracks[t.track];if(!(null==r?void 0:r.metadata))return null;var a=r.metadata,o=r.manifest&&"manifest_ids_video"in r.manifest,i=r.track_type.toLowerCase(),s=R.from(a.uri),l=a.linked_from_uri?R.from(a.linked_from_uri):null;return{id:s?R.hexToId(s.id):null,uri:a.uri,type:(null==s?void 0:s.type)||"unknown",uid:t.track_uid,linked_from:{uri:a.linked_from_uri||null,id:l?R.hexToId(l.id):null},media_type:o?"video":"audio",track_type:i,name:a.name,duration_ms:n||a.duration,artists:a.authors,album:{uri:a.group_uri,name:a.group_name,images:a.images},is_playable:!0}}},{key:"getCurrentState",value:function(){var e=this._currentState;if(e&&!e.paused){var t=Date.now(),n=e.position+(t-e.timestamp);e.position=n,e.timestamp=t}return Promise.resolve(this._currentState?Object.assign({},this._currentState):null)}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}($.vp);function to(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return no(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ro,ao=/^https:\/\//,oo=(Xa={},(0,r.Z)(Xa,Ce.FILE_URLS_MP3,lt.MP3),(0,r.Z)(Xa,Ce.FILE_URLS_EXTERNAL,lt.MP3),(0,r.Z)(Xa,Ce.FILE_IDS_MP3,lt.MP3),(0,r.Z)(Xa,Ce.FILE_IDS_MP4,lt.MP4),(0,r.Z)(Xa,Ce.FILE_IDS_MP4_DUAL,lt.MP4),(0,r.Z)(Xa,Ce.FILE_IDS_CBCS,lt.MP4_CBCS),(0,r.Z)(Xa,Ce.FILE_IDS_MP4FLAC,lt.MP4_FLAC),(0,r.Z)(Xa,Ce.MANIFEST_IDS_VIDEO,lt.MANIFEST_ID),Xa),io=function(){function e(t){(0,c.Z)(this,e),this._descriptor=t.descriptor,this._listPlayer=t.listPlayer}return(0,d.Z)(e,[{key:"_resolveFromStateTrack",value:function(e,t,n){var r,a,o,i,s,l=e.manifest,c=e.metadata.uri,d=R.from(c),u=null,p=to(n);try{for(p.s();!(s=p.n()).done;){var f=s.value,h=l[f];if(h){var _,y=to(h);try{for(y.s();!(_=y.n()).done;){var m=_.value;if(m.file_id||ao.test(null!==(r=m.file_url)&&void 0!==r?r:"")){var g=!(!d||d.type!==R.Type.AD&&d.type!==R.Type.INTERRUPTION);if(f!==Ce.FILE_IDS_MP3||g){var v=void 0;v=m.track_type?m.track_type.toLowerCase():f===Ce.MANIFEST_IDS_VIDEO?"video":"audio";var b=void 0;if(m.format){var E=parseInt(m.format,10);Fn[E]&&(b=E)}var w=null!==(a=m.bitrate)&&void 0!==a?a:f===Ce.FILE_IDS_MP4FLAC?1411200:128e3,S=null!==(o=m.bitrate)&&void 0!==o?o:f===Ce.FILE_IDS_MP4FLAC?7e5:128e3,k=oo[f];if(u={uri:c,uriType:d&&d.type?d.type:void 0,fileId:null!==(i=m.file_id)&&void 0!==i?i:"",resolvedURL:m.file_url,mediaType:v,format:k,bitrate:S,fileFormat:null!=b?b:void 0,playbackQuality:m.audio_quality,hifi_status:m.hifi_status,impressionURL:m.impression_url,impressionURLs:m.impression_urls,gainDb:m.gain_db,isAd:g,noLog:!1,noTSV:g,noStats:g,noManifest:k===lt.MP3,playable:!0},f===Ce.MANIFEST_IDS_VIDEO||w<=t)return u}}}}catch(P){y.e(P)}finally{y.f()}}}}catch(P){p.e(P)}finally{p.f()}return u}},{key:"resolveFromStateTrack",value:function(e){var t=this;return Promise.all([Promise.resolve(this._descriptor),this._listPlayer.getCurrentBandwidth()]).then((function(n){var r=(0,Q.Z)(n,2),a=r[0],o=r[1];return t._resolveFromStateTrack(e,o,a.getManifestFormats())}))}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),so=n(30075);function lo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}!function(e){e.TRACK_DATA_FINALIZED="track_data_finalized",e.DEREGISTER="deregister",e.REGISTER="register",e.BEFORE_TRACK_LOAD="before_track_load",e.CAPPED="capped",e.ERROR="error",e.PAUSE="pause",e.RESUME="resume",e.PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.POSITION_CHANGED="position_changed",e.SPEED_CHANGED="speed_changed",e.STARTED_PLAYING="started_playing",e.PROGRESS="progress",e.PING="ping",e.MODIFY_CURRENT_STATE="modify_current_state",e.STATE_CLEAR="state_clear"}(ro||(ro={}));var co=we.P.forTag("tpapiclient"),uo=we.P.forTag("tpapiclient.endsong"),po=we.P.forTag("tpapiclient.endsongs"),fo=/^hm:\/\/track-playback\/v1/,ho=/^hm:\/\/play-token\/lost/,_o=function(e,t){var n=e.getStatusFamily();return n===t.SERVER_ERROR||n===t.CONNECTION_ERROR},yo={condition:_o,maxRetries:8},mo={condition:_o,maxRetries:2},go=function(e){(0,p.Z)(n,e);var t=lo(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._deviceId=null,r._sequenceNumber=0,r._currentContext=null,r._loading=!1,r._lastSentStateUpdatePayload=null,r._isSendingConflict=!1,r._queuedRejectedStates=[],r._isSendingUpdate=!1,r._queueSendUpdate=[],r._currentTrackInfo={},r._registered=!1,r._isDeregistering=!1,r._waitingForTrackingData=X(),r._lastProcessedStateId=null,r._limitStateUpdates=!1,r._lastUpdateStateTime=0,r._initialUpdateSent=!1,r._startedPlayingUpdateSent=!1,r._nextFinalizedDataPayload=null,r._switchingContext=!1,r._connectionId=null,r._transport=e.transport,r._logger=e.logger,r._endpoint=e.endpoint||"http://@webgate/track-playback",r._listPlayer=e.listPlayer,r._ListClass=e.ListClass,r._currentGaiaVolume=e.initialVolume*re,r._clientVersion=e.clientVersion,r._manifestTrackResolver=e.manifestTrackResolver,r._descriptorPromise=Promise.resolve(e.descriptor),r._init(),r._performCommand=r._performCommand.bind((0,u.Z)(r)),r._handleRegisterResponse=r._handleRegisterResponse.bind((0,u.Z)(r)),r._handleStateConflictResponse=r._handleStateConflictResponse.bind((0,u.Z)(r)),r.register=r.register.bind((0,u.Z)(r)),r._parseDescriptor=r._parseDescriptor.bind((0,u.Z)(r)),r._volumeDebouncer=new so.d(r._sendVolume.bind((0,u.Z)(r)),{blockInitial:!0}),r}return(0,d.Z)(n,[{key:"_init",value:function(){var e,t=this;this._waitingForTrackingData=X(),this._waitingForTrackingData.resolve(!0),this._transport.on(this._transport.EVENT_CONNECTION_ID,this._onConnectionId.bind(this)),this._transport.matchMessages(ho,this._onPlayTokenLost.bind(this)),this._transport.matchMessages(fo,this._onTrackPlaybackMessage.bind(this)),this._listPlayer.addListeners((e={},(0,r.Z)(e,ot.LIST_PLAYER_CAPPED,this._onCapped.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_ERROR_SYNC,this._onError.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_BEFORE_NEXT,this._onBeforeTrackChange.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_BEFORE_PREVIOUS,this._onBeforeTrackChange.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_BEFORE_PLAYER_LOAD,this._onBeforePlayerLoad.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_PLAYER_LOAD,this._onListPlayerLoad.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_BEFORE_TRACK_LOAD,this._onBeforeTrackLoad.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_POSITION_CHANGED,this._onPositionChanged.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_DURATION_CHANGED,this._onDurationChanged.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_VOLUME_CHANGED,this._onVolumeChanged.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_PLAYBACK_SPEED_CHANGED,this._onSpeedChanged.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_PAUSED,this._onPlayPause.bind(this,!0)),(0,r.Z)(e,ot.LIST_PLAYER_PLAYING,this._onPlayPause.bind(this,!1)),(0,r.Z)(e,ot.LIST_PLAYER_PLAYED_THRESHOLD_REACHED,this._onPlayThresholdReached.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_PROGRESS,this._onProgress.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_TRACKING_DATA_CREATED,this._onTrackDataCreatedEvent.bind(this)),(0,r.Z)(e,ot.LIST_PLAYER_TRACKING_DATA_FINALIZED,this._onTrackDataFinalizedEvent.bind(this)),e)),this._descriptorPromise.then((function(e){e.on("descriptor_changed",(function(){t._parseDescriptor(e),t._updateDeviceInfo()}))}))}},{key:"_onBeforeTrackChange",value:function(){var e,t;if(!this._nextFinalizedDataPayload&&!this._switchingContext){var n=null!==(t=null===(e=this._currentContext)||void 0===e?void 0:e.getStateRef())&&void 0!==t?t:null,r=this._generateStatePayload(n,ro.TRACK_DATA_FINALIZED);this._setSequenceNumber(r),this._nextFinalizedDataPayload=r}}},{key:"_onBeforeTrackLoad",value:function(e){var t;this._loading=!0,this._switchingContext=!1,this._currentTrackInfo.duration=void 0,this._stateEventPositionOverride=null===(t=e.data.newTrack.options)||void 0===t?void 0:t.position}},{key:"_onBeforePlayerLoad",value:function(e){var t,n,r,a,o,i,s,l,c=this._currentContext;if(c){var d=c.getCurrentTrack(),u=null===(t=c.getCurrentState)||void 0===t?void 0:t.call(c),p=null!==(r=null!==(n=null==u?void 0:u.duration_override)&&void 0!==n?n:null==d?void 0:d.metadata.duration)&&void 0!==r?r:0,f=e.data,h=f.track.metadata||{},_=this._currentTrackInfo.playbackSpeed||1;this._currentTrackInfo={duration:p,mediaType:f.track.mediaType.toUpperCase(),fileFormat:f.track.fileFormat,bitrate:null===(o=null===(a=f.logData)||void 0===a?void 0:a.format)||void 0===o?void 0:o.bitrate,playbackQuality:h.playbackQuality,hifiStatus:h.hifiStatus,changePlaybackSpeed:null!==(s=!(null===(i=f.track.options)||void 0===i?void 0:i.useDefaultPlaybackSpeed))&&void 0!==s&&s,playbackSpeed:(null===(l=e.data.track.options)||void 0===l?void 0:l.useDefaultPlaybackSpeed)?1:_};var y=f.options;c.setPaused(!y.autoplay),this._setCurrentTrackPosition(y&&y.position||0),this._updateState(ro.BEFORE_TRACK_LOAD),this._startedPlayingUpdateSent=!1,this._initialUpdateSent=!1}}},{key:"_onCapped",value:function(){this._listPlayer.clear(z.CAPPED),this._currentContext=null,this._updateState(ro.CAPPED),this._setCurrentTrackPosition(void 0),this._lastProcessedStateId=null,this.emit("state_cleared",null)}},{key:"_onConnectionId",value:function(e){var t=this;this._connectionId=e.data.id,this._isDeregistering||(this._registered=!1,Promise.all([this._listPlayer.getVolume(),this._descriptorPromise.then(this._parseDescriptor)]).then(this.register,(function(e){co.info("Skipping registration due to error",e),t.emit("registration_aborted",{reason_error:e,source:ee.TRACK_PLAYBACK})})).catch((function(){})))}},{key:"_onDurationChanged",value:function(e){var t,n=null===(t=this._currentContext)||void 0===t?void 0:t.getCurrentTrack();(null==n?void 0:n.metadata.uri)===e.data.track.uri&&(this._currentTrackInfo.duration=e.data.duration,this._emitStateChanged())}},{key:"_onError",value:function(e){"position"in e.data&&(this._setCurrentTrackPosition(e.data.position),this._updateState(ro.ERROR))}},{key:"_onSpeedChanged",value:function(e){this._currentTrackInfo.playbackSpeed=e.data.playback_speed,this._updateState(ro.SPEED_CHANGED)}},{key:"_onPlayPause",value:function(e,t){var n=this._currentContext;n&&(n.setPaused(e),"position"in t.data&&this._setAllTrackPositions(t.data.position),t.data.track.stateId&&this._shouldSendUpdateForEvent(t.data.track.stateId)?this._updateState(e?ro.PAUSE:ro.RESUME):(this._lastProcessedStateId=null,this._emitStateChanged()))}},{key:"_onPlayThresholdReached",value:function(e){this._initialUpdateSent=!0,this._setAllTrackPositions(e.data.position),this._updateState(ro.PLAYED_THRESHOLD_REACHED)}},{key:"_onPlayTokenLost",value:function(){this._listPlayer.pause().catch((function(){}))}},{key:"_onPositionChanged",value:function(e){this._loading||(this._setCurrentTrackPosition(e.data.position),e.data.track&&this._shouldSendUpdateForEvent(e.data.track.stateId)?this._updateState(ro.POSITION_CHANGED):(this._lastProcessedStateId=null,this._emitStateChanged()))}},{key:"_onProgress",value:function(e){if(!this._loading&&this._currentContext&&(this._setAllTrackPositions(e.data.position),!this._startedPlayingUpdateSent&&e.data.played>1e3&&(this._startedPlayingUpdateSent=!0,this._updateState(ro.STARTED_PLAYING)),e.data.logData)){var t=this._currentContext.getCurrentTrack(),n=t&&"number"==typeof t.ms_playing_update_interval?t.ms_playing_update_interval:null;this._initialUpdateSent&&null!==n&&n>0&&Date.now()-this._lastUpdateStateTime>n&&this._updateState(ro.PROGRESS)}}},{key:"_onTrackDataCreatedEvent",value:function(){this._waitingForTrackingData=X()}},{key:"_onTrackDataFinalizedEvent",value:function(e){var t=this._nextFinalizedDataPayload;t&&(t.playback_stats=e.data.playbackStats,this._updateState(ro.TRACK_DATA_FINALIZED,t)),this._nextFinalizedDataPayload=null,this._waitingForTrackingData&&this._waitingForTrackingData.resolve(!0)}},{key:"_onListPlayerLoad",value:function(e){this._loading=!1;var t=this._currentContext;t&&(t.setPaused(!e.data.autoplay),this._setCurrentTrackPosition(e.data.position||0))}},{key:"_onTrackPlaybackMessage",value:function(e){var t=e.payloads;Array.isArray(t)&&t.length&&this._performCommand(t[0])}},{key:"_onVolumeChanged",value:function(e){var t;if(this._currentGaiaVolume=e.data.volume*re,this._registered){var n=null!==(t=e.data.commandId)&&void 0!==t?t:"",r={seq_num:void 0,volume:this._currentGaiaVolume,command_id:n};this._volumeDebouncer.async(r)}}},{key:"_clearSessionData",value:function(){this._connectionId=null,this._sequenceNumber=0,this._currentContext=null,this._lastSentStateUpdatePayload=null,this._isSendingConflict=!1,this._isSendingUpdate=!1,this._queueSendUpdate=[],this._previousTrackPosition=void 0,this._currentTrackPosition=void 0,this._currentTrackInfo={},this._lastProcessedStateId=null,this.emit("state_cleared",null)}},{key:"_createStateRef",value:function(e,t){if(!t)return null;var n=e.states[t.state_index];if(!n)throw new qa(H.TP_CANNOT_CREATE_STATE_REF,"Invalid state reference.");return{state_machine_id:e.state_machine_id,state_id:n.state_id,paused:t.paused}}},{key:"_deregisterFromService",value:function(e){var t=this,n=null,r=this._currentContext;r&&(e&&(r.setPaused(!e.playing),this._setAllTrackPositions(e.position)),n=r.getStateRef());var a=this._generateStatePayload(n,ro.DEREGISTER);this._setSequenceNumber(a);var o="".concat(this._endpoint,"/v1/devices/").concat(this._deviceId);return this._transport.request(o,{authorize:!0,method:"DELETE",payload:JSON.stringify(a),responseType:"json",retry:mo}).then((function(e){if(200!==e.status&&204!==e.status)return t._registered=!0,!1;var n=e.body;return n&&(n.endsong&&uo.log(n.endsong),n.endsongs&&(po.log(n.endsongs),t.emit("internal_endcontent",{endcontents:n.endsongs}))),t._clearSessionData(),t.emit("deregistered",null),!0}))}},{key:"_emitError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("error",{error:e,source:ee.TRACK_PLAYBACK}),e.registration||this._logger.logJSSDKError({source:"tpapi-client",source_version:Qe.tagged,type:e.code,message:e&&e.message,stack:e&&e.stack,json_data:t,json_data_version:"1.0.0"},"object").catch((function(e){co.error("Track-Playback Logging Error",e)}))}},{key:"_emitStateChanged",value:function(){var e=this._currentContext;if(e){var t=this._currentTrackPosition||0;void 0!==this._stateEventPositionOverride&&(t=this._stateEventPositionOverride,this._stateEventPositionOverride=void 0),this.emit("state_changed",{position:t,currentTrackInfo:this._currentTrackInfo,stateMachine:e.getStateMachine(),stateRef:e.getInternalStateRef(),paused:e.isPaused(),loading:this._loading})}}},{key:"_generateStatePayload",value:function(e,t){var n=this._currentTrackInfo;return{seq_num:void 0,seq_nums:void 0,state_ref:e,sub_state:{playback_speed:(null==e?void 0:e.paused)?0:this._currentTrackInfo.playbackSpeed||1,position:this._currentTrackPosition,duration:n.duration||void 0,media_type:n.mediaType,bitrate:n.bitrate,audio_quality:n.playbackQuality,format:n.fileFormat},previous_position:this._previousTrackPosition,playback_stats:void 0,rejected_state_refs:void 0,debug_source:t}}},{key:"_handleRegisterResponse",value:function(e){var t;if(429===e.status)return(t=qa.fatal(H.TP_MAX_SUBSCRIPTIONS_REACHED,"Max connections reached")).maxedSubscriptions=!0,t.status=e.status,this.emit("max_subscriptions_reached",{error:t}),Promise.reject(t);if(403===e.status&&e.body&&"PREMIUM_REQUIRED"===e.body.error_type?t=qa.fatal(H.TP_REGISTRATION_FAILED_NON_PREMIUM,"Cannot register to Track Playback with non-premium user."):200!==e.status?t=qa.fatal(H.TP_REGISTRATION_FAILED_WITH_STATUS,"track-playback service responded with status ".concat(e.status," when registering device")):e.body||(t=qa.fatal(H.TP_NO_RESPONSE_BODY,"Unexpected empty response body from registration request.")),t)return t.status=e.status,Promise.reject(t);var n=e.body;return n.endsong&&uo.log(n.endsong),n.endsongs&&(po.log(n.endsongs),this.emit("internal_endcontent",{endcontents:n.endsongs})),this._sequenceNumber=n.initial_seq_num,this._registered=!0,this.emit("registered",{deviceId:this._deviceId}),Promise.resolve(!0)}},{key:"_handleStateConflictResponse",value:function(e){var t;if(e.status>=200&&e.status<300){var n=null===(t=e.body)||void 0===t?void 0:t.commands;if(!n||!n.length)return;for(var r=0,a=n.length;r<a;r++)this._performCommand(n[r])}else{var o=new qa(H.TP_CONFLICT_REQUEST_FAILED_WITH_STATUS,"Track-Playback service responded with ".concat(e.status));o.status=e.status,this._emitError(o)}}},{key:"_handleStateUpdateResponse",value:function(e,t){var n;if(200!==t.status)return(n=new qa(H.TP_PARSE_STATE_UPDATE_FAILED_WITH_STATUS,"Service responded with status ".concat(t.status))).status=t.status,Promise.reject(n);if(!t.body)return(n=new qa(H.TP_UPDATE_REQUEST_EMPTY_RESPONSE,"Unexpected empty response body from state update request.")).status=t.status,Promise.reject(n);var r=t.body;r.endsong&&uo.log(r.endsong),r.endsongs&&(po.log(r.endsongs),this.emit("internal_endcontent",{endcontents:r.endsongs}));var a=this._currentContext;if(!a)return Promise.resolve();var o=r.state_machine,i=r.updated_state_ref;return this._isCurrentStateRef(e)?(a.setStateMachine(o),a.setCurrentState(i),this._emitStateChanged(),Promise.resolve()):Promise.resolve()}},{key:"_isCurrentStateRef",value:function(e){var t=this._currentContext?this._currentContext.getStateRef():null;return!t&&!e||!(!t||!e)&&(t.state_machine_id===e.state_machine_id&&t.state_id===e.state_id&&t.paused===e.paused)}},{key:"_logUnsentStateUpdate",value:function(e){co.info("Unsent state update.",e),this._logger.logClientEvent({source:"tpapi-client",source_version:Qe.tagged,source_vendor:"spotify",event:"unsent-state-update",event_version:"1.0.0",json_data:e},"object").catch((function(e){co.error("Track-Playback Logging Error",e)}))}},{key:"_logout",value:function(){var e=this;this._listPlayer.pause().catch((function(){})),this.emit("state_cleared",null),this.deregister().then((function(t){e._currentContext=null,e._setCurrentTrackPosition(void 0),t&&e.emit("logout",null)}))}},{key:"_parseDescriptor",value:function(e){return this._deviceId=e.getId(),this._deviceInfo=e.toTrackPlaybackDeviceInfo(),!0}},{key:"_performCommand",value:function(e){switch(e.type){case"set_volume":this._setVolume(e);break;case"log_out":this._logout();break;case"replace_state":this._replaceState(e);break;case"ping":this._updateState(ro.PING);break;default:this._emitError(new qa(H.TP_UNKNOWN_COMMAND,"Received unknown command."),{command:e})}}},{key:"_rejectState",value:function(e){var t=this,n=this._queuedRejectedStates;if(void 0!==e&&n.push(e),this._registered&&!this._isSendingConflict&&n.length){this._isSendingConflict=!0;var r=n.splice(0,5),a=this._currentContext?this._currentContext.getStateRef():null,o=this._generateStatePayload(a);o.rejected_state_refs=r,this._setSequenceNumbers(o,r.length);var i=function(){t._isSendingConflict=!1,t._rejectState()},s="".concat(this._endpoint,"/v1/devices/").concat(this._deviceId,"/state_conflict");this._transport.request(s,{authorize:!0,method:"POST",headers:{"Content-Type":"application/json"},responseType:"json",payload:JSON.stringify(o),retry:mo}).then(this._handleStateConflictResponse).then(i,i)}}},{key:"_replaceState",value:function(e){var t,n,r,a=this._listPlayer,o=e.state_machine,i=e.state_ref,s=this._createStateRef(o,i);if(this._isCurrentStateRef(e.prev_state_ref))if(i){var l=null!==(n=null===(t=this._currentContext)||void 0===t?void 0:t.getStateRef())&&void 0!==n?n:null;if(function(e,t){if(!e)throw new Error("Assertion failed: ".concat(t))}(null!==s,"New state reference is null"),this._currentContext&&(null==l?void 0:l.state_id)===s.state_id){var c=this._currentContext;c.setStateMachine(o),c.setCurrentState(i);var d=!1;c.isPaused()!==i.paused&&(d=!0),i.paused?(c.setPaused(!0),a.pause()):(c.setPaused(!1),a.resume());var u=parseInt(e.seek_to,10);c.allowSeeking()&&!isNaN(u)&&(a.seek(u,z.REMOTE),this._setCurrentTrackPosition(u),d=!0),d?this._emitStateChanged():(this._lastProcessedStateId=null,this._updateState(ro.MODIFY_CURRENT_STATE))}else{this._lastProcessedStateId=null!==(r=s.state_id)&&void 0!==r?r:null,this._currentContext&&this._onBeforeTrackChange();var p=this._ListClass.create("spotify:app:jsspeaker",this._manifestTrackResolver);p.setStateMachine(o),p.startAtState(i),this._deviceId&&p.setDeviceId(this._deviceId),this._currentContext=p;var f=e.seek_to||0;p.setInitialPosition(f),this._loading=!0,this._switchingContext=!0,a.play(p,{reason:z.REMOTE})}}else this._clearContextAndState();else this._rejectState(s)}},{key:"_clearContextAndState",value:function(){var e=this._listPlayer;e.pause().catch((function(){})),e.clear(z.REMOTE),this._currentContext=null,this._updateState(ro.STATE_CLEAR),this._setAllTrackPositions(void 0),this._lastProcessedStateId=null,this.emit("state_cleared",null),this._loading=!0}},{key:"_sendDevicesRequest",value:function(e,t){var n="".concat(this._endpoint,"/v1/devices");return"PUT"===e&&(n="".concat(n,"/").concat(this._deviceId)),this._transport.request(n,{authorize:!0,method:e||"POST",headers:{"Content-Type":"application/json"},responseType:"json",payload:JSON.stringify(t),retry:yo})}},{key:"_sendVolume",value:function(e){var t="".concat(this._endpoint,"/v1/devices/").concat(this._deviceId,"/volume");return this._setSequenceNumber(e),this._transport.request(t,{authorize:!0,method:"PUT",headers:{"Content-Type":"application/json"},payload:JSON.stringify(e)})}},{key:"_setAllTrackPositions",value:function(e){this._previousTrackPosition=e,this._currentTrackPosition=e}},{key:"_setCurrentTrackPosition",value:function(e){this._previousTrackPosition=this._currentTrackPosition,this._currentTrackPosition=e}},{key:"_setSequenceNumber",value:function(e){return void 0===e.seq_num&&(e.seq_num=++this._sequenceNumber),e}},{key:"_setSequenceNumbers",value:function(e,t){e.seq_nums=[];for(var n=0;n<t;n++)e.seq_nums.push(++this._sequenceNumber);return e}},{key:"_setVolume",value:function(e){var t,n=e.volume/re;this._listPlayer.setVolume(n,null!==(t=e.command_id)&&void 0!==t?t:"tpcommand-".concat(Date.now()))}},{key:"_shouldSendUpdateForEvent",value:function(e){return!(!e||e===this._lastProcessedStateId)}},{key:"_updateDeviceInfo",value:function(){var e=this;this._registered&&this._deviceInfo&&this._sendDevicesRequest("PUT",this._deviceInfo).then((function(t){204===t.status&&e.emit("registration_updated",null)}))}},{key:"_updateState",value:function(e,t){var n,r,a,o,i=this;if(this._registered)if(t?(a=t.state_ref,o=t):(a=null!==(r=null===(n=this._currentContext)||void 0===n?void 0:n.getStateRef())&&void 0!==r?r:null,o=this._generateStatePayload(a,e)),this._wasStatePayloadSentRecently(o)){if(this._emitStateChanged(),this._isSendingUpdate&&this._limitStateUpdates)return this._logUnsentStateUpdate(o),void this._queueSendUpdate.push(e);this._isSendingUpdate=!0,this._queueSendUpdate=[],this._setSequenceNumber(o),this._lastSentStateUpdatePayload=o;var s=function(){i._isSendingUpdate=!1,i._queueSendUpdate.length&&i._updateState(i._queueSendUpdate[i._queueSendUpdate.length-1]),co.info("State update sent.",e,o)},l="".concat(this._endpoint,"/v1/devices/").concat(this._deviceId,"/state");this._lastUpdateStateTime=Date.now(),this._transport.request(l,{authorize:!0,method:"PUT",headers:{"Content-Type":"application/json"},responseType:"json",payload:JSON.stringify(o),retry:yo}).then(this._handleStateUpdateResponse.bind(this,a)).then(s,(function(e){i._emitError(e),s()}))}else co.info("State update ignored (duplicate).",o)}},{key:"_wasStatePayloadSentRecently",value:function(e){var t=this._lastSentStateUpdatePayload;if(!t||!t.state_ref||!e.state_ref)return!0;var n=e.state_ref,r=t.state_ref;if(n.paused!==r.paused||n.state_id!==r.state_id||n.state_machine_id!==r.state_machine_id)return!0;var a=e.sub_state,o=t.sub_state;return a.playback_speed!==o.playback_speed||a.position!==o.position||a.duration!==o.duration||e.previous_position!==t.previous_position}},{key:"stop",value:function(){return!(!this._registered||!this._currentContext)&&(this._clearContextAndState(),!0)}},{key:"deregister",value:function(){var e=this;return this._registered?(this._isDeregistering=!0,this._registered=!1,this._listPlayer.getPlayerState().then((function(t){return Promise.all([e._deregisterFromService(t),e._waitingForTrackingData.promise,e._listPlayer.stop().catch((function(){}))]).then((function(t){var n=(0,Q.Z)(t,1)[0];return e._isDeregistering=!1,n}))}),(function(){return e._isDeregistering=!1,e._registered=!0,!1}))):Promise.resolve(!1)}},{key:"register",value:function(){var e,t=this;if(this._registered)return Promise.resolve(!1);if(!this._deviceInfo)return Promise.reject(new Error("Need DeviceInfo for device registration."));if(!this._connectionId)return Promise.reject(new Error("Need connection-id for device registration"));var n=this._currentContext;return n&&(e=this._generateStatePayload(n.getStateRef(),ro.REGISTER),this._setSequenceNumber(e)),this._sendDevicesRequest("POST",{device:this._deviceInfo,outro_endcontent_snooping:"true"==={NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.OUTRO_SNOOPING,connection_id:this._connectionId,client_version:this._clientVersion,previous_session_state:e,volume:this._currentGaiaVolume}).then(this._handleRegisterResponse).catch((function(e){return e&&!e.maxedSubscriptions&&(e.registration=!0,t._emitError(e)),!1}))}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);function vo(e,t){var n,r,a,o,i,s,l,c,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=e.getSDKId(),p=e.getPublicTransport(),f=e.getLogger(),h=e.getDeviceDescriptor(),_="initialVolume"in d&&void 0!==d.initialVolume?d.initialVolume:1;d.audioProcessorOptions=Object.assign(Object.assign({},d.audioProcessorOptions),{disable:null===(r=null===(n=d.audioProcessorOptions)||void 0===n?void 0:n.disable)||void 0===r||r});var y=Object.assign(Object.assign({},d),{transport:p,sdkId:e.getUntaggedSDKId(),loggerOptions:{disableMux:null===(i=null!==(o=null===(a=null==d?void 0:d.mux)||void 0===a?void 0:a.disable)&&void 0!==o?o:null==d?void 0:d.disableMux)||void 0===i||i,muxEnvKey:null!==(l=null===(s=null==d?void 0:d.mux)||void 0===s?void 0:s.envKey)&&void 0!==l?l:null==d?void 0:d.muxEnvKey,deviceInfo:h.then((function(e){return{platform_name:e.getPlatformName(),platform:e.getPlatformIdentifier(),version:e.getPlatformVersion(),brand:e.getBrand(),model:e.getModel(),type:e.getType()}})),muxCustomDimensions:null===(c=null==d?void 0:d.mux)||void 0===c?void 0:c.customDimensions,platform:e.getPlatformIdentifier(),clientVersion:e.getPlatformVersion()}}),m=Ka(y).then((function(e){return e.player})),g=m.then((function(e){return e.getMediaConfig()})),v=Promise.all([h,g]).then((function(e){var t=(0,Q.Z)(e,2),n=t[0],r=t[1];return n.getCapability("audio_podcasts")&&!d.disableExternalFiles&&n.appendManifestFormat(Ce.FILE_URLS_EXTERNAL),r.keysystem===it.FAIRPLAY?n.appendManifestFormat(Ce.FILE_IDS_CBCS):r.keysystem!==it.WIDEVINE||d.preferMultiDRMFormat?n.appendManifestFormat(Ce.FILE_IDS_MP4_DUAL,Ce.FILE_IDS_MP4):(-1!==r.formats.audio.indexOf('audio/mp4; codecs="flac"')&&n.getCapability("lossless_playback")&&n.appendManifestFormat(Ce.FILE_IDS_MP4FLAC),n.appendManifestFormat(Ce.FILE_IDS_MP4,Ce.FILE_IDS_MP4_DUAL)),r.supports.protected_video&&n.getCapability("video_playback")&&n.prependManifestFormat(Ce.MANIFEST_IDS_VIDEO),n})),b=Ba.create({trackPlayer:m}),E=io.create({descriptor:h,listPlayer:b}),w=t({initialVolume:_,listPlayer:b,logger:f,transport:p,clientVersion:u,descriptor:v,endpoint:d.endpoint,manifestTrackResolver:E}),S=w.playbackServiceClient,k=w.playbackStateObserver;return new Ga({client:e,playbackServiceClient:S,playbackStateObserver:k,initialVolume:_,playerPromise:m,listPlayer:b,stopOnBackground:d.stopOnBackground})}var bo,Eo=n(64109);function wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}!function(e){e.LOCAL_PLAYER_DISABLED="local_player_disabled",e.STOPPED="stopped",e.REMOTE_ACTIVATED="remote_activated",e.UNKNOWN="unknown"}(bo||(bo={}));var So=function(e){(0,p.Z)(n,e);var t=wo(n);function n(e,r){var a;return(0,c.Z)(this,n),(a=t.call(this,r)).status=-1,a.maxedSubscriptions=!1,a.unrecoverable=!1,a.debug={},a.code=e,a.name="PlayerAPIClientError",a}return(0,d.Z)(n,null,[{key:"fatal",value:function(e,t){var r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,ae.Z)(Error));function ko(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ro(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Po=function(){function e(t){(0,c.Z)(this,e),this._transport=t.transport,this._metadataCache=new ut.z6(t.cacheSize||20)}return(0,d.Z)(e,[{key:"_decorateTrackWindow",value:function(e){var t,n,r,a=this._metadataCache,o={current_track:null,next_tracks:[],previous_tracks:[]};e.current_track&&(n=a&&e.current_track&&"uri"in e.current_track&&a.get(e.current_track.uri),o.current_track=Object.assign({uid:e.current_track.uid},n||e.current_track)),t=e.next_tracks.length;for(;t--;)r=e.next_tracks[t],n=a&&r&&"uri"in r&&a.get(r.uri),o.next_tracks[t]=Object.assign({uid:r.uid},n||r);for(t=e.previous_tracks.length;t--;)r=e.previous_tracks[t],n=a&&r&&"uri"in r&&a.get(r.uri),o.previous_tracks[t]=Object.assign({uid:r.uid},n||r);return o}},{key:"_buildTrackList",value:function(e){var t,n=[],r={},a=ko([e.current_track].concat((0,le.Z)(e.next_tracks),(0,le.Z)(e.previous_tracks)));try{for(a.s();!(t=a.n()).done;){var o=t.value;o&&!r[o.uri]&&n.push(o.uri)}}catch(i){a.e(i)}finally{a.f()}return n}},{key:"_cacheMetadata",value:function(e){var t,n=[],r=[],a=this._metadataCache,o=ko(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(!a.get(i)){var s=R.from(i);if(s){var l=R.hexToId(s.id);s.type===R.Type.TRACK?r.push(l):s.type===R.Type.EPISODE&&n.push(l)}}}}catch(c){o.e(c)}finally{o.f()}return n.length||r.length?Promise.all([this._requestMultiData("episodes",n),this._requestMultiData("tracks",r)]).then((function(e){var t=(0,Q.Z)(e,2),n=t[0],r=t[1];return!!n||!!r})):Promise.resolve(!0)}},{key:"_requestMultiData",value:function(e,t){var n=this;if(!t.length)return Promise.resolve(!1);var r=this._metadataCache,a=["https://@webapi/v1/",e,"?ids=",t.join(","),"&market=from_token"].join("");return this._transport.request(a,{responseType:"json"}).then((function(t){var a;if(200!==t.status)return!1;var o=null===(a=t.body)||void 0===a?void 0:a[e];if(!o)return!1;for(var i=o.length;i--;){var s=o[i];s&&("episodes"===e?s=n._formatEpisodeData(s):(s.track_type="audio",s.media_type="audio"),r&&r.set(s.uri,s),r&&s.linked_from&&s.linked_from.uri&&r.set(s.linked_from.uri,s))}return!0}))}},{key:"_formatEpisodeData",value:function(e){var t="audio"===e.show.media_type?"audio":"video";return{id:e.id,uri:e.uri,type:"episode",media_type:t,track_type:e.show.media_type,name:e.name,artists:[{uri:e.show.uri,name:e.show.publisher}],album:{uri:e.show.uri,name:e.show.name,images:e.images},duration_ms:e.duration_ms||0,is_playable:!0}}},{key:"formatLocalTrack",value:function(e,t){return e&&e.type===R.Type.LOCAL?{uri:e.toURI(),type:"local",uid:t,media_type:"audio",track_type:"audio",name:e.track,artists:[{uri:R.localArtistURI(e.artist).toURI(),name:e.artist}],album:{uri:R.localAlbumURI(e.artist,e.album).toURI(),name:e.album,images:[{url:""}]},duration_ms:e.duration?1e3*e.duration:0,is_playable:!1}:null}},{key:"formatAd",value:function(e,t){if(!e||e.type!==R.Type.AD&&e.type!==R.Type.INTERRUPTION)return null;if(!t||!t.metadata)return null;var n=t.metadata;return{id:e.id,uri:e.toURI(),type:e.type,uid:t.uid,media_type:"audio",track_type:"audio",name:n.advertiser,artists:[{uri:n.click_url,name:n.buttonMessage||n.advertiser}],album:{uri:n.click_url,name:n.advertiser,images:[{url:n.image_url}]},duration_ms:parseInt(n.duration,10),is_playable:!1}}},{key:"decorateTrackWindow",value:function(e,t){var n=this,r=null!=t?t:this._buildTrackList(e);return this._cacheMetadata(r).then((function(t){return t?n._decorateTrackWindow(e):e}))}}],[{key:"create",value:function(t){return new e(t)}}]),e}();function To(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function Ao(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Co(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Io=we.P.forTag("harmony.controller"),Lo=/^disallow_([^]+)_reasons$/,Oo={disallow_pausing_reasons:!0,disallow_peeking_next_reasons:!0,disallow_peeking_prev_reasons:!0,disallow_resuming_reasons:!0,disallow_seeking_reasons:!0,disallow_skipping_next_reasons:!0,disallow_skipping_prev_reasons:!0,disallow_toggling_repeat_context_reasons:!0,disallow_toggling_repeat_track_reasons:!0,disallow_toggling_shuffle_reasons:!0,disallow_transferring_playback_reasons:!0},Do="premium",No="on-demand",jo={unknown:Oa.UNKNOWN,default:Oa.DEFAULT,low:Oa.LOW,normal:Oa.NORMAL,normalized:Oa.NORMAL,high:Oa.HIGH,veryhigh:Oa.VERY_HIGH,hifi:Oa.HIFI},Mo={on:Wa.ON,off:Wa.OFF,none:Wa.NONE};function xo(e,t){if(!e)return[];for(var n=[],r=[R.Type.TRACK,R.Type.EPISODE],a=0,o=e.length;a<o;a++){var i=e[a];if(!i)throw new TypeError("Null value inside track array.");var s=void 0;if("string"==typeof i?(s=R.from(i),i={uri:i}):s=R.from(i.uri),!/^spotify:(meta:|delimiter)/.test(i.uri)){if(!s)throw new TypeError("Invalid uri string: ".concat(s));if(-1===r.indexOf(s.type))throw new TypeError("Invalid track uri: ".concat(i.uri))}i.metadata||(i.metadata={}),t&&t.queued&&(i.metadata.is_queued="true"),n.push(i)}return n}function Uo(e){if(e){if(/^.+:\/\//.test(e))return e;throw new TypeError("Invalid page url: ".concat(e))}}var Fo=function(e){(0,p.Z)(n,e);var t=To(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._suppressed=!1,r._lastDeviceInfoData=null,r._state=null,r._lastPlayerState=null,r._isOrphanedState=!1,r._progressPosition=0,r._lastProgressTs=0,r._trackingIntervalId=0,r._queue=null,r._client=e.client,r._serverTime=e.serverTime,r._version=e.version,r._playerClient=e.playerClient,r._disableProgress=!!e.disableProgress,r._transport=r._client.getPublicTransport(),r._decorate=!!e.decorateTrackWindow,r._metadataDecorator=new Po({transport:r._transport}),r._onClientBeforeDisconnect=r._onClientBeforeDisconnect.bind((0,u.Z)(r)),r._onDeviceStateChanged=r._onDeviceStateChanged.bind((0,u.Z)(r)),r._onPlayerStateChanged=r._onPlayerStateChanged.bind((0,u.Z)(r)),r._onProgressTracking=r._onProgressTracking.bind((0,u.Z)(r)),r._client.on("before_disconnect",r._onClientBeforeDisconnect),r.proxyEmit(r._playerClient,"max_subscriptions_reached","max_subscriptions_reached"),r.proxyEmit(r._playerClient,"devices_changed","devices_changed"),r.proxyEmit(r._playerClient,"registered","registered"),r.proxyEmit(r._playerClient,"deregistered","deregistered"),r._playerClient.on("device_state_changed",r._onDeviceStateChanged),r._playerClient.on("player_state_changed",r._onPlayerStateChanged),r}return(0,d.Z)(n,[{key:"_onClientBeforeDisconnect",value:function(e){e&&e.data.awaitPromise(this._playerClient.deregister().catch((function(){})))}},{key:"_onDeviceStateChanged",value:function(e){var t,n,r=this,a=e.data,o=a.deviceState,i=a.hasOrphanedState,s=!!(null===(n=null===(t=this._lastDeviceInfoData)||void 0===t?void 0:t.deviceInfo)||void 0===n?void 0:n.local);this._lastDeviceInfoData={deviceInfo:o,hasOrphanedState:i},s&&!(null==o?void 0:o.local)&&this._playerClient.getDevices().then((function(e){var t=e.localDevice,n=bo.STOPPED;i?t||(n=bo.LOCAL_PLAYER_DISABLED):n=bo.REMOTE_ACTIVATED,r.emit("device_deactivated",{reason:n})})).catch((function(e){Io.warn("Device deactivation checking failed.",e)})),this._suppressed||this.emit("device_info_changed",this._lastDeviceInfoData)}},{key:"_startProgressTracking",value:function(){this._stopProgressTracking(),this._lastProgressTs=Date.now(),this._onProgressTracking(),this._trackingIntervalId=setInterval(this._onProgressTracking,500)}},{key:"_stopProgressTracking",value:function(){this._trackingIntervalId&&(clearInterval(this._trackingIntervalId),this._trackingIntervalId=0)}},{key:"_onProgressTracking",value:function(){var e,t=Date.now(),n=(null===(e=this._lastPlayerState)||void 0===e?void 0:e.playback_speed)||1;this._progressPosition+=n*(t-this._lastProgressTs),this.emit("progress",{position:this._progressPosition,timestamp:Date.now()}),this._lastProgressTs=t}},{key:"_getLicense",value:function(){return this._client.getProductState().then((function(e){return"premium"===e.product?Do:No})).catch((function(){return No}))}},{key:"_generatePlayOptions",value:function(e,t){return this._getLicense().then((function(n){var r={license:n};if(!e)return r;if(("index"in e||"trackUID"in e||"trackURI"in e||"pageIndex"in e)&&(r.skip_to={track_uid:e.trackUID,track_index:e.index,track_uri:e.trackURI,page_index:e.pageIndex}),"initialOffset"in e&&(r.seek_to=e.initialOffset),"paused"in e&&(r.initially_paused=e.paused),"alwaysPlaySomething"in e&&(r.always_play_something=e.alwaysPlaySomething),t)return r;r.player_options_override={};var a=r.player_options_override;if("shuffle"in e&&(a.shuffling_context=e.shuffle),"repeatMode"in e)switch(e.repeatMode){case te.CONTEXT:a.repeating_context=!0,a.repeating_track=!1;break;case te.TRACK:a.repeating_track=!0,a.repeating_context=!1;break;case te.OFF:a.repeating_track=!1,a.repeating_context=!1}return r}))}},{key:"_setFilterAndSort",value:function(e,t){t&&t.filter&&e.metadata&&(e.metadata["filtering.predicate"]=t.filter),t&&t.sort&&e.metadata&&(e.metadata["sorting.criteria"]=t.sort)}},{key:"_setMetadataOptions",value:function(e,t){if(t){var n=e.metadata||{};"autoplayCandidate"in t&&(n.autoplay_candidate=t.autoplayCandidate?"true":"false"),e.metadata=n}}},{key:"_generatePlayOrigin",value:function(e){if(e&&e.featureClasses&&!Array.isArray(e.featureClasses))throw new TypeError("PlayOptions playOrigin.featureClasses must be an array of strings.");return{feature_identifier:e&&e.featureIdentifier||"harmony",feature_version:e&&e.featureVersion||this._version,feature_classes:e&&e.featureClasses,view_uri:e&&e.viewURI,external_referrer:e&&e.externalReferrer,referrer_identifier:e&&e.referrerIdentifier}}},{key:"_generateLoggingParams",value:function(e){var t=e.pageInstanceId,n=e.interactionId;return{page_instance_ids:t?[t]:[],interaction_ids:n?[n]:[]}}},{key:"_parseRestrictions",value:function(e){var t={};for(var n in e.restrictions)e.restrictions.hasOwnProperty(n)&&Oo[n]?t[n]=e.restrictions[n]:Oo[n]&&(t[n]=[]);return t}},{key:"_parseDisallows",value:function(e){var t={},n=e.restrictions;for(var r in n)if(n.hasOwnProperty(r)&&Oo[r]){var a=n[r],o=!(!a||!a.length);t[r.replace(Lo,"$1")]=o}return t}},{key:"_onPlayerStateChanged",value:function(e){var t=this;this._isOrphanedState=e.data.orphaned,this._parsePlayerState(e.data.playerState).then((function(n){t._state=n,t._suppressed||t.emit("state_changed",{state:n?Object.assign({},n):null,orphaned:e.data.orphaned}),!t._disableProgress&&n&&(t._progressPosition=n.position,n.paused?t._stopProgressTracking():t._startProgressTracking())}))}},{key:"_parsePlayerState",value:function(e){var t=this;return this._lastPlayerState=e,e?this._getTrackWindow(e).then((function(n){var r,a,o,i,s,l,c,d;return{context:{uri:e.context_uri||null,metadata:e.context_metadata||{}},timestamp:e.timestamp,duration:e.duration||n.current_track&&"uri"in n.current_track&&n.current_track.duration_ms||0,position:e.is_paused?e.position_as_of_timestamp:t._offsetPosition(e.timestamp,e.position_as_of_timestamp,null===(r=t._lastPlayerState)||void 0===r?void 0:r.playback_speed),playback_id:null,playback_quality:null!==(i=jo[null!==(o=null===(a=e.playback_quality)||void 0===a?void 0:a.bitrate_level)&&void 0!==o?o:"unknown"])&&void 0!==i?i:Oa.UNKNOWN,playback_features:{hifi_status:Mo[null!==(l=null===(s=e.playback_quality)||void 0===s?void 0:s.hifi_status)&&void 0!==l?l:"none"]},paused:!!e.is_paused,shuffle:!(!e.options||!e.options.shuffling_context),repeat_mode:t._getStateRepeatMode(e),restrictions:t._parseRestrictions(e),disallows:t._parseDisallows(e),track_window:n,bitrate:null,loading:null!==(d=null===(c=t._state)||void 0===c?void 0:c.loading)&&void 0!==d&&d}})):Promise.resolve(null)}},{key:"_offsetPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=r||this._serverTime.getApproximate(),o=(a-e)*n,i=t+o;return i<0?0:i}},{key:"_isRestricted",value:function(e,t){if(!e||!e.restrictions)return!1;var n="disallow_".concat(t,"_reasons");return!!(e.restrictions[n]||[]).length}},{key:"_getTrackWindow",value:function(e){var t={current_track:null,next_tracks:[],previous_tracks:[]},n={},r=[];if(!e.track)return Promise.resolve(t);var a=e.track.uri;if(!a)return Promise.resolve(t);var o=this._metadataDecorator,i=R.from(a),s=o.formatLocalTrack(i,e.track.uid),l=o.formatAd(i,e.track);return t.current_track=s||l||{uri:a,uid:e.track.uid,type:i&&i.type?i.type:"unknown"},s||l||(n[a]=1,r.push(a)),this._isRestricted(e,"peeking_next")||this._fillWindow(r,t.next_tracks,n,e.next_tracks?e.next_tracks.slice(0,5):[]),this._isRestricted(e,"peeking_prev")||this._fillWindow(r,t.previous_tracks,n,e.prev_tracks?e.prev_tracks.slice(-5):[],!0),this._decorate?this._metadataDecorator.decorateTrackWindow(t,r):Promise.resolve(t)}},{key:"_fillWindow",value:function(e,t,n,r,a){a&&r.reverse();var o,i=Ao(r);try{for(i.s();!(o=i.n()).done;){var s=o.value,l=s.uri,c=R.from(l);if(l&&"spotify:delimiter"!==l&&(!c||c.type!==R.Type.AD&&c.type!==R.Type.INTERRUPTION)){var d=this._metadataDecorator.formatLocalTrack(c,s.uid),u=d||{uri:l,uid:s.uid,type:"unknown"};if(d||l in n||(n[l]=1,e.push(l)),a?t.unshift(u):t.push(u),2===t.length)break}}}catch(p){i.e(p)}finally{i.f()}}},{key:"_getStateRepeatMode",value:function(e){var t=e.options;return t&&t.repeating_track?te.TRACK:t&&t.repeating_context?te.CONTEXT:te.OFF}},{key:"_play",value:function(e,t,n){var r=this;return this._setFilterAndSort(e,n),this._setMetadataOptions(e,n),this._generatePlayOptions(n).then((function(a){var o={context:e,play_origin:r._generatePlayOrigin(n&&n.playOrigin),options:a};return(null==n?void 0:n.loggingParams)&&(o.logging_params=r._generateLoggingParams(n.loggingParams)),r._playerClient.play(o,t)}))}},{key:"getActiveDevice",value:function(){return this._playerClient.getActiveDevice()}},{key:"getCurrentState",value:function(e){var t;if(e&&this._isOrphanedState)return Promise.resolve(null);var n=this._state;if(n&&!n.paused){var r=this._serverTime.getApproximate();n.position=this._offsetPosition(n.timestamp,n.position,null===(t=this._lastPlayerState)||void 0===t?void 0:t.playback_speed,r),n.timestamp=r}return Promise.resolve(n?Object.assign({},n):null)}},{key:"getContextPlayerState",value:function(){return Io.warn("The `getContextPlayerState()` method is not well supported. Please avoid using it directly."),this._playerClient.getContextPlayerState()}},{key:"getDevices",value:function(){return this._playerClient.getDevices()}},{key:"playURI",value:function(e,t,n){if(!R.from(e))return Promise.reject(new TypeError("Invalid Spotify URI"));var r={uri:e,url:"context://".concat(e),metadata:n&&n.contextMetadata||{}};return this._play(r,t,n)}},{key:"playPages",value:function(e,t,n){var r,a;if(!Array.isArray(e))return Promise.reject(new TypeError("Invalid pages array."));try{a=function(e){var t,n,r,a,o=[],i=Ao(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;o.push({tracks:Array.isArray(s.tracks)?xo(s.tracks):void 0,page_url:null!==(t=Uo(s.pageURL))&&void 0!==t?t:void 0,next_page_url:null!==(n=Uo(s.nextPageURL))&&void 0!==n?n:void 0,metadata:null!==(r=s.metadata)&&void 0!==r?r:void 0})}}catch(l){i.e(l)}finally{i.f()}return o}(e)}catch(i){return Promise.reject(i)}var o={uri:null!==(r=null==n?void 0:n.contextURI)&&void 0!==r?r:"spotify:internal:harmony-play-pages",metadata:(null==n?void 0:n.contextMetadata)||{},pages:a};return this._play(o,t,n)}},{key:"playTracks",value:function(e,t,n){var r,a;if(!Array.isArray(e))return Promise.reject(new TypeError("Invalid tracks array."));try{a=xo(e)}catch(i){return Promise.reject(i)}var o={uri:null!==(r=null==n?void 0:n.contextURI)&&void 0!==r?r:"spotify:internal:harmony-play-tracks",metadata:(null==n?void 0:n.contextMetadata)||{},pages:[{tracks:a}]};return this._play(o,t,n)}},{key:"updateCurrentContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._playerClient.updateCurrentContext(e,t)}},{key:"setQueue",value:function(e,t,n){if(!Array.isArray(e))return Promise.reject(new TypeError("Invalid nextTracks array."));if(!Array.isArray(t))return Promise.reject(new TypeError("Invalid previousTracks array."));var r,a;try{r=xo(e),a=xo(t)}catch(i){return Promise.reject(i)}var o={next_tracks:r.length?r:void 0,prev_tracks:a.length?a:void 0};return this._playerClient.setQueue(o,n)}},{key:"togglePlay",value:function(e){return this._playerClient.togglePlay(e)}},{key:"transfer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._playerClient.transfer(e,t)}},{key:"pause",value:function(e){return this._playerClient.pause(e)}},{key:"resume",value:function(e){return this._playerClient.resume(e)}},{key:"nextTrack",value:function(e,t){var n={};return(null==t?void 0:t.track)&&(n.track=ye([t.track])[0]),this._playerClient.nextTrack(e,n)}},{key:"previousTrack",value:function(e,t){var n={};return(null==t?void 0:t.track)&&(n.track=ye([t.track])[0]),this._playerClient.previousTrack(e,n)}},{key:"seek",value:function(e,t){return this._playerClient.seek(e,t)}},{key:"setShuffle",value:function(e,t){return this._playerClient.setShuffle(e,t)}},{key:"toggleShuffle",value:function(e){return this._playerClient.toggleShuffle(e)}},{key:"setVolume",value:function(e,t){return this._playerClient.setVolume(e,t)}},{key:"logout",value:function(e){return this._playerClient.logout(e)}},{key:"setRepeatMode",value:function(e,t){var n=this;return this.getCurrentState().then((function(r){if(!r)return Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"));var a=n._playerClient,o=r.disallows;switch(e){case te.OFF:return(!o.toggling_repeat_context||!o.toggling_repeat_track)&&a.setOptions({repeating_context:!!o.toggling_repeat_context&&void 0,repeating_track:!!o.toggling_repeat_track&&void 0},t);case te.CONTEXT:return!o.toggling_repeat_context&&a.setOptions({repeating_context:!0,repeating_track:!!o.toggling_repeat_track&&void 0},t);case te.TRACK:return!o.toggling_repeat_track&&a.setOptions({repeating_context:!o.toggling_repeat_context||void 0,repeating_track:!0},t);default:return Promise.reject(new TypeError("Unknown repeat mode."))}}))}},{key:"register",value:function(){return this._playerClient.register()}},{key:"suppressEvents",value:function(){this._suppressed=!0}},{key:"unsuppressEvents",value:function(){this._suppressed=!1,this._lastDeviceInfoData&&this.emit("device_info_changed",this._lastDeviceInfoData),this._state&&this.emit("state_changed",{state:this._state})}},{key:"getQueueManager",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._queue){var n=t.reportInitial?this._lastPlayerState:null;this._queue=new ge(Object.assign({connectClient:this._playerClient,initialContextPlayerState:n,runner:e},t))}return this._queue}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp),Zo=n(45298);function Bo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ko(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Vo=/connect-state\/v1\/cluster$/,Go=/^([a-zA-Z0-9_%:-]{1,40}).*$/;function Ho(e){var t,n,r;return!!e.track&&0===(null!==(r=null===(n=null===(t=e.restrictions)||void 0===t?void 0:t.disallow_transferring_playback_reasons)||void 0===n?void 0:n.length)&&void 0!==r?r:0)}var Wo="::a_";function qo(e){if(!e)return{deviceId:null};var t=e.split(Wo),n=(0,Q.Z)(t,2),r=n[0],a=n[1];return{deviceId:r,aliasId:a?parseInt(a,10):void 0}}var zo=function(e){(0,p.Z)(n,e);var t=Ko(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this))._autoregister=!0,r._connectionId="",r._localDeviceId="",r._localObserverDeviceId=null,r._lastActiveDevice=null,r._lastKnownPlayerState=null,r._lastKnownDevices=[],r._localDevice=null,r._fetchedInitialState=!1,r._awaitingAcknowledgment={},r._acknowledgementMaps=[],r._lastProcessedTimestamp=0,r._descriptor=e.descriptor,r._transport=e.transport,r._endpoint=e.endpoint||"@webgate/connect-state",r._autoregister=!("autoregister"in e)||!!e.autoregister,r._onConnectionId=r._onConnectionId.bind((0,u.Z)(r)),r._onClusterMessage=r._onClusterMessage.bind((0,u.Z)(r)),r._awaitResponseWithAck=r._awaitResponseWithAck.bind((0,u.Z)(r)),r._transport.on(r._transport.EVENT_CONNECTION_ID,(function(e){r._onConnectionId(e.data.id)})),r._transport.matchMessages(Vo,r._onClusterMessage),r._descriptorPromise=Promise.resolve(r._descriptor).then((function(e){return r._localDeviceId=e.id||"",r._localObserverDeviceId=("hobs_"+r._localDeviceId).replace(Go,"$1"),!0})),r}return(0,d.Z)(n,[{key:"_onConnectionId",value:function(e){this._connectionId=e,this._autoregister&&this.register()}},{key:"_onClusterMessage",value:function(e){var t=e.payloads&&e.payloads[0];if(t){if(t.ack_id){var n=t.ack_id,r=this._awaitingAcknowledgment[n];if(r)r.resolve(!0);else{var a,o=Bo(this._acknowledgementMaps);try{for(o.s();!(a=o.n()).done;){a.value[n]=X()}}catch(i){o.e(i)}finally{o.f()}}}this._parseCluster(t.cluster)}}},{key:"_resolveTargetDevice",value:function(e){var t=this;return this._descriptorPromise.then((function(){var n=t._localDeviceId;return qo(e?e===ne?n:e:t._lastActiveDevice?t._lastActiveDevice.id:n)}))}},{key:"_makeEndpoint",value:function(e,t,n){var r=this;return this._descriptorPromise.then((function(){var a=r._localDeviceId;return"".concat(r._endpoint,"/").concat(e,"/").concat(t,"/from/").concat(a,"/to/").concat(n)}))}},{key:"_sendPlayerCommand",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.endpoint=e;var a={command:r};return this._resolveTargetDevice(n).then((function(e){if(!e.deviceId)throw new So(H.CONNECTAPI_CLIENT_MISSING_DEVICE_ID,"Operation resulted in a null device id");return!a.target_alias_id&&e.aliasId&&(a.target_alias_id=e.aliasId),t._makeEndpoint("v1","player/command",e.deviceId)})).then((function(e){return t._sendRequest(Zo.n.POST,e,a)})).then(this._awaitResponseWithAck)}},{key:"_sendConnectCommand",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="volume"===e?Zo.n.PUT:Zo.n.POST,o="volume"===e||"logout"===e;return this._resolveTargetDevice(n).then((function(n){if(!n.deviceId)throw new So(H.CONNECTAPI_CLIENT_MISSING_DEVICE_ID,"Operation resulted in a null device id");return n.aliasId&&(o?r.command_options={target_alias_id:n.aliasId}:r.target_alias_id||(r.target_alias_id=n.aliasId)),t._makeEndpoint("v1","connect/".concat(e),n.deviceId)})).then((function(e){return t._sendRequest(a,e,r)})).then(this._awaitResponseWithAck)}},{key:"_sendRequest",value:function(e,t,n){var r=this._acknowledgementMaps,a={};r.push(a);var o=function(){var e=r.indexOf(a);-1!==e&&r.splice(e,1)};return this._transport.request(t,{method:e,payload:n?JSON.stringify(n):void 0,responseType:"json",retry:{condition:function(e,t){var n=e.getStatusFamily();return n===t.SERVER_ERROR||n===t.CONNECTION_ERROR}}}).then((function(e){return o(),{response:e,map:a}}),(function(e){return o(),Promise.reject(e)}))}},{key:"_awaitResponseWithAck",value:function(e){var t,n;if(404===e.response.status)return Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_DEVICE,"No such device."));var r=null===(t=e.response.body)||void 0===t?void 0:t.ack_id;if(200===e.response.status&&r){if(null===(n=e.map)||void 0===n?void 0:n[r])return Promise.resolve(!0);var a=X();return this._awaitingAcknowledgment[r]=a,a.promise}return Promise.resolve(202===e.response.status&&!r)}},{key:"_parseCluster",value:function(e){if(e){var t=parseInt(e.timestamp,10);this._lastProcessedTimestamp>t||(this._lastProcessedTimestamp=t,this._parseClusterDevices(e),this._parseClusterPlayerState(e))}}},{key:"_parseClusterDevices",value:function(e){var t=this._lastActiveDevice;this._lastActiveDevice=null,this._lastKnownDevices=[],this._localDevice=null;var n=[];for(var r in e.devices)e.devices.hasOwnProperty(r)&&n.push(r);if(n.sort(),n.length){var a,o=e.active_device_id,i=Bo(n);try{for(i.s();!(a=i.n()).done;){var s,l=a.value,c=e.devices[l],d=this._formatClusterDevice(c,o);(s=this._lastKnownDevices).push.apply(s,(0,le.Z)(d));var u,p=Bo(d);try{for(p.s();!(u=p.n()).done;){var f=u.value;f.is_active&&(this._lastActiveDevice=f),f.local&&(this._localDevice=f)}}catch(y){p.e(y)}finally{p.f()}}}catch(y){i.e(y)}finally{i.f()}}if(!this._fetchedInitialState||!se(this._lastActiveDevice,t)){var h=e.player_state,_=h&&Ho(h);this.emit("device_state_changed",{deviceState:this._lastActiveDevice,hasOrphanedState:!this._lastActiveDevice&&!!_,disappeared:!!t&&!this._lastActiveDevice})}this.emit("devices_changed",{devices:this._lastKnownDevices,localDevice:this._localDevice})}},{key:"_formatClusterDevice",value:function(e,t){var n={};if(e&&Array.isArray(e.metadata))for(var r=0,a=e.metadata.length;r<a;r++){var o=e.metadata[r];n[o.type]=o.metadata}var i=e.capabilities||{},s={};"supports_hifi"in i&&(s.hifi_status=i.supports_hifi);var l={hidden:!1,id:e.device_id,is_active:e.device_id===t,is_controllable:!!i.is_controllable,is_observable:!!i.is_observable,local:e.device_id===this._localDeviceId,metadata:n,name:e.name,type:(e.device_type||Ie.UNKNOWN).toLowerCase(),version:e.device_software_version,volume:i.disable_volume?-1:e.volume/re||0,capabilities:{supports_lossless_audio:!!i.supports_lossless_audio},is_alias:!1,is_alias_group:!1,playback_features:s,is_group:!!e.is_group,is_being_activated:!1};if(!e.device_aliases)return[l];var c=[];for(var d in e.device_aliases)if(e.device_aliases.hasOwnProperty(d)){var u=e.device_aliases[d];if(u){var p=Object.assign(Object.assign({},l),{id:"".concat(l.id).concat(Wo).concat(u.id),name:u.display_name,is_alias:!0,is_alias_group:e.is_group||u.is_group,is_active:l.is_active&&e.selected_alias_id===u.id,is_group:!!u.is_group});c.push(p)}}return c}},{key:"_parseClusterPlayerState",value:function(e){this._lastKnownPlayerState=null;var t=e.active_device_id,n=t&&e.devices[t],r=e.player_state;r&&r.track&&(n&&n.capabilities&&!n.capabilities.is_observable?r=null:(n||(r.is_paused=!0,r.restrictions&&(delete r.restrictions.disallow_resuming_reasons,r.restrictions.disallow_pausing_reasons=["already_paused"])),r.duration=parseInt(r.duration,10),r.position=parseInt(r.position,10),r.position_as_of_timestamp=parseInt(r.position_as_of_timestamp,10),r.timestamp=parseInt(r.timestamp,10),r.next_tracks=r.next_tracks||[],r.prev_tracks=r.prev_tracks||[]),this._lastKnownPlayerState=r);var a=!n&&!!this._lastKnownPlayerState;a&&r&&!Ho(r)&&(this._lastKnownPlayerState=null,a=!1),this.emit("player_state_changed",{playerState:this._lastKnownPlayerState,orphaned:a,isLocal:!!t&&t===this._localDeviceId})}},{key:"_register",value:function(){var e=this;this._fetchedInitialState=!1;var t="".concat(this._endpoint,"/v1/devices/").concat(this._localObserverDeviceId);return this._connectionId||Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_CONNECTION_ID,"Cannot register: no connection id.")),this._transport.request(t,{method:"PUT",headers:{"X-Spotify-Connection-Id":this._connectionId,Accept:"application/json"},payload:JSON.stringify({member_type:"CONNECT_STATE",device:{device_info:{capabilities:{can_be_player:!1,hidden:!0,needs_full_player_state:!0}}}}),responseType:"json"}).then((function(t){429===t.status?e.emit("max_subscriptions_reached",{error:new So(H.CONNECTAPI_MAX_SUBSCRIPTIONS_REACHED,"Max connections reached")}):200===t.status&&(e.emit("registered",null),t.body&&(e._parseCluster(t.body),e._fetchedInitialState=!0)),429!==t.status&&408!==t.status||(e._lastKnownDevices=e._lastKnownDevices.map((function(e){return e.is_being_activated=!1,e})),e._localDevice&&(e._localDevice.is_being_activated=!1),e.emit("devices_changed",{devices:e._lastKnownDevices,localDevice:e._localDevice}))}))}},{key:"register",value:function(){return this._connectionId?this._descriptorPromise.then(this._register.bind(this)):Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_CONNECTION_ID,"Cannot register: no connection id."))}},{key:"deregister",value:function(){var e=this,t="".concat(this._endpoint,"/v1/devices/").concat(this._localObserverDeviceId);return this._transport.request(t,{method:"DELETE",responseType:"json"}).then((function(t){200===t.status&&e.emit("deregistered",null)}))}},{key:"getDevices",value:function(){var e=this;return this._fetchedInitialState?Promise.resolve({devices:this._lastKnownDevices,localDevice:this._localDevice}):new Promise((function(t){e.once("device_state_changed",(function(){t({devices:e._lastKnownDevices,localDevice:e._localDevice})}))}))}},{key:"getActiveDevice",value:function(){var e=this;return this._fetchedInitialState?Promise.resolve(this._lastActiveDevice):new Promise((function(t){e.once("device_state_changed",(function(e){t(e.data.deviceState)}))}))}},{key:"getContextPlayerState",value:function(){var e=this;return this._fetchedInitialState?Promise.resolve(this._lastKnownPlayerState):new Promise((function(t){e.once("player_state_changed",(function(e){t(e.data.playerState)}))}))}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?this._sendPlayerCommand("play",t,e):Promise.reject(new So(H.CONNECTAPI_CLIENT_INVALID_ARGUMENTS,"Descriptor is required for play commands"))}},{key:"updateCurrentContext",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getContextPlayerState().then((function(r){return r?r.session_id?r.context_url||n.forceNonUpdateable?e._sendPlayerCommand("update_context",t,{context:{url:r.context_url||"context://".concat(r.context_uri)},session_id:r.session_id}):Promise.resolve(!1):Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_SESSION_ID,"The current state does not have a session id")):Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"))}))}},{key:"setQueue",value:function(e,t){return this._sendPlayerCommand("set_queue",t,e)}},{key:"addToQueue",value:function(e,t){return this._sendPlayerCommand("add_to_queue",t,{track:e})}},{key:"togglePlay",value:function(e){var t=this;return this.getContextPlayerState().then((function(n){return n?n.is_paused?t.resume(e):t.pause(e):Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"))}))}},{key:"transfer",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._lastKnownDevices=this._lastKnownDevices.map((function(t){return t.is_being_activated=t.id===e,t})),this._localDevice&&(this._localDevice.is_being_activated=e===ne),this.emit("devices_changed",{devices:this._lastKnownDevices,localDevice:this._localDevice});var a={restore_paused:"restore"};return"paused"in r&&(a.restore_paused=r.paused?"pause":"resume"),this._sendConnectCommand("transfer",e||ne,{transfer_options:a,page_instance_id:null===(t=r.loggingParams)||void 0===t?void 0:t.pageInstanceId,interaction_id:null===(n=r.loggingParams)||void 0===n?void 0:n.interactionId})}},{key:"pause",value:function(e){return this._sendPlayerCommand("pause",e)}},{key:"resume",value:function(e){return this._sendPlayerCommand("resume",e)}},{key:"nextTrack",value:function(e,t){return this._sendPlayerCommand("skip_next",e,t)}},{key:"previousTrack",value:function(e,t){return this._sendPlayerCommand("skip_prev",e,t)}},{key:"seek",value:function(e,t){return isNaN(e)||e<0?Promise.reject(new So(H.CONNECTAPI_CLIENT_INVALID_POSITION,"Invalid position.")):this._sendPlayerCommand("seek_to",t,{value:e})}},{key:"setShuffle",value:function(e,t){return this._sendPlayerCommand("set_shuffling_context",t,{value:!!e})}},{key:"toggleShuffle",value:function(e){var t=this;return this.getContextPlayerState().then((function(n){if(!n)return Promise.reject(new So(H.CONNECTAPI_CLIENT_NO_STATE,"Nothing playing"));var r=n.options&&n.options.shuffling_context;return t.setShuffle(!r,e)}))}},{key:"setRepeatingContext",value:function(e,t){return this._sendPlayerCommand("set_repeating_context",t,{value:e})}},{key:"setRepeatingTrack",value:function(e,t){return this._sendPlayerCommand("set_repeating_track",t,{value:!!e})}},{key:"setOptions",value:function(e,t){return this._sendPlayerCommand("set_options",t,Object.assign({},e))}},{key:"setVolume",value:function(e,t){if(isNaN(e)||e<0)return Promise.reject(new So(H.CONNECTAPI_CLIENT_INVALID_VOLUME,"Invalid volume."));var n=Math.round(e*re);return this._sendConnectCommand("volume",t,{volume:n})}},{key:"logout",value:function(e){return this._sendConnectCommand("logout",e)}}],[{key:"create",value:function(e){return new n(e)}}]),n}($.vp);var Qo=Object.assign(Object.assign(Object.assign({},H),W.J),Z);function $o(e){var t,n=e.transport;if(!n)throw new TypeError("No Transport instance provided");var r=function(e){return at.create(e)}(Object.assign(Object.assign({},e.client),{transport:n,hidden:!!e.hidden,playTokenLostBehavior:e.hidden&&!e.onlyLocalState?"stop":"pause"})),a=e.streamer||{},o=e.controller||{},i=void 0,s=!1;e.streamer&&e.streamer.disabled?(e.hidden=!0,e.onlyLocalState=!1,e.claimInactivePlayerStates=!1,s=!0):(i=function(e){return vo(e,(function(e){var t=go.create(Object.assign(Object.assign({},e),{ListClass:za}));return{playbackServiceClient:t,playbackStateObserver:eo.create(t)}}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(r,a),o.autoregister=!1,e.onlyLocalState&&(o.decorateTrackWindow=!1,o.disableProgress=!0));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.getPublicTransport(),r=e.getVersionDescriptor().tagged,a=zo.create({autoregister:!("autoregister"in t)||t.autoregister,descriptor:e.getClientDescriptor(),transport:n});return Fo.create({client:e,playerClient:a,version:r,serverTime:Eo.X.create(n),decorateTrackWindow:"boolean"!=typeof t.decorateTrackWindow||t.decorateTrackWindow,disableProgress:t.disableProgress})}(r,o);return Ee.create({transport:n,client:r,streamer:i,controller:l,enableControllerWithoutStreamer:s,hidden:e.hidden,onlyLocalState:e.onlyLocalState,claimInactivePlayerStates:e.claimInactivePlayerStates,autoActivateElement:null!==(t=e.autoActivateElement)&&void 0!==t?t:"undefined"!=typeof WebKitMediaKeys,experimentalDeactivateOnStop:e.experimentalDeactivateOnStop})}var Xo=null;function Jo(){if(null===Xo)throw new Error("Missing `instance`. Have you called `setTransportInstance` yet?");return Xo}n(26699),n(32023);var ei=n(51206),ti=n.n(ei);function ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ni(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ai="@local",oi=function(){function e(t,n){(0,c.Z)(this,e),(0,r.Z)(this,"player",null),(0,r.Z)(this,"transport",null),(0,r.Z)(this,"playbackState",null),(0,r.Z)(this,"onConnectCallbacks",[]),(0,r.Z)(this,"onTrackChangeCallbacks",[]),(0,r.Z)(this,"onProgressCallbacks",[]),(0,r.Z)(this,"onVolumeChangeCallbacks",[]),(0,r.Z)(this,"onActiveStateChangeCallbacks",[]),(0,r.Z)(this,"onInitializationFailureCallbacks",[]),(0,r.Z)(this,"onResetCallbacks",[]),(0,r.Z)(this,"onPauseCallbacks",[]),(0,r.Z)(this,"onPlayCallbacks",[]),this.resource=n,this.session=t}return(0,d.Z)(e,[{key:"initialize",value:function(){var e=this,t=function(e){var t=ti().getParser(window.navigator.userAgent),n=function(e){switch(e){case"macOS":return"osx";case"Chrome OS":return"chrome";default:return e}}(t.getOSName()||"not_applicable"),r=function(e,t){if("Windows"===e)switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return""}return t}(n,t.getOSVersion()),a=t.getBrowserName(),o=t.getBrowserVersion();return"web_player ".concat(n," ").concat(r,";").concat(a," ").concat(o,";").concat(e).toLowerCase()}("embed");this.transport=Jo(),this.player=$o({transport:this.transport,client:{descriptor:{id:null,randomizeId:!0,name:"SPB",brand:"spotify",model:S,platform_identifier:t}},streamer:{disallowRobustnessValues:[Na.EMPTY]},hidden:!0,onlyLocalState:!0}),this.player.on(J.STATE_CHANGED,(function(t){var n=t.data.state;e.playbackState&&!n?e.onResetCallbacks.forEach((function(e){return e()})):n&&(e.playbackState&&n.track_window.current_track.uri===e.playbackState.track_window.current_track.uri||e.onTrackChangeCallbacks.forEach((function(e){return e(n.track_window.current_track)})),e.playbackState&&n.paused===e.playbackState.paused||(n.paused?e.onPauseCallbacks.forEach((function(e){return e()})):e.onPlayCallbacks.forEach((function(e){return e()})))),e.playbackState=n})),this.player.on(J.LAST_ACTIVE_DEVICE_INFO_CHANGED,(function(t){var n=t.data.deviceInfo;n&&(e.onVolumeChangeCallbacks.forEach((function(e){return e(n.volume)})),e.onActiveStateChangeCallbacks.forEach((function(e){return e(n.is_active)})))})),this.player.on(J.PROGRESS,(function(t){var n=t.data;e.onProgressCallbacks.forEach((function(e){return e(n)}))})),this.player.on(J.PLAYER_INITIALIZATION_FAILED,(function(t){var n=t.data;e.onInitializationFailureCallbacks.forEach((function(e){return e(n)})),e.onInitializationFailureCallbacks=[]})),this.player.on(J.LOCAL_PLAYER_ENABLED,(function(){e.onConnectCallbacks.forEach((function(e){return e()})),e.onConnectCallbacks=[]}))}},{key:"executeOrQueue",value:function(e){null===this.player?(this.onConnectCallbacks.push(e),this.initialize()):e()}},{key:"play",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.executeOrQueue((function(){e?t.player.playURI(e.uri,ai,ri(ri({},n),{},{autoplayCandidate:!1})):t.resume()}))}},{key:"pause",value:function(){var e=this;this.executeOrQueue((function(){e.player.pause(ai)}))}},{key:"resume",value:function(){var e=this;this.executeOrQueue((function(){e.player.resume(ai)}))}},{key:"next",value:function(){var e=this;this.executeOrQueue((function(){e.player.nextTrack(ai)}))}},{key:"prev",value:function(){var e=this;this.executeOrQueue((function(){e.player.previousTrack(ai)}))}},{key:"seek",value:function(e){var t=this;this.executeOrQueue((function(){t.player.seek(e,ai)}))}},{key:"seekForward",value:function(e){var t=this;this.executeOrQueue((function(){t.player.seekForward(e,ai)}))}},{key:"seekBackward",value:function(e){var t=this;this.executeOrQueue((function(){t.player.seekBackward(e,ai)}))}},{key:"setVolume",value:function(e){var t=this;this.executeOrQueue((function(){t.player.setVolume(e,ai)}))}},{key:"onProgress",value:function(e){var t=this;return this.onProgressCallbacks.push(e),{unsubscribe:function(){var n=t.onProgressCallbacks.indexOf(e);t.onProgressCallbacks.splice(n,1)}}}},{key:"onReset",value:function(e){var t=this;return this.onResetCallbacks.push(e),{unsubscribe:function(){var n=t.onResetCallbacks.indexOf(e);t.onResetCallbacks.splice(n,1)}}}},{key:"onPause",value:function(e){var t=this;return this.onPauseCallbacks.push(e),{unsubscribe:function(){var n=t.onPauseCallbacks.indexOf(e);t.onPauseCallbacks.splice(n,1)}}}},{key:"onPlay",value:function(e){var t=this;return this.onPlayCallbacks.push(e),{unsubscribe:function(){var n=t.onPlayCallbacks.indexOf(e);t.onPlayCallbacks.splice(n,1)}}}},{key:"onTrackChange",value:function(e){var t=this;return this.onTrackChangeCallbacks.push(e),{unsubscribe:function(){var n=t.onTrackChangeCallbacks.indexOf(e);t.onTrackChangeCallbacks.splice(n,1)}}}},{key:"onVolumeChange",value:function(e){var t=this;return this.onVolumeChangeCallbacks.push(e),{unsubscribe:function(){var n=t.onVolumeChangeCallbacks.indexOf(e);t.onVolumeChangeCallbacks.splice(n,1)}}}},{key:"onActiveStateChange",value:function(e){var t=this;return this.onActiveStateChangeCallbacks.push(e),{unsubscribe:function(){var n=t.onActiveStateChangeCallbacks.indexOf(e);t.onActiveStateChangeCallbacks.splice(n,1)}}}},{key:"onInitializationFailure",value:function(e){var t=this;return this.onInitializationFailureCallbacks.push(e),{unsubscribe:function(){var n=t.onInitializationFailureCallbacks.indexOf(e);t.onInitializationFailureCallbacks.splice(n,1)}}}},{key:"onUnavailableTrack",value:function(){}}]),e}(),ii={};n(34553);var si,li=function(){function e(){var t=this;(0,c.Z)(this,e),(0,r.Z)(this,"onTrackChangeCallbacks",[]),(0,r.Z)(this,"onVolumeChangeCallbacks",[]),(0,r.Z)(this,"onUnavailableTrackCallbacks",[]),(0,r.Z)(this,"onPauseCallbacks",[]),(0,r.Z)(this,"onPlayCallbacks",[]),this.player=new Audio,this.player.addEventListener("ended",(function(){t.next()})),this.player.addEventListener("playing",(function(){t.onPlayCallbacks.forEach((function(e){return e()}))})),this.player.addEventListener("pause",(function(){t.onPauseCallbacks.forEach((function(e){return e()}))}))}return(0,d.Z)(e,[{key:"initialize",value:function(){}},{key:"_playIndex",value:function(e){var t=this;this.currentTrack=this.trackList[e],this.onTrackChangeCallbacks.forEach((function(e){return e(t.currentTrack)})),this.currentTrack&&this.currentTrack.is_playable&&this.currentTrack.preview_url?(this.player.src=this.currentTrack.preview_url,this.resume()):this.onUnavailableTrackCallbacks.forEach((function(e){return e(t.currentTrack)}))}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=Math.max(e._trackList.findIndex((function(e){return e.is_playable})),0),r=t.index||n;this.context=e,this.trackList=e._trackList,this._playIndex(r)}else this.player.src&&this.resume()}},{key:"pause",value:function(){this.player.pause()}},{key:"resume",value:function(){var e=this.player.play();void 0!==e&&e.catch((function(){}))}},{key:"next",value:function(){if(this.trackList){var e=this.trackList.indexOf(this.currentTrack),t=e<this.trackList.length-1?e+1:0;this._playIndex(t)}}},{key:"prev",value:function(){if(this.trackList){var e=this.trackList.indexOf(this.currentTrack);this._playIndex(e-1)}}},{key:"seek",value:function(e){this.player.currentTime=e/1e3}},{key:"seekForward",value:function(e){this.seek(1e3*this.player.currentTime+e)}},{key:"seekBackward",value:function(e){this.seek(1e3*this.player.currentTime-e)}},{key:"setVolume",value:function(e){this.player.volume=e,this.onVolumeChangeCallbacks.forEach((function(t){return t(e)}))}},{key:"onProgress",value:function(e){var t=this,n=function(){return e({position:1e3*t.player.currentTime})};return this.player.addEventListener("timeupdate",n),{unsubscribe:function(){t.player.removeEventListener("timeupdate",n)}}}},{key:"onTrackChange",value:function(e){var t=this;return this.onTrackChangeCallbacks.push(e),{unsubscribe:function(){var n=t.onTrackChangeCallbacks.indexOf(e);t.onTrackChangeCallbacks.splice(n,1)}}}},{key:"onVolumeChange",value:function(e){var t=this;return this.onVolumeChangeCallbacks.push(e),{unsubscribe:function(){var n=t.onVolumeChangeCallbacks.indexOf(e);t.onVolumeChangeCallbacks.splice(n,1)}}}},{key:"onUnavailableTrack",value:function(e){var t=this;return this.onUnavailableTrackCallbacks.push(e),{unsubscribe:function(){var n=t.onUnavailableTrackCallbacks.indexOf(e);t.onUnavailableTrackCallbacks.splice(n,1)}}}},{key:"onReset",value:function(){}},{key:"onPause",value:function(e){var t=this;return this.onPauseCallbacks.push(e),{unsubscribe:function(){var n=t.onPauseCallbacks.indexOf(e);t.onPauseCallbacks.splice(n,1)}}}},{key:"onPlay",value:function(e){var t=this;return this.onPlayCallbacks.push(e),{unsubscribe:function(){var n=t.onPlayCallbacks.indexOf(e);t.onPlayCallbacks.splice(n,1)}}}},{key:"onInitializationFailure",value:function(){}},{key:"onActiveStateChange",value:function(e){e(!0)}}]),e}();const ci=function(e){return k("config",{})[e]};var di=function(e){return e.playback.isPlaying},ui=function(e){return e.playback.isPaused},pi=function(e){return C(e,e.playback.trackUri)},fi=function(e){var t=e.platform,n=void 0===t?{}:t,r=e.session,a=void 0===r?{}:r;return n.forcePreview||n.isMobile||n.isSafari||a.premiumOnlyMarket||!a.loggedIn||!a.accessToken},hi=function(e){var t=pi(e);if(t)return fi(e)?Math.min(t.duration_ms,3e4):t.duration_ms},_i=function(e){return fi(e)?si||(si=new li):(t=e.session,n=e.resource,ii[n]&&t.accessToken===ii[n].session.accessToken||(ii[n]=new oi(t,n)),ii[n]);var t,n},yi=function(e){var t=pi(e);return!(!t||"episode"!==t.type)&&-1!==(t.available_markets||M(e).available_markets||t.show.available_markets||[]).indexOf(ci("countryCode"))};function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vi="PROMPT",bi="UNAVAILABLE_TRACK",Ei={visible:!1,type:null};const wi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ki.SHOW_PROMPT:return gi(gi({},e),{},{visible:!0,type:vi});case Ci.UNAVAILABLE_TRACK:return gi(gi({},e),{},{visible:!0,type:bi});case ki.HIDE_MODAL:return gi(gi({},e),{},{visible:!1,type:null});default:return e}};var Si={SHOW_PROMPT:"SHOW_PROMPT",HIDE_MODAL:"HIDE_MODAL",CLICK_LOGIN:"CLICK_LOGIN",CLICK_SIGNUP:"CLICK_SIGNUP",GET_SPOTIFY_APP:"GET_SPOTIFY_APP"};const ki=Si;var Ri=function(e){return function(t,n){var r=n(),a=r.modal,o=a.type,i=a.visible;o===bi&&i||fi(r)&&setTimeout((function(){return t({type:Ai.PROGRESS_UPDATE})}),e||0)}};function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ai={RESET:"RESET",PLAY:"PLAY",PAUSE:"PAUSE",SKIP_NEXT:"SKIP_NEXT",SKIP_PREV:"SKIP_PREV",TRACK_CHANGE:"TRACK_CHANGE",PROGRESS_UPDATE:"PROGRESS_UPDATE",PLAY_IN_APP:"PLAY_IN_APP",GET_IN_APP:"GET_IN_APP",UNAVAILABLE_TRACK:"UNAVAILABLE_TRACK"};const Ci=Ai;var Ii,Li,Oi,Di=function(){return{type:Ai.PLAY}},Ni=function(){return{type:Ai.PAUSE}},ji=function(){return function(e,t){var n=t(),r=_i(n);e({type:Ai.SKIP_NEXT}),e(Di()),r.next(),e(Ri())}},Mi=function(){return function(e,t){var n=t(),r=_i(n);e({type:Ai.SKIP_PREV}),e(Di()),r.prev(),e(Ri())}},xi=function(e){return{type:Ai.TRACK_CHANGE,uri:e}},Ui=function(){return function(e,t){e(Ni()),_i(t()).pause()}},Fi=function(e){return function(t,n){var r=n(),a=void 0!==e;if(a||!di(r)){var o=_i(r);if(!a&&ui(r))o.resume();else{var i=a?{index:e}:{};o.play(Ti(Ti({},M(r)),{},{_trackList:U(r)}),i),t(Ri(3e3))}}}},Zi=n(71002),Bi=(n(51532),n(69453)),Yi=n.n(Bi);function Ki(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(Ii||(Ii={})),function(e){e.AR=" ",e.FA=" ",e.EN=", "}(Li||(Li={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(Oi||(Oi={}));var Vi={},Gi=function(e,t){try{return(Vi[e]||(Vi[e]=new Intl.PluralRules(e))).select(t)}catch(n){return Oi.OTHER}};function Hi(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var Wi=function(e){return"ar"===e?"ar-u-nu-latn":e},qi=function(){function e(){(0,c.Z)(this,e),(0,r.Z)(this,"_relativeTimeFormat",void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat),(0,r.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=Ii.en}return(0,d.Z)(e,[{key:"getDateTimeFormat",value:function(e){var t=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,r.Z)({},t,e[t])}))),n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(Wi(this._locale),e),this._dateTimeFormats.set(t,n)),n}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e,this._dateTimeFormats.clear()}},{key:"getLocale",value:function(){return this._locale}},{key:"getSmartlingLocale",value:function(){var e=this._locale;return Yi()[e]||e}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];if(Ki(t)){var i=a[0],s=Gi(this._locale,parseInt(i,10)),l=t[s];void 0!==l?n=l:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var c=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"];if(!c.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==a?void 0:a.length)>0)for(var d=0;d<a.length;d++){var u=a[d];if(null!=u)if("string"==typeof u)n=n.replace("{".concat(d,"}"),Hi(u)).replace("%".concat(d,"%"),Hi(u));else if("number"==typeof u){var p=this.formatNumber(u);n=n.replace("{".concat(d,"}"),p).replace("%".concat(d,"%"),p)}else if("object"===(0,Zi.Z)(u))for(var f=0,h=Object.keys(u);f<h.length;f++){var _=h[f],y=u[_];n=n.replace("%".concat(_,"%"),Hi(y))}}return n}},{key:"getSeparator",value:function(){switch(this._locale){case Ii.ar:return Li.AR;case Ii.fa:return Li.FA;default:return Li.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(Wi(this._locale),t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},r=t||n;return this.getDateTimeFormat(r).format(e)}},{key:"formatRelativeDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(Date.now()),r=(e=new Date(e)).getTime()-n.getTime(),a=Math.abs(r)<2592e6;if(a&&null!==this._relativeTimeFormat){var o=zi(r),i=o.days,s=o.hours,l=o.minutes,c=o.seconds;return i||s||l?i||s?i?this._relativeTimeFormat.format(i,"days"):this._relativeTimeFormat.format(s,"hours"):this._relativeTimeFormat.format(l,"minutes"):this._relativeTimeFormat.format(c,"seconds")}return this.formatDate(e,t)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=Ii.en,Vi={}}}]),e}();function zi(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24)}}var Qi=new qi,$i={width:"100%",height:"100%",color:"white"};const Xi=function(){return a.createElement("svg",{style:$i,viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},a.createElement("title",null,Qi.get("embed_play")),a.createElement("path",{d:"M7.712 22.04a.732.732 0 0 1-.806.007.767.767 0 0 1-.406-.703V4.656c0-.31.135-.544.406-.703.271-.16.54-.157.806.006l14.458 8.332c.266.163.4.4.4.709 0 .31-.134.546-.4.71L7.712 22.04z",fill:"currentColor",fillRule:"evenodd"}))};var Ji={width:"100%",height:"100%",color:"white"};const es=(0,l.zo)((function(){return a.createElement("svg",{style:Ji,viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},a.createElement("title",null,Qi.get("embed_pause")),a.createElement("g",{fill:"currentColor",fillRule:"evenodd"},a.createElement("rect",{x:"5",y:"3",width:"5",height:"20",rx:"1"}),a.createElement("rect",{x:"16",y:"3",width:"5",height:"20",rx:"1"})))}),{width:"100%",height:"100%"});function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var as=(0,l.zo)("div",{position:"relative",width:"100%",height:"100%",minWidth:"80px",minHeight:"80px"}),os=function(e){(0,p.Z)(n,e);var t=rs(n);function n(e){var a;return(0,c.Z)(this,n),a=t.call(this,e),(0,r.Z)((0,u.Z)(a),"state",{isLoaded:!1}),(0,r.Z)((0,u.Z)(a),"onImageLoad",(function(){a.setState({isLoaded:!0})})),e.src&&a.loadImage(e.src),a}return(0,d.Z)(n,[{key:"componentDidUpdate",value:function(){this.props.src&&!this._img&&this.loadImage(this.props.src)}},{key:"componentWillUnmount",value:function(){this._img&&(this._img.onload=null)}},{key:"loadImage",value:function(e){this._img=new Image,this._img.onload=this.onImageLoad,this._img.src=e}},{key:"render",value:function(){var e={height:"100%",position:"relative"};e=this.props.src&&this.state.isLoaded?ns(ns({},e),{},{backgroundImage:"url(".concat(this.props.src,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center ".concat(this.props.top?"top":"center")}):ns(ns({},e),{},{backgroundColor:"transparent"});var t=(0,l.zo)("div",e);return a.createElement(as,null,a.createElement(t,{onClick:this.props.onClick},this.props.children))}}]),n}(a.Component);function is(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ss=(0,l.zo)("button",{background:"rgba(0, 0, 0, 0.5)",border:"1px solid white",borderRadius:"50%",position:"absolute",top:"25%",left:"25%",height:"50%",width:"50%",boxShadow:"0 0 10px rgba(0, 0, 0, 0.4)",transition:"transform 0.1s",cursor:"pointer",":hover":{transform:"scale(1.1)"}}),ls=function(e){(0,p.Z)(n,e);var t=is(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props.isPlaying?es:Xi,t=this.props.isPlaying?Qi.get("embed_pause"):Qi.get("embed_play"),n=this.props.noCoverArt?void 0:this.props.coverArtUrl;return a.createElement(os,{src:n,onClick:this.props.onClick,top:this.props.top},this.props.noButton?void 0:a.createElement(ss,{title:t,onClick:this.props.onClick},a.createElement(e,null)))}}]),n}(a.PureComponent);function cs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ds=function(e){(0,p.Z)(n,e);var t=cs(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"handleClick",(function(t){e.togglePlayback(),t.stopPropagation()})),(0,r.Z)((0,u.Z)(e),"handleKeydown",(function(t){" "===t.key&&e.togglePlayback()})),(0,r.Z)((0,u.Z)(e),"togglePlayback",(function(){e.props.isPlaying?e.props.onPause():e.props.onPlay()})),e}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){return a.createElement(ls,(0,G.Z)({},this.props,{onClick:this.handleClick}))}}]),n}(a.Component);const us=(0,i.$j)((function(e){return{isPlaying:di(e),isPaused:ui(e),coverArtUrl:F(e)}}),(function(e){return{onPlay:function(){return e(Fi())},onPause:function(){return e(Ui())}}}))(ds);n(29254);const ps=function(){return a.createElement("div",{style:{margin:"16px"}},a.createElement("p",null,"This size is now its own component, and not yet implemented... Stay put!"))};function fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var hs=(0,l.zo)("a",{display:"block",margin:"8px 8px",textDecoration:"none",color:"inherit",fontWeight:"200",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",cursor:"pointer"}),_s=(0,l.zo)("div",(function(e){var t;return t={color:e.$color,fontWeight:E,textOverflow:"ellipsis",overflow:"hidden"},(0,r.Z)(t,m,{fontSize:"14px",lineHeight:"19px"}),(0,r.Z)(t,g,{fontSize:"16px",lineHeight:"23px"}),t})),ys=(0,l.zo)("div",{textOverflow:"ellipsis",overflow:"hidden"}),ms=function(e){(0,p.Z)(n,e);var t=fs(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.titleColor,r=e.subtitle,o=e.onClick;return a.createElement(hs,{onClick:o},a.createElement(_s,{$color:n},a.createElement("span",{dir:"auto"},t)),a.createElement(ys,null,a.createElement("span",{dir:"auto","data-testid":"entity-owner"},r)))}}]),n}(a.PureComponent);(0,r.Z)(ms,"defaultProps",{titleColor:_.ixZ});var gs=(0,D.P1)([function(e){return M(e)},function(e){return pi(e)}],(function(e,t){return"artist"!==e.type||t?(t||e).name:Qi.get("top_tracks_for_artist",{artist:e.name})})),vs=(0,D.P1)([function(e){return M(e)},function(e){return pi(e)}],(function(e,t){if("playlist"===e.type&&!t)return e.primary_color})),bs=(0,D.P1)([function(e){return M(e)},function(e){return pi(e)}],(function(e,t){switch(e.type){case"album":return e.artists.map((function(e){return e.name})).join(Qi.getSeparator());case"playlist":return t?"episode"===t.type?t.show.name:t.artists.map((function(e){return e.name})).join(Qi.getSeparator()):e.owner.display_name;case"track":return e.album.artists.map((function(e){return e.name})).join(Qi.getSeparator());case"episode":return e.show.name;case"show":return t?e.name:e.publisher;default:return""}}));const Es=(0,i.$j)((function(e){return{title:gs(e),titleColor:vs(e),subtitle:bs(e)}}))(ms);n(26541);function ws(e,t){var n,r=0;return function(){for(var a=this,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var l=Date.now();r+t<l?(e.apply(this,i),r=l):(clearTimeout(n),n=setTimeout((function(){e.apply(a,i),r=l}),t))}}n(44048);var Ss=function(e){if(-1===e||Number.isNaN(e))return"";var t=function(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),a=60*r,o=n-a;return{hours:r,minutes:o,seconds:t-60*a-60*o}}(e),n=t.hours,r=t.minutes,a=t.seconds,o=n>0?"".concat(n,":"):"",i=n>0&&r<10?"0".concat(r):r,s=a<10?"0".concat(a):a;return"".concat(o).concat(i,":").concat(s)};function ks(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function Rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ts=(0,l.zo)("div",(function(e){var t=e.$disabled,n=e.$styleProps;return Ps({padding:" 16px 0",position:"relative",flexGrow:1,cursor:t?"auto":"pointer"},void 0===n?{}:n)})),As=(0,l.zo)("div",{backgroundColor:"rgba(255, 255, 255, 0.3)",height:"4px",flex:"4"}),Cs=(0,l.zo)("div",(function(e){var t=e.$progress,n=e.$disabled;return{backgroundColor:"".concat(_.ixZ),height:"4px",width:"".concat(t,"%"),opacity:n?"0.4":"1"}})),Is={from:{opacity:"0"},to:{opacity:"1"}},Ls={from:{opacity:"1"},to:{opacity:"0"}},Os=(0,l.zo)("div",(function(e){var t=e.$progress,n=e.$isDragging,r=e.$width;return{position:"absolute",left:"calc(".concat(t,"% - ").concat(r,"px / 2)"),font:"0.8em Verdana,sans-serif",boxShadow:"0.1em 0.1em 0 ".concat(_.Snx,"B3"),bottom:"30px",display:"block",backgroundColor:"".concat(_.ixZ),color:"".concat(_.Snx),padding:"2px 5px",textShadow:"none",textAlign:"center",animationName:n?Is:Ls,animationDuration:"0.1s",opacity:n?"1":"0",userSelect:"none",userDrag:"none"}})),Ds=(0,l.zo)("div",(function(e){var t=e.$progress,n=e.$isMouseOver,r=e.$disabled;return{position:"absolute",left:"calc(".concat(t,"% - 6px)"),bottom:"12px",display:n&&!r?"block":"none",backgroundColor:"".concat(_.ixZ),padding:"0px",textShadow:"none",height:"12px",width:"12px",zIndex:"100",boxShadow:"0 2px 4px 0 ".concat(_.Snx,"80"),borderRadius:"50%",userSelect:"none",userDrag:"none"}})),Ns=function(e){(0,p.Z)(n,e);var t=ks(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"state",{isDragging:!1,fakeValue:null,isMouseOver:!1}),(0,r.Z)((0,u.Z)(e),"renderSleepCount",0),(0,r.Z)((0,u.Z)(e),"setBar",(function(t){e.bar=t})),(0,r.Z)((0,u.Z)(e),"setProgressTimeTooltip",(function(t){e.progressTimeTooltip=t})),(0,r.Z)((0,u.Z)(e),"handleMouseDown",(function(t){if(!e.props.disabled&&0===t.button){t.stopPropagation();var n=e.getRelativePosition(t.clientX);e.setState({isDragging:!0,fakeValue:n}),e.props.shouldIgnoreDragStart||e.reportUpdate(n)}})),(0,r.Z)((0,u.Z)(e),"handleMouseMove",ws((function(t){if(!e.props.disabled&&e.state.isDragging)if(e.isOutsideBounds(t))e.handleMouseUp(t);else{var n=e.getRelativePosition(t.clientX);e.setState({fakeValue:n}),e.props.shouldUpdateWhileDragging&&e.reportUpdate(n)}}),50)),(0,r.Z)((0,u.Z)(e),"handleMouseUp",(function(t){!e.props.disabled&&e.state.isDragging&&(t.stopPropagation(),e.setState({isDragging:!1}),e.reportUpdate(e.getRelativePosition(t.clientX)))})),(0,r.Z)((0,u.Z)(e),"handleWrapperMouseEnter",(function(){e.setState({isMouseOver:!0})})),(0,r.Z)((0,u.Z)(e),"handleWrapperMouseLeave",(function(){e.setState({isMouseOver:!1})})),e}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(Ps(Ps({},e),this.props)).every((function(t){return e[t]===n.props[t]})),a=Object.keys(Ps(Ps({},t),this.state)).every((function(e){return t[e]===n.state[e]}));return(!r||!a)&&(Math.abs(e.currentValue-this.props.currentValue>1e3)?(this.renderSleepCount=0,!0):(this.state.isDragging&&!t.isDragging&&(this.renderSleepCount=3),!(this.renderSleepCount>0)||(this.renderSleepCount--,!1)))}},{key:"getRelativePosition",value:function(e){var t=this.bar.getBoundingClientRect(),n=t.right-t.left;return Math.max(0,Math.min((e-t.left)/n,1))*this.props.max}},{key:"reportUpdate",value:function(e){this.props.onUpdate(Math.max(0,Math.min(e,this.props.max)))}},{key:"isOutsideBounds",value:function(e){return e.pageX<0||e.pageY<0||e.pageX>window.innerWidth||e.pageY>window.innerHeight+window.scrollY}},{key:"progressTimeTooltipWidth",value:function(){if(this.progressTimeTooltip){var e=this.progressTimeTooltip.getBoundingClientRect();return e.right-e.left}return 0}},{key:"render",value:function(){var e=this.props,t=e.currentValue,n=e.max,r=e.disabled,o=e.$styleProps,i=this.state,s=i.isDragging,l=i.fakeValue,c=i.isMouseOver,d=s?l:t,u=Math.min(d/n*100,100),p=Ss(Math.max(0,d));return a.createElement(Ts,{onMouseDown:this.handleMouseDown,$styleProps:o,$disabled:r,onMouseEnter:this.handleWrapperMouseEnter,onMouseLeave:this.handleWrapperMouseLeave},a.createElement(Os,{ref:this.setProgressTimeTooltip,$progress:u,$width:this.progressTimeTooltipWidth(),$isDragging:s},p),a.createElement(Ds,{$progress:u,$isMouseOver:c,$disabled:r}),a.createElement(As,{ref:this.setBar},a.createElement(Cs,{$progress:u,$disabled:r})))}}]),n}(a.Component);function js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(0,r.Z)(Ns,"defaultProps",{currentValue:0,max:1,shouldUpdateWhileDragging:!1,shouldIgnoreDragStart:!1,disabled:!1,onUpdate:function(){}});var xs=(0,l.zo)("div",(function(e){var t=e.$max,n=e.$styleProps;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({display:t?"inline-block":"none",verticalAlign:"top",fontSize:"10px",whiteSpace:"nowrap",margin:"0 8px",fontFeatureSettings:'"tnum"'},void 0===n?{}:n)})),Us=function(e){(0,p.Z)(n,e);var t=js(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.currentValue,n=e.max,r=e.$styleProps;return a.createElement(xs,{$max:n,$styleProps:r},"-",n&&t?"".concat(Ss(Math.max(0,n-t))):Ss(0))}}]),n}(a.Component);function Fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(0,r.Z)(Us,"defaultProps",{currentValue:0});const Zs=(0,l.zo)("button",(function(e){var t=e.$size,n=void 0===t?40:t,a=e.$styleProps,o=void 0===a?{}:a;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fs(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({padding:0,border:"none",cursor:"pointer",background:"transparent",width:"".concat(n,"px"),height:"".concat(n,"px")},o)}));function Bs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Ys=(0,l.zo)("svg",{width:"100%",height:"100%",filter:b}),Ks=function(e){(0,p.Z)(n,e);var t=Bs(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.$styleProps;return a.createElement(Zs,{onClick:t,title:Qi.get("playback-control.skip-forward"),$styleProps:n},a.createElement(Ys,{viewBox:"16 16 32 32"},a.createElement("path",{d:"M38,22 C38,21.7248663 38.0978826,21.489419 38.2936508,21.2936508 C38.489419,21.0978826 38.7248663,21 39,21 L41,21 C41.2751337,21 41.510581,21.0978826 41.7063492,21.2936508 C41.9021174,21.489419 42,21.7248663 42,22 L42,42 C42,42.2751337 41.9021174,42.510581 41.7063492,42.7063492 C41.510581,42.9021174 41.2751337,43 41,43 L39,43 C38.7248663,43 38.489419,42.9021174 38.2936508,42.7063492 C38.0978826,42.510581 38,42.2751337 38,42 L38,33.7619048 L23.4920635,42.1269841 C23.1640195,42.3280433 22.833335,42.3306888 22.5,42.1349206 C22.166665,41.9391525 22,41.6507956 22,41.2698413 L22,22.7301587 C22,22.3492044 22.166665,22.0608475 22.5,21.8650794 C22.833335,21.6693112 23.1640195,21.6719567 23.4920635,21.8730159 L38,30.2380952 L38,22 Z",fill:"white"})))}}]),n}(a.PureComponent);function Vs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Gs=(0,l.zo)("svg",{width:"100%",height:"100%",filter:b}),Hs=function(e){(0,p.Z)(n,e);var t=Vs(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.size,r=e.$styleProps;return a.createElement(Zs,{onClick:t,title:Qi.get("playback-control.skip-back"),$size:n,$styleProps:r},a.createElement(Gs,{viewBox:"16 16 32 32"},a.createElement("path",{d:"M40.5079365,21.8730159 C40.8359805,21.6719567 41.166665,21.6693112 41.5,21.8650794 C41.833335,22.0608475 42,22.3492044 42,22.7301587 L42,41.2698413 C42,41.6507956 41.833335,41.9391525 41.5,42.1349206 C41.166665,42.3306888 40.8359805,42.3280433 40.5079365,42.1269841 L26,33.7619048 L26,42 C26,42.2751337 25.9021174,42.510581 25.7063492,42.7063492 C25.510581,42.9021174 25.2751337,43 25,43 L23,43 C22.7248663,43 22.489419,42.9021174 22.2936508,42.7063492 C22.0978826,42.510581 22,42.2751337 22,42 L22,22 C22,21.7248663 22.0978826,21.489419 22.2936508,21.2936508 C22.489419,21.0978826 22.7248663,21 23,21 L25,21 C25.2751337,21 25.510581,21.0978826 25.7063492,21.2936508 C25.9021174,21.489419 26,21.7248663 26,22 L26,30.2380952 L40.5079365,21.8730159 Z",fill:"white"})))}}]),n}(a.PureComponent);function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var qs=(0,l.zo)("svg",{width:"100%",height:"100%",filter:b}),zs=function(e){(0,p.Z)(n,e);var t=Ws(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.$styleProps;return a.createElement(Zs,{onClick:t,title:Qi.get("spe.playback-control.skip-backward-15"),$styleProps:n},a.createElement(qs,{viewBox:"0 0 32 32"},a.createElement("path",{d:"M2.0952381,14.8730159 C2.60317714,14.4920616 2.92063429,13.9947121 3.04761905,13.3809524 L4.53968254,13.3809524 L4.53968254,25.6666667 L2.87301587,25.6666667 L2.87301587,16.6984127 L0.158730159,16.6984127 L0.158730159,15.4920635 C0.941802857,15.4708994 1.58729905,15.2645522 2.0952381,14.8730159 Z M14.952381,18.7777778 C15.301589,19.1269859 15.5740731,19.555553 15.7698413,20.0634921 C15.9656094,20.5714311 16.0634921,21.1322721 16.0634921,21.7460317 C16.0634921,22.3174632 15.962964,22.8571403 15.7619048,23.3650794 C15.5608456,23.8624363 15.2698432,24.3015854 14.8888889,24.6825397 C14.5079346,25.0529119 14.0476217,25.3492052 13.5079365,25.5714286 C12.9576692,25.7830698 12.3439187,25.8888889 11.6666667,25.8888889 C11.052907,25.8888889 10.4894206,25.7910063 9.97619048,25.5952381 C9.4629604,25.3994699 9.0185204,25.1375678 8.64285714,24.8095238 C8.26719389,24.4814798 7.9656096,24.0978858 7.73809524,23.6587302 C7.51058087,23.2195745 7.37566159,22.7513252 7.33333333,22.2539683 L8.87301587,21.8730159 C8.90476206,22.222224 8.99470825,22.5529085 9.14285714,22.8650794 C9.29100603,23.1772502 9.48677127,23.4444433 9.73015873,23.6666667 C9.97354619,23.8994721 10.2539667,24.0793644 10.5714286,24.2063492 C10.8994725,24.333334 11.2645483,24.3968254 11.6666667,24.3968254 C12.0687851,24.3968254 12.4365063,24.333334 12.7698413,24.2063492 C13.1031763,24.0793644 13.3888877,23.8994721 13.6269841,23.6666667 C13.8650806,23.4338613 14.0502639,23.1534408 14.1825397,22.8253968 C14.3148155,22.4973529 14.3809524,22.14815 14.3809524,21.7777778 C14.3809524,21.3439132 14.31217,20.9629646 14.1746032,20.6349206 C14.0370363,20.3068767 13.8465621,20.0264562 13.6031746,19.7936508 C13.3597871,19.5608454 13.0740757,19.3835985 12.7460317,19.2619048 C12.4179878,19.140211 12.058203,19.0793651 11.6666667,19.0793651 C11.1481456,19.0793651 10.6772508,19.1878296 10.2539683,19.4047619 C9.83068571,19.6216942 9.48677381,19.8994692 9.22222222,20.2380952 L7.68253968,19.6666667 L9.01587302,13.3809524 L15.4920635,13.3809524 L15.4920635,14.9365079 L10.1746032,14.9365079 L9.38095238,18.6984127 C9.52910127,18.5290997 9.70899365,18.380953 9.92063492,18.2539683 C10.1322762,18.1269835 10.3492052,18.0211644 10.5714286,17.9365079 C10.804234,17.8412694 11.0423268,17.7777779 11.2857143,17.7460317 C11.5291017,17.7037035 11.7671946,17.6825397 12,17.6825397 C12.6031776,17.6825397 13.1587276,17.7777768 13.6666667,17.968254 C14.1640237,18.1587311 14.5925908,18.4285697 14.952381,18.7777778 Z M20,5.33333333 C21.4391606,5.33333333 22.8174537,5.60581738 24.1349206,6.15079365 C25.4523875,6.69576992 26.5872968,7.4312123 27.5396825,8.35714286 C28.4920683,9.28307341 29.2513199,10.3835915 29.8174603,11.6587302 C30.3836007,12.9338688 30.6666667,14.2698343 30.6666667,15.6666667 C30.6666667,17.063499 30.3836007,18.3994645 29.8174603,19.6746032 C29.2513199,20.9497418 28.4920683,22.0502599 27.5396825,22.9761905 C26.5872968,23.902121 25.4523875,24.6375634 24.1349206,25.1825397 C22.8174537,25.727516 21.4391606,26 20,26 L20,24.6666667 C21.6825481,24.6666667 23.2407336,24.2645543 24.6746032,23.4603175 C26.1084728,22.6560806 27.2433821,21.563499 28.0793651,20.1825397 C28.9153481,18.8015804 29.3333333,17.2963044 29.3333333,15.6666667 C29.3333333,14.0370289 28.9153481,12.5317529 28.0793651,11.1507937 C27.2433821,9.76983437 26.1084728,8.6772527 24.6746032,7.87301587 C23.2407336,7.06877905 21.6825481,6.66666667 20,6.66666667 L10.6666667,6.66666667 L10.6666667,9.66666667 L4.31746032,6 L10.6666667,2.33333333 L10.6666667,5.33333333 L20,5.33333333 Z",fill:"white"})))}}]),n}(a.PureComponent);function Qs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var $s=(0,l.zo)("svg",{width:"100%",height:"100%",filter:b}),Xs=function(e){(0,p.Z)(n,e);var t=Qs(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.$styleProps;return a.createElement(Zs,{onClick:t,title:Qi.get("playback-control.skip-forward-15"),$styleProps:n},a.createElement($s,{viewBox:"0 0 32 32"},a.createElement("path",{d:"M12,6.66666667 C10.3174519,6.66666667 8.75926643,7.06877905 7.32539683,7.87301587 C5.89152722,8.6772527 4.75661794,9.76983437 3.92063492,11.1507937 C3.0846519,12.5317529 2.66666667,14.0370289 2.66666667,15.6666667 C2.66666667,17.2963044 3.0846519,18.8015804 3.92063492,20.1825397 C4.75661794,21.563499 5.89152722,22.6560806 7.32539683,23.4603175 C8.75926643,24.2645543 10.3174519,24.6666667 12,24.6666667 L12,26 C10.5608394,26 9.18254627,25.727516 7.86507937,25.1825397 C6.54761246,24.6375634 5.41270317,23.902121 4.46031746,22.9761905 C3.50793175,22.0502599 2.74868008,20.9497418 2.18253968,19.6746032 C1.61639929,18.3994645 1.33333333,17.063499 1.33333333,15.6666667 C1.33333333,14.2698343 1.61639929,12.9338688 2.18253968,11.6587302 C2.74868008,10.3835915 3.50793175,9.28307341 4.46031746,8.35714286 C5.41270317,7.4312123 6.54761246,6.69576992 7.86507937,6.15079365 C9.18254627,5.60581738 10.5608394,5.33333333 12,5.33333333 L21.3333333,5.33333333 L21.3333333,2.33333333 L27.6825397,6 L21.3333333,9.66666667 L21.3333333,6.66666667 L12,6.66666667 Z M13.7777778,15.8253968 C14.5714325,15.8042327 15.2222197,15.600531 15.7301587,15.2142857 C16.2380978,14.8280404 16.5555549,14.3280454 16.6825397,13.7142857 L18.1746032,13.7142857 L18.1746032,26 L16.5079365,26 L16.5079365,17.031746 L13.7777778,17.031746 L13.7777778,15.8253968 Z M29.3968254,20.3968254 C29.5978846,20.8941824 29.6984127,21.4550233 29.6984127,22.0793651 C29.6984127,22.6507965 29.5978846,23.1904737 29.3968254,23.6984127 C29.1957662,24.1957697 28.9047638,24.6322733 28.5238095,25.0079365 C28.1428552,25.3835998 27.6798969,25.6825386 27.1349206,25.9047619 C26.5899444,26.1269852 25.9788394,26.2380952 25.3015873,26.2380952 C24.6878276,26.2380952 24.1216957,26.1375671 23.6031746,25.9365079 C23.0952356,25.7460308 22.653441,25.4841287 22.2777778,25.1507937 C21.9021145,24.8174587 21.6005302,24.4312191 21.3730159,23.9920635 C21.1455015,23.5529079 21.0105822,23.0846586 20.968254,22.5873016 L22.5079365,22.2063492 C22.5396827,22.5555573 22.6269834,22.8862418 22.7698413,23.1984127 C22.9126991,23.5105836 23.1058189,23.7777767 23.3492063,24 C23.5925938,24.2222233 23.8756598,24.4021157 24.1984127,24.5396825 C24.5211656,24.6772494 24.8862413,24.7460317 25.2936508,24.7460317 C25.7010602,24.7460317 26.0714269,24.6798948 26.4047619,24.547619 C26.7380969,24.4153433 27.0211629,24.2328054 27.2539683,24 C27.4973557,23.7566125 27.682539,23.4761921 27.8095238,23.1587302 C27.9470906,22.8306862 28.015873,22.4814833 28.015873,22.1111111 C28.015873,21.6772465 27.9470906,21.2962979 27.8095238,20.968254 C27.671957,20.64021 27.4814827,20.3597895 27.2380952,20.1269841 C26.9947078,19.8941787 26.7089963,19.7169318 26.3809524,19.5952381 C26.0529084,19.4735444 25.6878327,19.4126984 25.2857143,19.4126984 C24.7671932,19.4126984 24.3015894,19.5185175 23.8888889,19.7301587 C23.4656063,19.9523821 23.1216944,20.2328025 22.8571429,20.5714286 L21.3015873,20 L22.6349206,13.7142857 L29.1269841,13.7142857 L29.1269841,15.2698413 L23.8095238,15.2698413 L23,19.031746 C23.1481489,18.862433 23.3280413,18.7142863 23.5396825,18.5873016 C23.7513238,18.4603168 23.9735438,18.3544978 24.2063492,18.2698413 C24.4285725,18.1851848 24.6613744,18.1216933 24.9047619,18.0793651 C25.1481494,18.0370368 25.3862422,18.015873 25.6190476,18.015873 C26.2328073,18.015873 26.7910028,18.1111102 27.2936508,18.3015873 C27.7962988,18.4920644 28.224866,18.761903 28.5793651,19.1111111 C28.9338642,19.4603192 29.2063483,19.8888863 29.3968254,20.3968254 Z",fill:"white"})))}}]),n}(a.PureComponent);function Js(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var el=(0,l.zo)("div",{position:"absolute",bottom:0,width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"nowrap",margin:"0 4px"}),tl=function(e){(0,p.Z)(n,e);var t=Js(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"SKIP_TIME_MS",15e3),(0,r.Z)((0,u.Z)(e),"handleUpdate",(function(t){e.props.player.seek(t)})),(0,r.Z)((0,u.Z)(e),"handleSeekBackward",(function(){e.props.player.seekBackward(e.SKIP_TIME_MS)})),(0,r.Z)((0,u.Z)(e),"handleSeekForward",(function(){e.props.player.seekForward(e.SKIP_TIME_MS)})),e}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.trackLength,n=e.progress,o=e.onNext,i=e.onPrev,s=e.type,l=e.disabled,c="show"===s||"episode"===s,d=!c&&"track"!==s,u=(0,r.Z)({width:"16px",height:"16px",padding:"8px 4px",boxSizing:"content-box"},":last-child",{paddingRight:"8px"});return a.createElement(el,{dir:"ltr"},d&&a.createElement(Hs,{onClick:i,$styleProps:u}),c&&a.createElement(zs,{onClick:this.handleSeekBackward,$styleProps:u}),a.createElement(Ns,{currentValue:n,max:t,onUpdate:this.handleUpdate,disabled:l,shouldIgnoreDragStart:!0,$styleProps:{margin:"0 0px"}}),d&&a.createElement(Ks,{onClick:o,$styleProps:u}),c&&a.createElement(Xs,{onClick:this.handleSeekForward,$styleProps:u}),a.createElement(Us,{currentValue:n,max:t,$styleProps:{margin:"0 4px"}}))}}]),n}(a.PureComponent);const nl=(0,i.$j)((function(e){return{trackLength:hi(e),disabled:!pi(e),player:_i(e),type:x(e),progress:e.progress}}),(function(e){return{onNext:function(){return e(ji())},onPrev:function(){return e(Mi())}}}))(tl);var rl=(0,l.zo)("div",{position:"relative",flex:100,minHeight:"80px",minWidth:"0"});const al=function(){return a.createElement(rl,null,a.createElement(Es,null),a.createElement(nl,null))};var ol={SHOW_SHARE:"SHOW_SHARE",COPY_EMBED_CODE:"COPY_EMBED_CODE",COPY_URL:"COPY_URL",HIDE_SHARE:"HIDE_SHARE"};const il=ol;var sl=function(e){return e.share.visible},ll=function(e){return e.share.view};n(37268);const cl=(0,l.zo)((function(){return a.createElement("svg",{viewBox:"0 0 16 16"},a.createElement("title",null,Qi.get("close_button_action")),a.createElement("polygon",{fill:"white",points:"14.354,2.353 13.646,1.646 8,7.293 2.353,1.646 1.646,2.353 7.293,8 1.646,13.646 2.353,14.354 8,8.707 13.646,14.354 14.354,13.646 8.707,8 \t"}))}),{width:"100%",height:"100%"});function dl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ul=(0,l.zo)("div",(function(e){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",boxSizing:"border-box",padding:"10px",backgroundColor:e.$small?"#000":"rgba(0, 0, 0, 0.9)",transitionProperty:"opacity",transitionDuration:"0.2s",opacity:e.$opacity,zIndex:1}})),pl=(0,l.zo)("button",{position:"absolute",top:0,right:0,background:"transparent",width:"16px",border:"none",cursor:"pointer",padding:0,margin:"10px"}),fl=function(e){(0,p.Z)(n,e);var t=dl(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"state",{opacity:0}),(0,r.Z)((0,u.Z)(e),"handleKeydown",(function(t){"Escape"===t.key&&e.props.onClose()})),e}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeydown),setTimeout((function(){return e.setState({opacity:1})}),10)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.small,r=e.onClose;return a.createElement(ul,{$small:n,$opacity:this.state.opacity},t,a.createElement(pl,{onClick:r},a.createElement(cl,null)))}}]),n}(a.PureComponent),hl=function(e){return window.open("https://www.facebook.com/dialog/share?href=".concat(encodeURIComponent(e),"&redirect_uri=").concat(encodeURIComponent(e),"&hashtag=").concat(encodeURIComponent("#NowPlaying"),"&app_id=174829003346&display=page"),"","width=640,height=551")},_l=function(e){var t=window.SpotifyEnvironment&&window.SpotifyEnvironment.isMobile;window.open("".concat(t?"fb-messenger://share/":"https://www.facebook.com/dialog/send","?link=").concat(encodeURIComponent(e),"&redirect_uri=").concat(encodeURIComponent(e),"&app_id=174829003346&display=page"),"","width=996,height=550")},yl=function(e){return window.open("https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(e),"&hashtags=NowPlaying&related=spotify"),"","width=640,height=300")},ml=function(e){return window.open("https://api.whatsapp.com/send?text=".concat(encodeURIComponent(e)),"")},gl=function(e){var t=document.createElement("input");t.value=e,t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("copy"),document.body.removeChild(t)},vl=function(e){var t="<iframe "+'src="https://open.spotify.com/embed?uri='.concat(encodeURIComponent(e),'" ')+'width="300" height="380" frameborder="0" style="border-radius: 12px;"allowtransparency="true" allow="encrypted-media"></iframe>',n=document.createElement("input");n.value=t,n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)};n(16858);function bl(e,t){var n,r;if("string"!=typeof(n='{"build/desktop-auth/desktop-auth.19ef9619.css":"https://open.spotifycdn.com/cdn/build/desktop-auth/desktop-auth.19ef9619.css","build/desktop-auth/desktop-auth.31d6cfe0.js":"https://open.spotifycdn.com/cdn/build/desktop-auth/desktop-auth.31d6cfe0.js","build/desktop-auth/desktop-auth.css":"https://open.spotifycdn.com/cdn/build/desktop-auth/desktop-auth.19ef9619.css","build/desktop-auth/desktop-auth.js":"https://open.spotifycdn.com/cdn/build/desktop-auth/desktop-auth.31d6cfe0.js","build/embed-iframe-api-v1.827e883b.js":"https://open.spotifycdn.com/cdn/build/embed-iframe-api-v1.827e883b.js","build/embed-iframe-api-v1.js":"https://open.spotifycdn.com/cdn/build/embed-iframe-api-v1.827e883b.js","build/embed-legacy/embed-legacy.558f1837.js":"https://open.spotifycdn.com/cdn/build/embed-legacy/embed-legacy.558f1837.js","build/embed-legacy/embed-legacy.831fa035.css":"https://open.spotifycdn.com/cdn/build/embed-legacy/embed-legacy.831fa035.css","build/embed-legacy/embed-legacy.css":"https://open.spotifycdn.com/cdn/build/embed-legacy/embed-legacy.831fa035.css","build/embed-legacy/embed-legacy.js":"https://open.spotifycdn.com/cdn/build/embed-legacy/embed-legacy.558f1837.js","build/embed-legacy/vendor~embed-legacy.53bc46cf.js":"https://open.spotifycdn.com/cdn/build/embed-legacy/vendor~embed-legacy.53bc46cf.js","build/embed-legacy/vendor~embed-legacy.js":"https://open.spotifycdn.com/cdn/build/embed-legacy/vendor~embed-legacy.53bc46cf.js","build/embed/70.f2f5d55e.js":"https://open.spotifycdn.com/cdn/build/embed/70.f2f5d55e.js","build/embed/70.js":"https://open.spotifycdn.com/cdn/build/embed/70.f2f5d55e.js","build/embed/851.a9d5a588.js":"https://open.spotifycdn.com/cdn/build/embed/851.a9d5a588.js","build/embed/851.js":"https://open.spotifycdn.com/cdn/build/embed/851.a9d5a588.js","build/embed/embed-video.2d8d986c.js":"https://open.spotifycdn.com/cdn/build/embed/embed-video.2d8d986c.js","build/embed/embed-video.9c821bf7.css":"https://open.spotifycdn.com/cdn/build/embed/embed-video.9c821bf7.css","build/embed/embed-video.css":"https://open.spotifycdn.com/cdn/build/embed/embed-video.9c821bf7.css","build/embed/embed-video.js":"https://open.spotifycdn.com/cdn/build/embed/embed-video.2d8d986c.js","build/embed/embed.4cfb8d4d.css":"https://open.spotifycdn.com/cdn/build/embed/embed.4cfb8d4d.css","build/embed/embed.54d15118.js":"https://open.spotifycdn.com/cdn/build/embed/embed.54d15118.js","build/embed/embed.css":"https://open.spotifycdn.com/cdn/build/embed/embed.4cfb8d4d.css","build/embed/embed.js":"https://open.spotifycdn.com/cdn/build/embed/embed.54d15118.js","build/embed/harmony.09bbace0.js":"https://open.spotifycdn.com/cdn/build/embed/harmony.09bbace0.js","build/embed/harmony.js":"https://open.spotifycdn.com/cdn/build/embed/harmony.09bbace0.js","build/embed/overture.c303c243.js":"https://open.spotifycdn.com/cdn/build/embed/overture.c303c243.js","build/embed/overture.js":"https://open.spotifycdn.com/cdn/build/embed/overture.c303c243.js","build/embed/vendor~embed.284a51fd.js":"https://open.spotifycdn.com/cdn/build/embed/vendor~embed.284a51fd.js","build/embed/vendor~embed.6be60370.css":"https://open.spotifycdn.com/cdn/build/embed/vendor~embed.6be60370.css","build/embed/vendor~embed.css":"https://open.spotifycdn.com/cdn/build/embed/vendor~embed.6be60370.css","build/embed/vendor~embed.js":"https://open.spotifycdn.com/cdn/build/embed/vendor~embed.284a51fd.js","build/error-page/error-page.31d6cfe0.js":"https://open.spotifycdn.com/cdn/build/error-page/error-page.31d6cfe0.js","build/error-page/error-page.af25b77c.css":"https://open.spotifycdn.com/cdn/build/error-page/error-page.af25b77c.css","build/error-page/error-page.css":"https://open.spotifycdn.com/cdn/build/error-page/error-page.af25b77c.css","build/error-page/error-page.js":"https://open.spotifycdn.com/cdn/build/error-page/error-page.31d6cfe0.js","build/mobile-web-player/392.9dca9d49.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/392.9dca9d49.js","build/mobile-web-player/392.9dca9d49.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/392.9dca9d49.js.8ead358d.br","build/mobile-web-player/392.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/392.9dca9d49.js","build/mobile-web-player/mobile-web-player.21c880ae.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mobile-web-player.21c880ae.css","build/mobile-web-player/mobile-web-player.25097c5d.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mobile-web-player.25097c5d.js","build/mobile-web-player/mobile-web-player.25097c5d.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mobile-web-player.25097c5d.js.e9d03bb0.br","build/mobile-web-player/mobile-web-player.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mobile-web-player.21c880ae.css","build/mobile-web-player/mobile-web-player.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mobile-web-player.25097c5d.js","build/mobile-web-player/mwp-artist-page.03848f1b.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-artist-page.03848f1b.css","build/mobile-web-player/mwp-artist-page.03848f1b.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-artist-page.03848f1b.js","build/mobile-web-player/mwp-artist-page.03848f1b.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-artist-page.03848f1b.js.5f12312e.br","build/mobile-web-player/mwp-artist-page.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-artist-page.03848f1b.css","build/mobile-web-player/mwp-artist-page.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-artist-page.03848f1b.js","build/mobile-web-player/mwp-connect-view-container.18f04c42.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-connect-view-container.18f04c42.js","build/mobile-web-player/mwp-connect-view-container.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-connect-view-container.18f04c42.js","build/mobile-web-player/mwp-context-menu-container.2d2cf8fa.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-context-menu-container.2d2cf8fa.js","build/mobile-web-player/mwp-context-menu-container.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-context-menu-container.2d2cf8fa.js","build/mobile-web-player/mwp-dialog-container.9b2df683.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-dialog-container.9b2df683.css","build/mobile-web-player/mwp-dialog-container.9b2df683.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-dialog-container.9b2df683.js","build/mobile-web-player/mwp-dialog-container.9b2df683.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-dialog-container.9b2df683.js.acaa8662.br","build/mobile-web-player/mwp-dialog-container.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-dialog-container.9b2df683.css","build/mobile-web-player/mwp-dialog-container.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-dialog-container.9b2df683.js","build/mobile-web-player/mwp-genre-view.064a27d5.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-genre-view.064a27d5.js","build/mobile-web-player/mwp-genre-view.064a27d5.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-genre-view.064a27d5.js.ecf69fc6.br","build/mobile-web-player/mwp-genre-view.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-genre-view.064a27d5.js","build/mobile-web-player/mwp-home.562e1fd1.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-home.562e1fd1.css","build/mobile-web-player/mwp-home.562e1fd1.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-home.562e1fd1.js","build/mobile-web-player/mwp-home.562e1fd1.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-home.562e1fd1.js.eababaed.br","build/mobile-web-player/mwp-home.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-home.562e1fd1.css","build/mobile-web-player/mwp-home.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-home.562e1fd1.js","build/mobile-web-player/mwp-now-playing-view-container.b3974352.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-now-playing-view-container.b3974352.css","build/mobile-web-player/mwp-now-playing-view-container.b3974352.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-now-playing-view-container.b3974352.js","build/mobile-web-player/mwp-now-playing-view-container.b3974352.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-now-playing-view-container.b3974352.js.a34c985e.br","build/mobile-web-player/mwp-now-playing-view-container.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-now-playing-view-container.b3974352.css","build/mobile-web-player/mwp-now-playing-view-container.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-now-playing-view-container.b3974352.js","build/mobile-web-player/mwp-search-landing.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-landing.e007a315.css","build/mobile-web-player/mwp-search-landing.e007a315.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-landing.e007a315.css","build/mobile-web-player/mwp-search-landing.e007a315.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-landing.e007a315.js","build/mobile-web-player/mwp-search-landing.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-landing.e007a315.js","build/mobile-web-player/mwp-search-results.2d31f738.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-results.2d31f738.css","build/mobile-web-player/mwp-search-results.2d31f738.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-results.2d31f738.js","build/mobile-web-player/mwp-search-results.2d31f738.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-results.2d31f738.js.de8bb1e1.br","build/mobile-web-player/mwp-search-results.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-results.2d31f738.css","build/mobile-web-player/mwp-search-results.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-search-results.2d31f738.js","build/mobile-web-player/mwp-trending-view.8833be65.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-trending-view.8833be65.js","build/mobile-web-player/mwp-trending-view.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-trending-view.8833be65.js","build/mobile-web-player/mwp-upsell.9980a6c1.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-upsell.9980a6c1.js","build/mobile-web-player/mwp-upsell.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-upsell.9980a6c1.js","build/mobile-web-player/mwp-user-profile.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-user-profile.d4f85637.css","build/mobile-web-player/mwp-user-profile.d4f85637.css":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-user-profile.d4f85637.css","build/mobile-web-player/mwp-user-profile.d4f85637.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-user-profile.d4f85637.js","build/mobile-web-player/mwp-user-profile.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/mwp-user-profile.d4f85637.js","build/mobile-web-player/vendor~mobile-web-player.9b1f65bc.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/vendor~mobile-web-player.9b1f65bc.js","build/mobile-web-player/vendor~mobile-web-player.9b1f65bc.js.br":"https://open.spotifycdn.com/cdn/build/mobile-web-player/vendor~mobile-web-player.9b1f65bc.js.004b35e2.br","build/mobile-web-player/vendor~mobile-web-player.js":"https://open.spotifycdn.com/cdn/build/mobile-web-player/vendor~mobile-web-player.9b1f65bc.js","build/web-player/1130.30032562.css":"https://open.spotifycdn.com/cdn/build/web-player/1130.30032562.css","build/web-player/1130.30032562.js":"https://open.spotifycdn.com/cdn/build/web-player/1130.30032562.js","build/web-player/1130.css":"https://open.spotifycdn.com/cdn/build/web-player/1130.30032562.css","build/web-player/1130.js":"https://open.spotifycdn.com/cdn/build/web-player/1130.30032562.js","build/web-player/2716.c83fb8c5.js":"https://open.spotifycdn.com/cdn/build/web-player/2716.c83fb8c5.js","build/web-player/2716.js":"https://open.spotifycdn.com/cdn/build/web-player/2716.c83fb8c5.js","build/web-player/3490.7c470001.js":"https://open.spotifycdn.com/cdn/build/web-player/3490.7c470001.js","build/web-player/3490.js":"https://open.spotifycdn.com/cdn/build/web-player/3490.7c470001.js","build/web-player/3496.b4b6dda4.js":"https://open.spotifycdn.com/cdn/build/web-player/3496.b4b6dda4.js","build/web-player/3496.js":"https://open.spotifycdn.com/cdn/build/web-player/3496.b4b6dda4.js","build/web-player/376.872fe1ae.js":"https://open.spotifycdn.com/cdn/build/web-player/376.872fe1ae.js","build/web-player/376.js":"https://open.spotifycdn.com/cdn/build/web-player/376.872fe1ae.js","build/web-player/4096.4af17086.css":"https://open.spotifycdn.com/cdn/build/web-player/4096.4af17086.css","build/web-player/4096.4af17086.js":"https://open.spotifycdn.com/cdn/build/web-player/4096.4af17086.js","build/web-player/4096.css":"https://open.spotifycdn.com/cdn/build/web-player/4096.4af17086.css","build/web-player/4096.js":"https://open.spotifycdn.com/cdn/build/web-player/4096.4af17086.js","build/web-player/4791.css":"https://open.spotifycdn.com/cdn/build/web-player/4791.d5c76fa5.css","build/web-player/4791.d5c76fa5.css":"https://open.spotifycdn.com/cdn/build/web-player/4791.d5c76fa5.css","build/web-player/4791.d5c76fa5.js":"https://open.spotifycdn.com/cdn/build/web-player/4791.d5c76fa5.js","build/web-player/4791.js":"https://open.spotifycdn.com/cdn/build/web-player/4791.d5c76fa5.js","build/web-player/5081.12a8d464.js":"https://open.spotifycdn.com/cdn/build/web-player/5081.12a8d464.js","build/web-player/5081.js":"https://open.spotifycdn.com/cdn/build/web-player/5081.12a8d464.js","build/web-player/5392.9cbc3152.js":"https://open.spotifycdn.com/cdn/build/web-player/5392.9cbc3152.js","build/web-player/5392.js":"https://open.spotifycdn.com/cdn/build/web-player/5392.9cbc3152.js","build/web-player/5772.9c5d6e7f.css":"https://open.spotifycdn.com/cdn/build/web-player/5772.9c5d6e7f.css","build/web-player/5772.9c5d6e7f.js":"https://open.spotifycdn.com/cdn/build/web-player/5772.9c5d6e7f.js","build/web-player/5772.css":"https://open.spotifycdn.com/cdn/build/web-player/5772.9c5d6e7f.css","build/web-player/5772.js":"https://open.spotifycdn.com/cdn/build/web-player/5772.9c5d6e7f.js","build/web-player/6772.98225f7c.css":"https://open.spotifycdn.com/cdn/build/web-player/6772.98225f7c.css","build/web-player/6772.98225f7c.js":"https://open.spotifycdn.com/cdn/build/web-player/6772.98225f7c.js","build/web-player/6772.css":"https://open.spotifycdn.com/cdn/build/web-player/6772.98225f7c.css","build/web-player/6772.js":"https://open.spotifycdn.com/cdn/build/web-player/6772.98225f7c.js","build/web-player/7667.1fb2664f.js":"https://open.spotifycdn.com/cdn/build/web-player/7667.1fb2664f.js","build/web-player/7667.js":"https://open.spotifycdn.com/cdn/build/web-player/7667.1fb2664f.js","build/web-player/8381.3b6ac831.js":"https://open.spotifycdn.com/cdn/build/web-player/8381.3b6ac831.js","build/web-player/8381.js":"https://open.spotifycdn.com/cdn/build/web-player/8381.3b6ac831.js","build/web-player/8396.6df0e5e6.js":"https://open.spotifycdn.com/cdn/build/web-player/8396.6df0e5e6.js","build/web-player/8396.js":"https://open.spotifycdn.com/cdn/build/web-player/8396.6df0e5e6.js","build/web-player/8419.84495a3d.css":"https://open.spotifycdn.com/cdn/build/web-player/8419.84495a3d.css","build/web-player/8419.84495a3d.js":"https://open.spotifycdn.com/cdn/build/web-player/8419.84495a3d.js","build/web-player/8419.css":"https://open.spotifycdn.com/cdn/build/web-player/8419.84495a3d.css","build/web-player/8419.js":"https://open.spotifycdn.com/cdn/build/web-player/8419.84495a3d.js","build/web-player/8696.4d7dd07b.js":"https://open.spotifycdn.com/cdn/build/web-player/8696.4d7dd07b.js","build/web-player/8696.js":"https://open.spotifycdn.com/cdn/build/web-player/8696.4d7dd07b.js","build/web-player/9033.8e09c11a.css":"https://open.spotifycdn.com/cdn/build/web-player/9033.8e09c11a.css","build/web-player/9033.8e09c11a.js":"https://open.spotifycdn.com/cdn/build/web-player/9033.8e09c11a.js","build/web-player/9033.css":"https://open.spotifycdn.com/cdn/build/web-player/9033.8e09c11a.css","build/web-player/9033.js":"https://open.spotifycdn.com/cdn/build/web-player/9033.8e09c11a.js","build/web-player/91.101da1cb.js":"https://open.spotifycdn.com/cdn/build/web-player/91.101da1cb.js","build/web-player/91.js":"https://open.spotifycdn.com/cdn/build/web-player/91.101da1cb.js","build/web-player/9701.110769e1.js":"https://open.spotifycdn.com/cdn/build/web-player/9701.110769e1.js","build/web-player/9701.js":"https://open.spotifycdn.com/cdn/build/web-player/9701.110769e1.js","build/web-player/9818.2c7bbe72.css":"https://open.spotifycdn.com/cdn/build/web-player/9818.2c7bbe72.css","build/web-player/9818.2c7bbe72.js":"https://open.spotifycdn.com/cdn/build/web-player/9818.2c7bbe72.js","build/web-player/9818.css":"https://open.spotifycdn.com/cdn/build/web-player/9818.2c7bbe72.css","build/web-player/9818.js":"https://open.spotifycdn.com/cdn/build/web-player/9818.2c7bbe72.js","build/web-player/9851.b4528628.js":"https://open.spotifycdn.com/cdn/build/web-player/9851.b4528628.js","build/web-player/9851.js":"https://open.spotifycdn.com/cdn/build/web-player/9851.b4528628.js","build/web-player/browse-v2.cb8aae22.css":"https://open.spotifycdn.com/cdn/build/web-player/browse-v2.cb8aae22.css","build/web-player/browse-v2.cb8aae22.js":"https://open.spotifycdn.com/cdn/build/web-player/browse-v2.cb8aae22.js","build/web-player/browse-v2.css":"https://open.spotifycdn.com/cdn/build/web-player/browse-v2.cb8aae22.css","build/web-player/browse-v2.js":"https://open.spotifycdn.com/cdn/build/web-player/browse-v2.cb8aae22.js","build/web-player/collection-music-download.ac60b5b6.js":"https://open.spotifycdn.com/cdn/build/web-player/collection-music-download.ac60b5b6.js","build/web-player/collection-music-download.js":"https://open.spotifycdn.com/cdn/build/web-player/collection-music-download.ac60b5b6.js","build/web-player/debug-locales.4df5c6c8.js":"https://open.spotifycdn.com/cdn/build/web-player/debug-locales.4df5c6c8.js","build/web-player/debug-locales.js":"https://open.spotifycdn.com/cdn/build/web-player/debug-locales.4df5c6c8.js","build/web-player/home-hpto.2f184d2b.css":"https://open.spotifycdn.com/cdn/build/web-player/home-hpto.2f184d2b.css","build/web-player/home-hpto.2f184d2b.js":"https://open.spotifycdn.com/cdn/build/web-player/home-hpto.2f184d2b.js","build/web-player/home-hpto.css":"https://open.spotifycdn.com/cdn/build/web-player/home-hpto.2f184d2b.css","build/web-player/home-hpto.js":"https://open.spotifycdn.com/cdn/build/web-player/home-hpto.2f184d2b.js","build/web-player/home-v2-section.94e62ea8.css":"https://open.spotifycdn.com/cdn/build/web-player/home-v2-section.94e62ea8.css","build/web-player/home-v2-section.94e62ea8.js":"https://open.spotifycdn.com/cdn/build/web-player/home-v2-section.94e62ea8.js","build/web-player/home-v2-section.css":"https://open.spotifycdn.com/cdn/build/web-player/home-v2-section.94e62ea8.css","build/web-player/home-v2-section.js":"https://open.spotifycdn.com/cdn/build/web-player/home-v2-section.94e62ea8.js","build/web-player/home-v2.cd6d3e9b.css":"https://open.spotifycdn.com/cdn/build/web-player/home-v2.cd6d3e9b.css","build/web-player/home-v2.cd6d3e9b.js":"https://open.spotifycdn.com/cdn/build/web-player/home-v2.cd6d3e9b.js","build/web-player/home-v2.css":"https://open.spotifycdn.com/cdn/build/web-player/home-v2.cd6d3e9b.css","build/web-player/home-v2.js":"https://open.spotifycdn.com/cdn/build/web-player/home-v2.cd6d3e9b.js","build/web-player/service-worker.js":"https://open.spotifycdn.com/cdn/build/web-player/service-worker.f3d946b2.js","build/web-player/vendor~web-player.6b54a3db.js":"https://open.spotifycdn.com/cdn/build/web-player/vendor~web-player.6b54a3db.js","build/web-player/vendor~web-player.ae6665ae.css":"https://open.spotifycdn.com/cdn/build/web-player/vendor~web-player.ae6665ae.css","build/web-player/vendor~web-player.css":"https://open.spotifycdn.com/cdn/build/web-player/vendor~web-player.ae6665ae.css","build/web-player/vendor~web-player.js":"https://open.spotifycdn.com/cdn/build/web-player/vendor~web-player.6b54a3db.js","build/web-player/web-player.801a7c9d.js":"https://open.spotifycdn.com/cdn/build/web-player/web-player.801a7c9d.js","build/web-player/web-player.95df3007.css":"https://open.spotifycdn.com/cdn/build/web-player/web-player.95df3007.css","build/web-player/web-player.css":"https://open.spotifycdn.com/cdn/build/web-player/web-player.95df3007.css","build/web-player/web-player.js":"https://open.spotifycdn.com/cdn/build/web-player/web-player.801a7c9d.js","build/web-player/xpui-desktop-modals.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-desktop-modals.f3c380a7.css","build/web-player/xpui-desktop-modals.f3c380a7.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-desktop-modals.f3c380a7.css","build/web-player/xpui-desktop-modals.f3c380a7.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-desktop-modals.f3c380a7.js","build/web-player/xpui-desktop-modals.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-desktop-modals.f3c380a7.js","build/web-player/xpui-desktop-routes-settings.bc6be50e.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-desktop-routes-settings.bc6be50e.js","build/web-player/xpui-desktop-routes-settings.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-desktop-routes-settings.bc6be50e.js","build/web-player/xpui-routes-album.0b5d0bc4.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-album.0b5d0bc4.css","build/web-player/xpui-routes-album.0b5d0bc4.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-album.0b5d0bc4.js","build/web-player/xpui-routes-album.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-album.0b5d0bc4.css","build/web-player/xpui-routes-album.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-album.0b5d0bc4.js","build/web-player/xpui-routes-all-episode-sponsors.53fd77eb.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-all-episode-sponsors.53fd77eb.css","build/web-player/xpui-routes-all-episode-sponsors.53fd77eb.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-all-episode-sponsors.53fd77eb.js","build/web-player/xpui-routes-all-episode-sponsors.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-all-episode-sponsors.53fd77eb.css","build/web-player/xpui-routes-all-episode-sponsors.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-all-episode-sponsors.53fd77eb.js","build/web-player/xpui-routes-all-show-sponsors.f17f23fc.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-all-show-sponsors.f17f23fc.js","build/web-player/xpui-routes-all-show-sponsors.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-all-show-sponsors.f17f23fc.js","build/web-player/xpui-routes-artist.5d58d6c9.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-artist.5d58d6c9.css","build/web-player/xpui-routes-artist.5d58d6c9.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-artist.5d58d6c9.js","build/web-player/xpui-routes-artist.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-artist.5d58d6c9.css","build/web-player/xpui-routes-artist.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-artist.5d58d6c9.js","build/web-player/xpui-routes-blend.c6a90006.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-blend.c6a90006.css","build/web-player/xpui-routes-blend.c6a90006.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-blend.c6a90006.js","build/web-player/xpui-routes-blend.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-blend.c6a90006.css","build/web-player/xpui-routes-blend.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-blend.c6a90006.js","build/web-player/xpui-routes-collection-concerts.afbb6d12.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-concerts.afbb6d12.css","build/web-player/xpui-routes-collection-concerts.afbb6d12.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-concerts.afbb6d12.js","build/web-player/xpui-routes-collection-concerts.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-concerts.afbb6d12.css","build/web-player/xpui-routes-collection-concerts.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-concerts.afbb6d12.js","build/web-player/xpui-routes-collection-episodes.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-episodes.d5a1c547.css","build/web-player/xpui-routes-collection-episodes.d5a1c547.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-episodes.d5a1c547.css","build/web-player/xpui-routes-collection-episodes.d5a1c547.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-episodes.d5a1c547.js","build/web-player/xpui-routes-collection-episodes.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-episodes.d5a1c547.js","build/web-player/xpui-routes-collection-local-files.87f520d5.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-local-files.87f520d5.css","build/web-player/xpui-routes-collection-local-files.87f520d5.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-local-files.87f520d5.js","build/web-player/xpui-routes-collection-local-files.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-local-files.87f520d5.css","build/web-player/xpui-routes-collection-local-files.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-local-files.87f520d5.js","build/web-player/xpui-routes-collection-songs.aef7d521.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-songs.aef7d521.css","build/web-player/xpui-routes-collection-songs.aef7d521.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-songs.aef7d521.js","build/web-player/xpui-routes-collection-songs.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-songs.aef7d521.css","build/web-player/xpui-routes-collection-songs.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection-songs.aef7d521.js","build/web-player/xpui-routes-collection.2c518730.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection.2c518730.css","build/web-player/xpui-routes-collection.2c518730.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection.2c518730.js","build/web-player/xpui-routes-collection.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection.2c518730.css","build/web-player/xpui-routes-collection.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-collection.2c518730.js","build/web-player/xpui-routes-concert.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-concert.e6be4d1e.css","build/web-player/xpui-routes-concert.e6be4d1e.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-concert.e6be4d1e.css","build/web-player/xpui-routes-concert.e6be4d1e.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-concert.e6be4d1e.js","build/web-player/xpui-routes-concert.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-concert.e6be4d1e.js","build/web-player/xpui-routes-create-playlist.be007f74.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-create-playlist.be007f74.js","build/web-player/xpui-routes-create-playlist.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-create-playlist.be007f74.js","build/web-player/xpui-routes-download-page.640b9a75.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-download-page.640b9a75.css","build/web-player/xpui-routes-download-page.640b9a75.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-download-page.640b9a75.js","build/web-player/xpui-routes-download-page.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-download-page.640b9a75.css","build/web-player/xpui-routes-download-page.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-download-page.640b9a75.js","build/web-player/xpui-routes-enhanced-context.6825a3e4.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-enhanced-context.6825a3e4.css","build/web-player/xpui-routes-enhanced-context.6825a3e4.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-enhanced-context.6825a3e4.js","build/web-player/xpui-routes-enhanced-context.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-enhanced-context.6825a3e4.css","build/web-player/xpui-routes-enhanced-context.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-enhanced-context.6825a3e4.js","build/web-player/xpui-routes-enhanced-playlist.6aac2f8c.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-enhanced-playlist.6aac2f8c.css","build/web-player/xpui-routes-enhanced-playlist.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-enhanced-playlist.6aac2f8c.css","build/web-player/xpui-routes-episode.39bfa2bd.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-episode.39bfa2bd.css","build/web-player/xpui-routes-episode.39bfa2bd.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-episode.39bfa2bd.js","build/web-player/xpui-routes-episode.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-episode.39bfa2bd.css","build/web-player/xpui-routes-episode.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-episode.39bfa2bd.js","build/web-player/xpui-routes-folder.2f03a76f.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-folder.2f03a76f.css","build/web-player/xpui-routes-folder.2f03a76f.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-folder.2f03a76f.js","build/web-player/xpui-routes-folder.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-folder.2f03a76f.css","build/web-player/xpui-routes-folder.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-folder.2f03a76f.js","build/web-player/xpui-routes-lyrics.604f7ec2.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-lyrics.604f7ec2.css","build/web-player/xpui-routes-lyrics.604f7ec2.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-lyrics.604f7ec2.js","build/web-player/xpui-routes-lyrics.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-lyrics.604f7ec2.css","build/web-player/xpui-routes-lyrics.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-lyrics.604f7ec2.js","build/web-player/xpui-routes-make-music.b5804eb7.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-make-music.b5804eb7.css","build/web-player/xpui-routes-make-music.b5804eb7.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-make-music.b5804eb7.js","build/web-player/xpui-routes-make-music.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-make-music.b5804eb7.css","build/web-player/xpui-routes-make-music.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-make-music.b5804eb7.js","build/web-player/xpui-routes-offline-browse.9f1c58b2.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-offline-browse.9f1c58b2.css","build/web-player/xpui-routes-offline-browse.9f1c58b2.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-offline-browse.9f1c58b2.js","build/web-player/xpui-routes-offline-browse.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-offline-browse.9f1c58b2.css","build/web-player/xpui-routes-offline-browse.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-offline-browse.9f1c58b2.js","build/web-player/xpui-routes-playlist.a585b87b.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-playlist.a585b87b.css","build/web-player/xpui-routes-playlist.a585b87b.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-playlist.a585b87b.js","build/web-player/xpui-routes-playlist.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-playlist.a585b87b.css","build/web-player/xpui-routes-playlist.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-playlist.a585b87b.js","build/web-player/xpui-routes-profile.c2ac634f.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-profile.c2ac634f.css","build/web-player/xpui-routes-profile.c2ac634f.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-profile.c2ac634f.js","build/web-player/xpui-routes-profile.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-profile.c2ac634f.css","build/web-player/xpui-routes-profile.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-profile.c2ac634f.js","build/web-player/xpui-routes-queue.cc4548ad.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-queue.cc4548ad.css","build/web-player/xpui-routes-queue.cc4548ad.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-queue.cc4548ad.js","build/web-player/xpui-routes-queue.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-queue.cc4548ad.css","build/web-player/xpui-routes-queue.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-queue.cc4548ad.js","build/web-player/xpui-routes-search.72f56cd6.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-search.72f56cd6.css","build/web-player/xpui-routes-search.72f56cd6.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-search.72f56cd6.js","build/web-player/xpui-routes-search.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-search.72f56cd6.css","build/web-player/xpui-routes-search.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-search.72f56cd6.js","build/web-player/xpui-routes-show.48f73067.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-show.48f73067.css","build/web-player/xpui-routes-show.48f73067.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-show.48f73067.js","build/web-player/xpui-routes-show.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-show.48f73067.css","build/web-player/xpui-routes-show.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-show.48f73067.js","build/web-player/xpui-routes-soundtrap-playlists.8e948047.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-soundtrap-playlists.8e948047.js","build/web-player/xpui-routes-soundtrap-playlists.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-soundtrap-playlists.8e948047.js","build/web-player/xpui-routes-soundtrap-studio.c3ce2d38.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-soundtrap-studio.c3ce2d38.css","build/web-player/xpui-routes-soundtrap-studio.c3ce2d38.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-soundtrap-studio.c3ce2d38.js","build/web-player/xpui-routes-soundtrap-studio.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-soundtrap-studio.c3ce2d38.css","build/web-player/xpui-routes-soundtrap-studio.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-soundtrap-studio.c3ce2d38.js","build/web-player/xpui-routes-track-v2.4adb4ac2.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-track-v2.4adb4ac2.css","build/web-player/xpui-routes-track-v2.4adb4ac2.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-track-v2.4adb4ac2.js","build/web-player/xpui-routes-track-v2.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-track-v2.4adb4ac2.css","build/web-player/xpui-routes-track-v2.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-track-v2.4adb4ac2.js","build/web-player/xpui-routes-track.b9906446.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-track.b9906446.js","build/web-player/xpui-routes-track.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-track.b9906446.js","build/web-player/xpui-routes-view.792e85ea.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-view.792e85ea.css","build/web-player/xpui-routes-view.792e85ea.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-view.792e85ea.js","build/web-player/xpui-routes-view.css":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-view.792e85ea.css","build/web-player/xpui-routes-view.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-view.792e85ea.js","build/web-player/xpui-routes-web-settings.d46d0d67.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-web-settings.d46d0d67.js","build/web-player/xpui-routes-web-settings.js":"https://open.spotifycdn.com/cdn/build/web-player/xpui-routes-web-settings.d46d0d67.js","fonts/spoticon_regular_2.ttf":"https://open.spotifycdn.com/cdn/fonts/spoticon_regular_2.127670b5.ttf","fonts/spoticon_regular_2.woff":"https://open.spotifycdn.com/cdn/fonts/spoticon_regular_2.ff4c6091.woff","fonts/spoticon_regular_2.woff2":"https://open.spotifycdn.com/cdn/fonts/spoticon_regular_2.d319d911.woff2","generated-locales/embed-legacy/__longest.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/__longest.56e7e063.json","generated-locales/embed-legacy/__longest.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/__longest.0b9b8ec2.yml","generated-locales/embed-legacy/af.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/af.d2f1bca2.json","generated-locales/embed-legacy/af.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/af.9c5d7a28.yml","generated-locales/embed-legacy/am.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/am.bec76514.json","generated-locales/embed-legacy/am.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/am.71606a0c.yml","generated-locales/embed-legacy/ar.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ar.dbe59c05.json","generated-locales/embed-legacy/ar.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ar.6adbb3b0.yml","generated-locales/embed-legacy/az.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/az.9778b1d2.json","generated-locales/embed-legacy/az.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/az.a3977ce6.yml","generated-locales/embed-legacy/bg.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/bg.1fcfa17d.json","generated-locales/embed-legacy/bg.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/bg.b4dd6602.yml","generated-locales/embed-legacy/bho.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/bho.d34de476.json","generated-locales/embed-legacy/bho.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/bho.8b275fca.yml","generated-locales/embed-legacy/bn.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/bn.842e3393.json","generated-locales/embed-legacy/bn.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/bn.c074d0ed.yml","generated-locales/embed-legacy/cs.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/cs.386898a1.json","generated-locales/embed-legacy/cs.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/cs.5b7ba703.yml","generated-locales/embed-legacy/da.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/da.a800b915.json","generated-locales/embed-legacy/da.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/da.3b2ae2bd.yml","generated-locales/embed-legacy/de.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/de.e553e58f.json","generated-locales/embed-legacy/de.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/de.49397f48.yml","generated-locales/embed-legacy/el.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/el.847f5c7a.json","generated-locales/embed-legacy/el.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/el.55e68ba4.yml","generated-locales/embed-legacy/en.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/en.c9b517f9.json","generated-locales/embed-legacy/en.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/en.32e6079c.yml","generated-locales/embed-legacy/es-419.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/es-419.a4e1eeb9.json","generated-locales/embed-legacy/es-419.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/es-419.93261b1e.yml","generated-locales/embed-legacy/es.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/es.c5370c0a.json","generated-locales/embed-legacy/es.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/es.97ed8009.yml","generated-locales/embed-legacy/et.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/et.f3c54e67.json","generated-locales/embed-legacy/et.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/et.52989e57.yml","generated-locales/embed-legacy/fa.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fa.68ba7bc5.json","generated-locales/embed-legacy/fa.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fa.e226e3e1.yml","generated-locales/embed-legacy/fi.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fi.7b045ff3.json","generated-locales/embed-legacy/fi.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fi.c6de6157.yml","generated-locales/embed-legacy/fil.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fil.7d04c2fb.json","generated-locales/embed-legacy/fil.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fil.0d396a60.yml","generated-locales/embed-legacy/fr-CA.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fr-CA.98ca2635.json","generated-locales/embed-legacy/fr-CA.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fr-CA.7a1067a9.yml","generated-locales/embed-legacy/fr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fr.7efcf7ac.json","generated-locales/embed-legacy/fr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/fr.176002c0.yml","generated-locales/embed-legacy/gu.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/gu.8ccfcfc5.json","generated-locales/embed-legacy/gu.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/gu.9b2df2cd.yml","generated-locales/embed-legacy/he.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/he.fca37de8.json","generated-locales/embed-legacy/he.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/he.7fc36221.yml","generated-locales/embed-legacy/hi.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/hi.db739d86.json","generated-locales/embed-legacy/hi.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/hi.75b36ec9.yml","generated-locales/embed-legacy/hr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/hr.8d170482.json","generated-locales/embed-legacy/hr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/hr.da8baa57.yml","generated-locales/embed-legacy/hu.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/hu.0f81e64c.json","generated-locales/embed-legacy/hu.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/hu.a87f2e90.yml","generated-locales/embed-legacy/id.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/id.8c9f54ca.json","generated-locales/embed-legacy/id.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/id.9320ff47.yml","generated-locales/embed-legacy/is.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/is.db9ac908.json","generated-locales/embed-legacy/is.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/is.9e473c2c.yml","generated-locales/embed-legacy/it.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/it.be8f8de3.json","generated-locales/embed-legacy/it.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/it.e7a74347.yml","generated-locales/embed-legacy/ja.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ja.adb9aea6.json","generated-locales/embed-legacy/ja.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ja.74c9d128.yml","generated-locales/embed-legacy/kn.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/kn.27e1c903.json","generated-locales/embed-legacy/kn.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/kn.2f7bc56f.yml","generated-locales/embed-legacy/ko.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ko.a0ef5f92.json","generated-locales/embed-legacy/ko.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ko.40db2fb5.yml","generated-locales/embed-legacy/lt.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/lt.0c551c43.json","generated-locales/embed-legacy/lt.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/lt.a613d4f2.yml","generated-locales/embed-legacy/lv.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/lv.cc2a789c.json","generated-locales/embed-legacy/lv.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/lv.9cab6345.yml","generated-locales/embed-legacy/ml.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ml.b292fbf2.json","generated-locales/embed-legacy/ml.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ml.7f4aa602.yml","generated-locales/embed-legacy/mr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/mr.b890158b.json","generated-locales/embed-legacy/mr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/mr.09581ebb.yml","generated-locales/embed-legacy/ms.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ms.9ce8b914.json","generated-locales/embed-legacy/ms.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ms.2583e7c1.yml","generated-locales/embed-legacy/nb.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/nb.281072d3.json","generated-locales/embed-legacy/nb.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/nb.08d48335.yml","generated-locales/embed-legacy/ne.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ne.fec564f7.json","generated-locales/embed-legacy/ne.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ne.14b2e92d.yml","generated-locales/embed-legacy/nl.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/nl.89d195d0.json","generated-locales/embed-legacy/nl.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/nl.4530831b.yml","generated-locales/embed-legacy/or.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/or.327666a0.json","generated-locales/embed-legacy/or.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/or.695bcf3a.yml","generated-locales/embed-legacy/pa-IN.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pa-IN.a11b069f.json","generated-locales/embed-legacy/pa-IN.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pa-IN.c4add668.yml","generated-locales/embed-legacy/pa-PK.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pa-PK.d2d39434.json","generated-locales/embed-legacy/pa-PK.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pa-PK.14133261.yml","generated-locales/embed-legacy/pl.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pl.a22d0144.json","generated-locales/embed-legacy/pl.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pl.edd400a1.yml","generated-locales/embed-legacy/pt-BR.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pt-BR.12b76a58.json","generated-locales/embed-legacy/pt-BR.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pt-BR.b3cd23c3.yml","generated-locales/embed-legacy/pt-PT.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pt-PT.4c5af50e.json","generated-locales/embed-legacy/pt-PT.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/pt-PT.47268ae2.yml","generated-locales/embed-legacy/ro.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ro.011be00e.json","generated-locales/embed-legacy/ro.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ro.8850ff5e.yml","generated-locales/embed-legacy/ru.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ru.56495f3e.json","generated-locales/embed-legacy/ru.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ru.a01bed4f.yml","generated-locales/embed-legacy/sk.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sk.cc590b4f.json","generated-locales/embed-legacy/sk.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sk.caec45d2.yml","generated-locales/embed-legacy/sl.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sl.92ddda16.json","generated-locales/embed-legacy/sl.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sl.5a711ec0.yml","generated-locales/embed-legacy/sr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sr.8842494f.json","generated-locales/embed-legacy/sr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sr.70eba9da.yml","generated-locales/embed-legacy/sv.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sv.b79dc2fa.json","generated-locales/embed-legacy/sv.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sv.aaf75723.yml","generated-locales/embed-legacy/sw.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sw.9981801c.json","generated-locales/embed-legacy/sw.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/sw.bdf01c4d.yml","generated-locales/embed-legacy/ta.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ta.e7363591.json","generated-locales/embed-legacy/ta.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ta.371683b0.yml","generated-locales/embed-legacy/te.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/te.41a06941.json","generated-locales/embed-legacy/te.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/te.45e3f9d8.yml","generated-locales/embed-legacy/th.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/th.2d25983f.json","generated-locales/embed-legacy/th.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/th.57e410e4.yml","generated-locales/embed-legacy/tr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/tr.f407ea1b.json","generated-locales/embed-legacy/tr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/tr.aaa983b1.yml","generated-locales/embed-legacy/uk.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/uk.79cb10e2.json","generated-locales/embed-legacy/uk.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/uk.dc48d141.yml","generated-locales/embed-legacy/ur.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ur.b7e45d0c.json","generated-locales/embed-legacy/ur.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/ur.162f744f.yml","generated-locales/embed-legacy/vi.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/vi.7abdfd25.json","generated-locales/embed-legacy/vi.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/vi.aa900978.yml","generated-locales/embed-legacy/zh-CN.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/zh-CN.45ad30af.json","generated-locales/embed-legacy/zh-CN.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/zh-CN.89e99c57.yml","generated-locales/embed-legacy/zh-TW.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/zh-TW.dcdb05ec.json","generated-locales/embed-legacy/zh-TW.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/zh-TW.9640d598.yml","generated-locales/embed-legacy/zu.json":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/zu.399d3289.json","generated-locales/embed-legacy/zu.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed-legacy/zu.861d37cc.yml","generated-locales/embed/__longest.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/__longest.16ce289b.json","generated-locales/embed/__longest.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/__longest.1bc0c9f2.yml","generated-locales/embed/af.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/af.16ae5c2e.json","generated-locales/embed/af.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/af.aa32b4a8.yml","generated-locales/embed/am.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/am.519bb805.json","generated-locales/embed/am.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/am.2c2343ed.yml","generated-locales/embed/ar.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ar.e8c20e99.json","generated-locales/embed/ar.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ar.125cbcb9.yml","generated-locales/embed/az.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/az.349cc6f2.json","generated-locales/embed/az.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/az.f9bee8db.yml","generated-locales/embed/bg.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/bg.99545176.json","generated-locales/embed/bg.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/bg.f9c5165b.yml","generated-locales/embed/bho.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/bho.78b5388f.json","generated-locales/embed/bho.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/bho.06a4d588.yml","generated-locales/embed/bn.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/bn.ce65304a.json","generated-locales/embed/bn.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/bn.c1c5fc1c.yml","generated-locales/embed/cs.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/cs.7ae5022e.json","generated-locales/embed/cs.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/cs.bd498f47.yml","generated-locales/embed/da.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/da.e10888ff.json","generated-locales/embed/da.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/da.aa5b7eaf.yml","generated-locales/embed/de.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/de.890e5dc7.json","generated-locales/embed/de.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/de.56d009b9.yml","generated-locales/embed/el.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/el.cc3847f9.json","generated-locales/embed/el.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/el.31e0f937.yml","generated-locales/embed/en.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/en.1c2b377a.json","generated-locales/embed/en.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/en.8f20b44d.yml","generated-locales/embed/es-419.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/es-419.127e6990.json","generated-locales/embed/es-419.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/es-419.5bf1c3c7.yml","generated-locales/embed/es.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/es.93203d3f.json","generated-locales/embed/es.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/es.904ffa39.yml","generated-locales/embed/et.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/et.178ecd3e.json","generated-locales/embed/et.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/et.18d5de74.yml","generated-locales/embed/fa.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/fa.11dd6b1b.json","generated-locales/embed/fa.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/fa.635e8f15.yml","generated-locales/embed/fi.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/fi.c139d2d7.json","generated-locales/embed/fi.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/fi.2225870e.yml","generated-locales/embed/fil.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/fil.48e39860.json","generated-locales/embed/fil.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/fil.007c5aed.yml","generated-locales/embed/fr-CA.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/fr-CA.93e1c5a2.json","generated-locales/embed/fr-CA.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/fr-CA.68b810cb.yml","generated-locales/embed/fr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/fr.a49992d9.json","generated-locales/embed/fr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/fr.6eb44acc.yml","generated-locales/embed/gu.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/gu.719c6bb2.json","generated-locales/embed/gu.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/gu.752558f5.yml","generated-locales/embed/he.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/he.a02cea4e.json","generated-locales/embed/he.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/he.1f577fe5.yml","generated-locales/embed/hi.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/hi.c7c0eba9.json","generated-locales/embed/hi.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/hi.1128cb87.yml","generated-locales/embed/hr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/hr.400f0aa1.json","generated-locales/embed/hr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/hr.f031e1b1.yml","generated-locales/embed/hu.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/hu.4412b424.json","generated-locales/embed/hu.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/hu.c4f027bf.yml","generated-locales/embed/id.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/id.ad55f4db.json","generated-locales/embed/id.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/id.0014ffcb.yml","generated-locales/embed/is.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/is.6e21213d.json","generated-locales/embed/is.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/is.ff5e10ed.yml","generated-locales/embed/it.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/it.7a7961fa.json","generated-locales/embed/it.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/it.0b31d711.yml","generated-locales/embed/ja.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ja.c50460df.json","generated-locales/embed/ja.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ja.f967972c.yml","generated-locales/embed/kn.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/kn.3de9763a.json","generated-locales/embed/kn.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/kn.dcc691ef.yml","generated-locales/embed/ko.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ko.b7562792.json","generated-locales/embed/ko.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ko.2b726861.yml","generated-locales/embed/lt.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/lt.f5de9ed2.json","generated-locales/embed/lt.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/lt.462c1251.yml","generated-locales/embed/lv.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/lv.b97f1a2f.json","generated-locales/embed/lv.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/lv.869d40ac.yml","generated-locales/embed/ml.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ml.fb1a2ec4.json","generated-locales/embed/ml.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ml.c3e9d5b3.yml","generated-locales/embed/mr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/mr.79499ebb.json","generated-locales/embed/mr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/mr.544e8c90.yml","generated-locales/embed/ms.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ms.69d27aec.json","generated-locales/embed/ms.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ms.7e22a6d6.yml","generated-locales/embed/nb.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/nb.015190db.json","generated-locales/embed/nb.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/nb.cf8e03f6.yml","generated-locales/embed/ne.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ne.256d0fc3.json","generated-locales/embed/ne.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ne.8d32b33d.yml","generated-locales/embed/nl.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/nl.fccdfe88.json","generated-locales/embed/nl.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/nl.730375de.yml","generated-locales/embed/or.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/or.3c0bd5af.json","generated-locales/embed/or.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/or.ca2eb053.yml","generated-locales/embed/pa-IN.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/pa-IN.6f1cde3e.json","generated-locales/embed/pa-IN.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/pa-IN.6a17d4a3.yml","generated-locales/embed/pa-PK.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/pa-PK.90d9c4d6.json","generated-locales/embed/pa-PK.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/pa-PK.7eb93a20.yml","generated-locales/embed/pl.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/pl.20b0d804.json","generated-locales/embed/pl.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/pl.df161aa3.yml","generated-locales/embed/pt-BR.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/pt-BR.dbe3ecd7.json","generated-locales/embed/pt-BR.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/pt-BR.d6867d72.yml","generated-locales/embed/pt-PT.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/pt-PT.6c1c08e1.json","generated-locales/embed/pt-PT.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/pt-PT.2e26542e.yml","generated-locales/embed/ro.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ro.bcdc0b47.json","generated-locales/embed/ro.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ro.ba39441f.yml","generated-locales/embed/ru.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ru.76858588.json","generated-locales/embed/ru.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ru.0ec43c0d.yml","generated-locales/embed/sk.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/sk.8d38ec82.json","generated-locales/embed/sk.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/sk.a9c616bc.yml","generated-locales/embed/sl.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/sl.89a7ac5c.json","generated-locales/embed/sl.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/sl.4d9c7c8c.yml","generated-locales/embed/sr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/sr.7b1697dd.json","generated-locales/embed/sr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/sr.086400af.yml","generated-locales/embed/sv.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/sv.2d802b9c.json","generated-locales/embed/sv.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/sv.85a05c44.yml","generated-locales/embed/sw.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/sw.91be3cf5.json","generated-locales/embed/sw.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/sw.af5663c4.yml","generated-locales/embed/ta.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ta.9d95ecf8.json","generated-locales/embed/ta.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ta.ad35e7d0.yml","generated-locales/embed/te.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/te.a8196be7.json","generated-locales/embed/te.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/te.43f564d2.yml","generated-locales/embed/th.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/th.2e29e829.json","generated-locales/embed/th.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/th.c3e791ec.yml","generated-locales/embed/tr.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/tr.e91a092b.json","generated-locales/embed/tr.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/tr.35ad9bcd.yml","generated-locales/embed/uk.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/uk.c1f3e149.json","generated-locales/embed/uk.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/uk.b9832086.yml","generated-locales/embed/ur.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/ur.c0949072.json","generated-locales/embed/ur.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/ur.f5873b11.yml","generated-locales/embed/vi.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/vi.fea045b4.json","generated-locales/embed/vi.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/vi.9065b7eb.yml","generated-locales/embed/zh-CN.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/zh-CN.a675fa40.json","generated-locales/embed/zh-CN.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/zh-CN.e8a2f27c.yml","generated-locales/embed/zh-TW.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/zh-TW.c4b1706b.json","generated-locales/embed/zh-TW.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/zh-TW.264f82a9.yml","generated-locales/embed/zu.json":"https://open.spotifycdn.com/cdn/generated-locales/embed/zu.d41fe551.json","generated-locales/embed/zu.yml":"https://open.spotifycdn.com/cdn/generated-locales/embed/zu.ecb4464e.yml","generated-locales/mobile-web-player/__longest.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/__longest.8cae1086.json","generated-locales/mobile-web-player/__longest.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/__longest.c53d6dc6.yml","generated-locales/mobile-web-player/af.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/af.3c8553ad.json","generated-locales/mobile-web-player/af.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/af.4e9e69e3.yml","generated-locales/mobile-web-player/am.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/am.8fbed023.json","generated-locales/mobile-web-player/am.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/am.c3647e89.yml","generated-locales/mobile-web-player/ar.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ar.49a43965.json","generated-locales/mobile-web-player/ar.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ar.cd69fb09.yml","generated-locales/mobile-web-player/az.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/az.ff959565.json","generated-locales/mobile-web-player/az.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/az.7b9fd473.yml","generated-locales/mobile-web-player/bg.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/bg.8da76a89.json","generated-locales/mobile-web-player/bg.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/bg.8e6227ab.yml","generated-locales/mobile-web-player/bho.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/bho.62bff69a.json","generated-locales/mobile-web-player/bho.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/bho.afc1294a.yml","generated-locales/mobile-web-player/bn.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/bn.b5a10f35.json","generated-locales/mobile-web-player/bn.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/bn.26e392da.yml","generated-locales/mobile-web-player/cs.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/cs.d30f72fd.json","generated-locales/mobile-web-player/cs.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/cs.76e4441b.yml","generated-locales/mobile-web-player/da.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/da.9302689a.json","generated-locales/mobile-web-player/da.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/da.d32dbaae.yml","generated-locales/mobile-web-player/de.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/de.84e9b626.json","generated-locales/mobile-web-player/de.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/de.7e582f1b.yml","generated-locales/mobile-web-player/el.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/el.7d934685.json","generated-locales/mobile-web-player/el.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/el.46460e15.yml","generated-locales/mobile-web-player/en.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/en.b892b6c1.json","generated-locales/mobile-web-player/en.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/en.0bfbea88.yml","generated-locales/mobile-web-player/es-419.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/es-419.0d84dc7e.json","generated-locales/mobile-web-player/es-419.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/es-419.e82a4255.yml","generated-locales/mobile-web-player/es.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/es.4a3bc618.json","generated-locales/mobile-web-player/es.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/es.44ed8355.yml","generated-locales/mobile-web-player/et.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/et.6216bb82.json","generated-locales/mobile-web-player/et.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/et.8528e3f1.yml","generated-locales/mobile-web-player/fa.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fa.65d6d6f2.json","generated-locales/mobile-web-player/fa.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fa.dde061be.yml","generated-locales/mobile-web-player/fi.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fi.6007a890.json","generated-locales/mobile-web-player/fi.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fi.7682f516.yml","generated-locales/mobile-web-player/fil.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fil.db34e7a0.json","generated-locales/mobile-web-player/fil.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fil.7d9e2b20.yml","generated-locales/mobile-web-player/fr-CA.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fr-CA.7c629e7b.json","generated-locales/mobile-web-player/fr-CA.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fr-CA.9bdd7c7a.yml","generated-locales/mobile-web-player/fr.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fr.c1ff8d10.json","generated-locales/mobile-web-player/fr.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/fr.cf5e9f96.yml","generated-locales/mobile-web-player/gu.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/gu.95a0958a.json","generated-locales/mobile-web-player/gu.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/gu.9a5ba6bd.yml","generated-locales/mobile-web-player/he.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/he.5bab9350.json","generated-locales/mobile-web-player/he.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/he.eab9db59.yml","generated-locales/mobile-web-player/hi.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/hi.07010ee4.json","generated-locales/mobile-web-player/hi.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/hi.6946ab70.yml","generated-locales/mobile-web-player/hr.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/hr.cb63453c.json","generated-locales/mobile-web-player/hr.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/hr.80902661.yml","generated-locales/mobile-web-player/hu.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/hu.215fa648.json","generated-locales/mobile-web-player/hu.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/hu.09f154a1.yml","generated-locales/mobile-web-player/id.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/id.5e3690b5.json","generated-locales/mobile-web-player/id.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/id.8c1a13b3.yml","generated-locales/mobile-web-player/is.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/is.6a09139e.json","generated-locales/mobile-web-player/is.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/is.3cf9b8ec.yml","generated-locales/mobile-web-player/it.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/it.316d2015.json","generated-locales/mobile-web-player/it.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/it.6d1d97e1.yml","generated-locales/mobile-web-player/ja.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ja.da00c634.json","generated-locales/mobile-web-player/ja.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ja.703ce501.yml","generated-locales/mobile-web-player/kn.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/kn.057b4ba7.json","generated-locales/mobile-web-player/kn.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/kn.ba3d21ae.yml","generated-locales/mobile-web-player/ko.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ko.ce290cd6.json","generated-locales/mobile-web-player/ko.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ko.05f57ee5.yml","generated-locales/mobile-web-player/lt.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/lt.b9ce643c.json","generated-locales/mobile-web-player/lt.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/lt.4ce31b6c.yml","generated-locales/mobile-web-player/lv.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/lv.6de98f8d.json","generated-locales/mobile-web-player/lv.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/lv.c40d0d5c.yml","generated-locales/mobile-web-player/ml.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ml.c69cfdc4.json","generated-locales/mobile-web-player/ml.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ml.9c5af510.yml","generated-locales/mobile-web-player/mr.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/mr.ecb7eb3a.json","generated-locales/mobile-web-player/mr.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/mr.e69b503c.yml","generated-locales/mobile-web-player/ms.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ms.a25dff80.json","generated-locales/mobile-web-player/ms.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ms.43c2a863.yml","generated-locales/mobile-web-player/nb.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/nb.215eca17.json","generated-locales/mobile-web-player/nb.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/nb.8a30d0de.yml","generated-locales/mobile-web-player/ne.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ne.af1b815b.json","generated-locales/mobile-web-player/ne.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ne.51f2e5ea.yml","generated-locales/mobile-web-player/nl.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/nl.1fc533c4.json","generated-locales/mobile-web-player/nl.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/nl.8bac08d0.yml","generated-locales/mobile-web-player/or.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/or.7306dbe2.json","generated-locales/mobile-web-player/or.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/or.4e3130f0.yml","generated-locales/mobile-web-player/pa-IN.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pa-IN.0ecb2317.json","generated-locales/mobile-web-player/pa-IN.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pa-IN.678cfee6.yml","generated-locales/mobile-web-player/pa-PK.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pa-PK.7352d643.json","generated-locales/mobile-web-player/pa-PK.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pa-PK.3b09b3a9.yml","generated-locales/mobile-web-player/pl.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pl.199a51cc.json","generated-locales/mobile-web-player/pl.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pl.3ca6571d.yml","generated-locales/mobile-web-player/pt-BR.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pt-BR.c90fa4ac.json","generated-locales/mobile-web-player/pt-BR.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pt-BR.127bb4e1.yml","generated-locales/mobile-web-player/pt-PT.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pt-PT.36502d81.json","generated-locales/mobile-web-player/pt-PT.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/pt-PT.55f6d7e0.yml","generated-locales/mobile-web-player/ro.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ro.198382e0.json","generated-locales/mobile-web-player/ro.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ro.cd05fce0.yml","generated-locales/mobile-web-player/ru.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ru.a7dfc45d.json","generated-locales/mobile-web-player/ru.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ru.35cdd4c0.yml","generated-locales/mobile-web-player/sk.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sk.12aca9b5.json","generated-locales/mobile-web-player/sk.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sk.90644856.yml","generated-locales/mobile-web-player/sl.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sl.e50529ed.json","generated-locales/mobile-web-player/sl.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sl.c8a74de1.yml","generated-locales/mobile-web-player/sr.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sr.41559a36.json","generated-locales/mobile-web-player/sr.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sr.22a5ce05.yml","generated-locales/mobile-web-player/sv.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sv.0ab69a96.json","generated-locales/mobile-web-player/sv.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sv.f8c75e9c.yml","generated-locales/mobile-web-player/sw.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sw.862902bc.json","generated-locales/mobile-web-player/sw.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/sw.dde8cc28.yml","generated-locales/mobile-web-player/ta.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ta.73b96283.json","generated-locales/mobile-web-player/ta.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ta.62a3a46e.yml","generated-locales/mobile-web-player/te.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/te.b4ffb6cc.json","generated-locales/mobile-web-player/te.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/te.6c22b95b.yml","generated-locales/mobile-web-player/th.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/th.36c26b7e.json","generated-locales/mobile-web-player/th.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/th.bc87935b.yml","generated-locales/mobile-web-player/tr.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/tr.88bfcbd7.json","generated-locales/mobile-web-player/tr.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/tr.9c315571.yml","generated-locales/mobile-web-player/uk.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/uk.3eb4d0a7.json","generated-locales/mobile-web-player/uk.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/uk.22ba1081.yml","generated-locales/mobile-web-player/ur.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ur.54efedcd.json","generated-locales/mobile-web-player/ur.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/ur.5cd258ab.yml","generated-locales/mobile-web-player/vi.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/vi.a445556b.json","generated-locales/mobile-web-player/vi.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/vi.b524c9d2.yml","generated-locales/mobile-web-player/zh-CN.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/zh-CN.82ef1709.json","generated-locales/mobile-web-player/zh-CN.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/zh-CN.75df8b2d.yml","generated-locales/mobile-web-player/zh-TW.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/zh-TW.a7844156.json","generated-locales/mobile-web-player/zh-TW.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/zh-TW.2caf0764.yml","generated-locales/mobile-web-player/zu.json":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/zu.da5b895c.json","generated-locales/mobile-web-player/zu.yml":"https://open.spotifycdn.com/cdn/generated-locales/mobile-web-player/zu.b367d4f3.yml","generated-locales/web-player/__longest.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/__longest.9748f747.json","generated-locales/web-player/__longest.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/__longest.43efc7b8.yml","generated-locales/web-player/af.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/af.b41e441e.json","generated-locales/web-player/af.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/af.0db21181.yml","generated-locales/web-player/am.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/am.352357a2.json","generated-locales/web-player/am.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/am.340b496c.yml","generated-locales/web-player/ar.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ar.88c94e3e.json","generated-locales/web-player/ar.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ar.1ffd36f9.yml","generated-locales/web-player/az.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/az.e335cfa5.json","generated-locales/web-player/az.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/az.252d2cf1.yml","generated-locales/web-player/bg.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/bg.c78252df.json","generated-locales/web-player/bg.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/bg.0cad4b74.yml","generated-locales/web-player/bho.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/bho.8fd2187d.json","generated-locales/web-player/bho.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/bho.c17d5549.yml","generated-locales/web-player/bn.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/bn.0be4885e.json","generated-locales/web-player/bn.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/bn.f2cdf1f8.yml","generated-locales/web-player/cs.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/cs.76476ec6.json","generated-locales/web-player/cs.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/cs.abf07642.yml","generated-locales/web-player/da.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/da.aea75c98.json","generated-locales/web-player/da.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/da.f9287914.yml","generated-locales/web-player/de.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/de.0bc9b479.json","generated-locales/web-player/de.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/de.8293850b.yml","generated-locales/web-player/el.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/el.3c5e8ea7.json","generated-locales/web-player/el.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/el.6dea9d97.yml","generated-locales/web-player/en.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/en.c6627049.json","generated-locales/web-player/en.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/en.52ac2c19.yml","generated-locales/web-player/es-419.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/es-419.820a2172.json","generated-locales/web-player/es-419.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/es-419.9a544ed9.yml","generated-locales/web-player/es.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/es.1c2a1376.json","generated-locales/web-player/es.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/es.55335b4e.yml","generated-locales/web-player/et.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/et.50e6d981.json","generated-locales/web-player/et.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/et.04d02481.yml","generated-locales/web-player/fa.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fa.5266f0df.json","generated-locales/web-player/fa.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fa.ce1e3b18.yml","generated-locales/web-player/fi.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fi.4d120dce.json","generated-locales/web-player/fi.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fi.ef3a49c5.yml","generated-locales/web-player/fil.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fil.da2a1330.json","generated-locales/web-player/fil.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fil.cf4adce1.yml","generated-locales/web-player/fr-CA.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fr-CA.cdb17618.json","generated-locales/web-player/fr-CA.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fr-CA.ae0bd7a9.yml","generated-locales/web-player/fr.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fr.7cea4d64.json","generated-locales/web-player/fr.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/fr.a6e0ff55.yml","generated-locales/web-player/gu.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/gu.09c20467.json","generated-locales/web-player/gu.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/gu.78b59218.yml","generated-locales/web-player/he.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/he.58e9a637.json","generated-locales/web-player/he.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/he.e8c5d4b5.yml","generated-locales/web-player/hi.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/hi.6efccb72.json","generated-locales/web-player/hi.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/hi.f4d50cee.yml","generated-locales/web-player/hr.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/hr.1d28cdf9.json","generated-locales/web-player/hr.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/hr.fa3eade6.yml","generated-locales/web-player/hu.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/hu.ca4f9045.json","generated-locales/web-player/hu.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/hu.a4def5fb.yml","generated-locales/web-player/id.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/id.d344d90b.json","generated-locales/web-player/id.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/id.a0088b73.yml","generated-locales/web-player/is.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/is.1dc727f6.json","generated-locales/web-player/is.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/is.8b7b89a3.yml","generated-locales/web-player/it.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/it.fb09f3b4.json","generated-locales/web-player/it.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/it.94f70890.yml","generated-locales/web-player/ja.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ja.a284bf84.json","generated-locales/web-player/ja.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ja.048a97e4.yml","generated-locales/web-player/kn.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/kn.7fe88692.json","generated-locales/web-player/kn.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/kn.6626dae2.yml","generated-locales/web-player/ko.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ko.9a608692.json","generated-locales/web-player/ko.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ko.92dfe753.yml","generated-locales/web-player/lt.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/lt.a496c972.json","generated-locales/web-player/lt.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/lt.37d7d8dc.yml","generated-locales/web-player/lv.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/lv.f23c56b9.json","generated-locales/web-player/lv.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/lv.b226e27d.yml","generated-locales/web-player/ml.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ml.3ce88078.json","generated-locales/web-player/ml.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ml.1eb1abb9.yml","generated-locales/web-player/mr.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/mr.5d86e97f.json","generated-locales/web-player/mr.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/mr.bf1c8eb4.yml","generated-locales/web-player/ms.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ms.84839f4a.json","generated-locales/web-player/ms.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ms.bde076b2.yml","generated-locales/web-player/nb.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/nb.1ac94f1f.json","generated-locales/web-player/nb.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/nb.d787339d.yml","generated-locales/web-player/ne.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ne.5ad881a5.json","generated-locales/web-player/ne.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ne.2b0e29b2.yml","generated-locales/web-player/nl.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/nl.97be590a.json","generated-locales/web-player/nl.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/nl.53f9efe8.yml","generated-locales/web-player/or.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/or.88f9cac9.json","generated-locales/web-player/or.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/or.b0c7573c.yml","generated-locales/web-player/pa-IN.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pa-IN.96fa8102.json","generated-locales/web-player/pa-IN.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pa-IN.5d1ed77e.yml","generated-locales/web-player/pa-PK.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pa-PK.5cc3d948.json","generated-locales/web-player/pa-PK.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pa-PK.b16b6b91.yml","generated-locales/web-player/pl.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pl.99e191f3.json","generated-locales/web-player/pl.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pl.ea7126ce.yml","generated-locales/web-player/pt-BR.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pt-BR.76b2b812.json","generated-locales/web-player/pt-BR.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pt-BR.b2036cd7.yml","generated-locales/web-player/pt-PT.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pt-PT.196bec3a.json","generated-locales/web-player/pt-PT.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/pt-PT.0ec35727.yml","generated-locales/web-player/ro.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ro.b86d524c.json","generated-locales/web-player/ro.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ro.9c1d1f45.yml","generated-locales/web-player/ru.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ru.ec1d4574.json","generated-locales/web-player/ru.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ru.fd72ef21.yml","generated-locales/web-player/sk.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sk.dcd81274.json","generated-locales/web-player/sk.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sk.330a1871.yml","generated-locales/web-player/sl.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sl.b01abe51.json","generated-locales/web-player/sl.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sl.0d9ce0e8.yml","generated-locales/web-player/sr.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sr.3700e4d1.json","generated-locales/web-player/sr.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sr.dfd0f2a6.yml","generated-locales/web-player/sv.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sv.940a09a0.json","generated-locales/web-player/sv.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sv.af6af2f4.yml","generated-locales/web-player/sw.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sw.372fbddf.json","generated-locales/web-player/sw.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/sw.3f588b53.yml","generated-locales/web-player/ta.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ta.454a9918.json","generated-locales/web-player/ta.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ta.9ddcdc4d.yml","generated-locales/web-player/te.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/te.fd783e9d.json","generated-locales/web-player/te.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/te.5bdf7bae.yml","generated-locales/web-player/th.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/th.e7eaf45b.json","generated-locales/web-player/th.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/th.c2d9cd9a.yml","generated-locales/web-player/tr.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/tr.b24b1b7d.json","generated-locales/web-player/tr.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/tr.3ee5a204.yml","generated-locales/web-player/uk.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/uk.91036356.json","generated-locales/web-player/uk.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/uk.97902a5a.yml","generated-locales/web-player/ur.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ur.9b885976.json","generated-locales/web-player/ur.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/ur.3c0b26a7.yml","generated-locales/web-player/vi.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/vi.240e2484.json","generated-locales/web-player/vi.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/vi.08f6bc72.yml","generated-locales/web-player/zh-CN.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/zh-CN.0a11d7d6.json","generated-locales/web-player/zh-CN.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/zh-CN.b025491e.yml","generated-locales/web-player/zh-TW.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/zh-TW.7e1e9564.json","generated-locales/web-player/zh-TW.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/zh-TW.b4c0a62f.yml","generated-locales/web-player/zu.json":"https://open.spotifycdn.com/cdn/generated-locales/web-player/zu.2dc78f1f.json","generated-locales/web-player/zu.yml":"https://open.spotifycdn.com/cdn/generated-locales/web-player/zu.4709f986.yml","generated/manifest-mobile-web-player.json":"https://open.spotifycdn.com/cdn/generated/manifest-mobile-web-player.6466be7d.json","generated/manifest-web-player.json":"https://open.spotifycdn.com/cdn/generated/manifest-web-player.b34b7baf.json","generated/opensearch.xml":"https://open.spotifycdn.com/cdn/generated/opensearch.c5bc84af.xml","images/checkmark.png":"https://open.spotifycdn.com/cdn/images/checkmark.9e1a7608.png","images/concert-hub-fb-card.png":"https://open.spotifycdn.com/cdn/images/concert-hub-fb-card.edb38821.png","images/concert-hub-header.png":"https://open.spotifycdn.com/cdn/images/concert-hub-header.56bcad9b.png","images/concert-hub-iphone-de.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-de.2f132ca3.png","images/concert-hub-iphone-el.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-el.8b3b94a4.png","images/concert-hub-iphone-en.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-en.88b1bea2.png","images/concert-hub-iphone-es_419.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-es_419.f61fbda5.png","images/concert-hub-iphone-es.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-es.f61fbda5.png","images/concert-hub-iphone-fi.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-fi.25a8376a.png","images/concert-hub-iphone-fr_CA.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-fr_CA.bc238a54.png","images/concert-hub-iphone-fr.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-fr.60ec537b.png","images/concert-hub-iphone-hu.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-hu.f1725c37.png","images/concert-hub-iphone-id.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-id.f70b2301.png","images/concert-hub-iphone-it.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-it.b18651c6.png","images/concert-hub-iphone-ja.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-ja.88b1bea2.png","images/concert-hub-iphone-ms.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-ms.c695e9de.png","images/concert-hub-iphone-nl.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-nl.70e57293.png","images/concert-hub-iphone-pl.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-pl.6ca1b2dc.png","images/concert-hub-iphone-pt_BR.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-pt_BR.7e417576.png","images/concert-hub-iphone-sv.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-sv.67301592.png","images/concert-hub-iphone-tr.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-tr.f081d198.png","images/concert-hub-iphone-zh_TW.png":"https://open.spotifycdn.com/cdn/images/concert-hub-iphone-zh_TW.88b1bea2.png","images/concert-hub-twitter-card.png":"https://open.spotifycdn.com/cdn/images/concert-hub-twitter-card.f9d9a6d4.png","images/connect_header@1x.png":"https://open.spotifycdn.com/cdn/images/connect_header@1x.8f827808.png","images/connect-to-devices-white.svg":"https://open.spotifycdn.com/cdn/images/connect-to-devices-white.69d4229a.svg","images/desktop-auth-check.svg":"https://open.spotifycdn.com/cdn/images/desktop-auth-check.65be3bbc.svg","images/desktop-auth-error.svg":"https://open.spotifycdn.com/cdn/images/desktop-auth-error.b82f823b.svg","images/device-picker-equaliser-animation.webp":"https://open.spotifycdn.com/cdn/images/device-picker-equaliser-animation.b36cb44e.webp","images/devices/mac.png":"https://open.spotifycdn.com/cdn/images/devices/mac.1584582e.png","images/download-badges/apple/ar.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ar.d7906eb1.svg","images/download-badges/apple/az.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/az.00a386af.svg","images/download-badges/apple/bg.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/bg.e26976f9.svg","images/download-badges/apple/cs_CZ.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/cs_CZ.6f146d8e.svg","images/download-badges/apple/da.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/da.9fa48366.svg","images/download-badges/apple/de.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/de.d5d0e551.svg","images/download-badges/apple/ee.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ee.0189025b.svg","images/download-badges/apple/el.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/el.ea7795e2.svg","images/download-badges/apple/en.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/en.8c4986ee.svg","images/download-badges/apple/es_mx.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/es_mx.838d2617.svg","images/download-badges/apple/es.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/es.bc588dbd.svg","images/download-badges/apple/fi.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/fi.833a71e4.svg","images/download-badges/apple/fp.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/fp.ed4afb36.svg","images/download-badges/apple/fr_ca.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/fr_ca.fa603df2.svg","images/download-badges/apple/fr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/fr.fa603df2.svg","images/download-badges/apple/he.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/he.f2cc09e3.svg","images/download-badges/apple/hu.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/hu.e04e4dd3.svg","images/download-badges/apple/id.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/id.879a2fc6.svg","images/download-badges/apple/int.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/int.8c4986ee.svg","images/download-badges/apple/it.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/it.d71a027e.svg","images/download-badges/apple/ja.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ja.621b45d8.svg","images/download-badges/apple/ko.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ko.97efaa84.svg","images/download-badges/apple/lt.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/lt.62927c82.svg","images/download-badges/apple/lv.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/lv.ef1ba614.svg","images/download-badges/apple/ms.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ms.06625cd6.svg","images/download-badges/apple/mt.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/mt.2e719e0e.svg","images/download-badges/apple/nb.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/nb.71cf46e4.svg","images/download-badges/apple/nl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/nl.e16ed416.svg","images/download-badges/apple/pl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/pl.c537e41d.svg","images/download-badges/apple/pt_br.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/pt_br.7b81b64f.svg","images/download-badges/apple/pt.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/pt.a0224035.svg","images/download-badges/apple/ro.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ro.ad28d7d9.svg","images/download-badges/apple/ru.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/ru.2ac2876e.svg","images/download-badges/apple/sk.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/sk.f5084542.svg","images/download-badges/apple/sl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/sl.324f34cd.svg","images/download-badges/apple/sv.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/sv.19773ac2.svg","images/download-badges/apple/th_TH.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/th_TH.0a069d53.svg","images/download-badges/apple/tr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/tr.8be97741.svg","images/download-badges/apple/vi_VN.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/vi_VN.e2570fa1.svg","images/download-badges/apple/zh_HANS.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/zh_HANS.8b95a458.svg","images/download-badges/apple/zh_HANT.svg":"https://open.spotifycdn.com/cdn/images/download-badges/apple/zh_HANT.a1838441.svg","images/download-badges/google/af.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/af.55f5a525.svg","images/download-badges/google/am.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/am.170d06df.svg","images/download-badges/google/ar.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ar.75be3942.svg","images/download-badges/google/az.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/az.f3cd9a4a.svg","images/download-badges/google/be.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/be.e1cd0535.svg","images/download-badges/google/bg.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/bg.5f0e550d.svg","images/download-badges/google/bn.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/bn.4ce7bc27.svg","images/download-badges/google/bs.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/bs.7fd7ae7a.svg","images/download-badges/google/ca.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ca.2cdc6348.svg","images/download-badges/google/cr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/cr.44f3f6dd.svg","images/download-badges/google/cs_CZ.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/cs_CZ.1a2cf31d.svg","images/download-badges/google/da.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/da.615e44e2.svg","images/download-badges/google/de.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/de.222352a7.svg","images/download-badges/google/el.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/el.8959a65f.svg","images/download-badges/google/en.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/en.060d4113.svg","images/download-badges/google/es_419.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/es_419.1c88179e.svg","images/download-badges/google/es.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/es.ac9ce85f.svg","images/download-badges/google/et.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/et.a4590629.svg","images/download-badges/google/eu.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/eu.a31efb99.svg","images/download-badges/google/fa.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/fa.a84f7cdd.svg","images/download-badges/google/fi.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/fi.d365099d.svg","images/download-badges/google/fp.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/fp.2db54495.svg","images/download-badges/google/fr_ca.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/fr_ca.8dbe7040.svg","images/download-badges/google/fr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/fr.f23f5a3c.svg","images/download-badges/google/gl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/gl.277c3e98.svg","images/download-badges/google/gu.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/gu.2f944c71.svg","images/download-badges/google/he.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/he.1bd37417.svg","images/download-badges/google/hi.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/hi.52cce4e9.svg","images/download-badges/google/hr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/hr.68335d4a.svg","images/download-badges/google/hu.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/hu.cec01153.svg","images/download-badges/google/hy.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/hy.19690d74.svg","images/download-badges/google/id.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/id.761c3288.svg","images/download-badges/google/int.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/int.060d4113.svg","images/download-badges/google/is.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/is.8bb173f7.svg","images/download-badges/google/it.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/it.0a89994f.svg","images/download-badges/google/ja.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ja.6f09cc26.svg","images/download-badges/google/ka.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ka.d2d3b2c0.svg","images/download-badges/google/kk.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/kk.60fd0853.svg","images/download-badges/google/km.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/km.0ba3f716.svg","images/download-badges/google/kn.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/kn.f3871482.svg","images/download-badges/google/ko.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ko.96e60d91.svg","images/download-badges/google/ky.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ky.46131ad1.svg","images/download-badges/google/lo.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/lo.3df40758.svg","images/download-badges/google/lt.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/lt.6ac78e60.svg","images/download-badges/google/lv.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/lv.356a4fa8.svg","images/download-badges/google/mk.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/mk.549f0f7f.svg","images/download-badges/google/ml.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ml.cbd27c60.svg","images/download-badges/google/mn.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/mn.9ff6eb1e.svg","images/download-badges/google/mr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/mr.a0ac9011.svg","images/download-badges/google/ms.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ms.a920a039.svg","images/download-badges/google/my.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/my.8c1d448d.svg","images/download-badges/google/nb.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/nb.7227b6a2.svg","images/download-badges/google/ne.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ne.1b1c6cb0.svg","images/download-badges/google/nl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/nl.60840ed7.svg","images/download-badges/google/pa.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/pa.2fbda0cf.svg","images/download-badges/google/pl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/pl.05984a1a.svg","images/download-badges/google/pt_br.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/pt_br.03fd0a20.svg","images/download-badges/google/pt.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/pt.01fa7760.svg","images/download-badges/google/ro.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ro.52394f01.svg","images/download-badges/google/ru.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ru.4a75c567.svg","images/download-badges/google/si.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/si.11e33f4f.svg","images/download-badges/google/sk.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/sk.8b6098b4.svg","images/download-badges/google/sl.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/sl.1fb7392b.svg","images/download-badges/google/sq.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/sq.007a9b11.svg","images/download-badges/google/sr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/sr.7deee3c8.svg","images/download-badges/google/sv.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/sv.694267c1.svg","images/download-badges/google/sw.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/sw.ca00627d.svg","images/download-badges/google/ta.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ta.f72b8274.svg","images/download-badges/google/te.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/te.710170eb.svg","images/download-badges/google/th_TH.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/th_TH.c396a2b3.svg","images/download-badges/google/tr.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/tr.8eba8880.svg","images/download-badges/google/ua.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ua.dae54416.svg","images/download-badges/google/ur.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/ur.f63f68c9.svg","images/download-badges/google/uz.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/uz.35dd654d.svg","images/download-badges/google/vi_VN.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/vi_VN.1f252c03.svg","images/download-badges/google/zh_HANS.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/zh_HANS.83747f32.svg","images/download-badges/google/zh_HANT.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/zh_HANT.1f5c8004.svg","images/download-badges/google/zh_hk.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/zh_hk.c5eb127a.svg","images/download-badges/google/zu.svg":"https://open.spotifycdn.com/cdn/images/download-badges/google/zu.49f66ae6.svg","images/embed-legacy/copy-32_circle_grey_outline_bg.svg":"https://open.spotifycdn.com/cdn/images/embed-legacy/copy-32_circle_grey_outline_bg.0c6130eb.svg","images/embed-legacy/embed-code-32_circle_grey_outline_bg.svg":"https://open.spotifycdn.com/cdn/images/embed-legacy/embed-code-32_circle_grey_outline_bg.b40a255f.svg","images/embed-legacy/fb_colour.svg":"https://open.spotifycdn.com/cdn/images/embed-legacy/fb_colour.13fa515f.svg","images/embed-legacy/messenger_colour.svg":"https://open.spotifycdn.com/cdn/images/embed-legacy/messenger_colour.8f4836ec.svg","images/embed-legacy/twitter_colour.svg":"https://open.spotifycdn.com/cdn/images/embed-legacy/twitter_colour.456d46db.svg","images/embed-legacy/whatsapp.svg":"https://open.spotifycdn.com/cdn/images/embed-legacy/whatsapp.e33bfab4.svg","images/employee-podcasts-modal-art.png":"https://open.spotifycdn.com/cdn/images/employee-podcasts-modal-art.32ebcdf8.png","images/equaliser-animated-green.gif":"https://open.spotifycdn.com/cdn/images/equaliser-animated-green.f93a2ef4.gif","images/equaliser-green.svg":"https://open.spotifycdn.com/cdn/images/equaliser-green.1184ed87.svg","images/error-page-logo.svg":"https://open.spotifycdn.com/cdn/images/error-page-logo.ebe42ce5.svg","images/favicon.ico":"https://open.spotifycdn.com/cdn/images/favicon.5cb2bd30.ico","images/favicon.png":"https://open.spotifycdn.com/cdn/images/favicon.0c211e2e.png","images/favicon16.png":"https://open.spotifycdn.com/cdn/images/favicon16.c498a969.png","images/favicon32.png":"https://open.spotifycdn.com/cdn/images/favicon32.8e66b099.png","images/focused_stroy_play.png":"https://open.spotifycdn.com/cdn/images/focused_stroy_play.57a12bc7.png","images/hifi-button-off.svg":"https://open.spotifycdn.com/cdn/images/hifi-button-off.87461500.svg","images/hifi-button-on.svg":"https://open.spotifycdn.com/cdn/images/hifi-button-on.48a2de90.svg","images/hifi.svg":"https://open.spotifycdn.com/cdn/images/hifi.0526a5b1.svg","images/home-icon.svg":"https://open.spotifycdn.com/cdn/images/home-icon.ba66757a.svg","images/icons/Spotify_1024.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_1024.4027f848.png","images/icons/Spotify_128.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_128.c9ce2f2e.png","images/icons/Spotify_16.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_16.aa3775a0.png","images/icons/Spotify_256.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_256.c8416b60.png","images/icons/Spotify_32.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_32.01f2b5c3.png","images/icons/Spotify_512.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_512.49a0bf03.png","images/icons/Spotify_64.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_64.375a69e1.png","images/icons/Spotify_MWP_192.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_MWP_192.34e85b0e.png","images/icons/Spotify_MWP_512.png":"https://open.spotifycdn.com/cdn/images/icons/Spotify_MWP_512.23e0876e.png","images/improved-modal-bg.jpg":"https://open.spotifycdn.com/cdn/images/improved-modal-bg.ac225d3f.jpg","images/login-background.jpg":"https://open.spotifycdn.com/cdn/images/login-background.078204fe.jpg","images/login-signup-burst.svg":"https://open.spotifycdn.com/cdn/images/login-signup-burst.5f6a6521.svg","images/logo-complete-black.svg":"https://open.spotifycdn.com/cdn/images/logo-complete-black.573d8227.svg","images/logo-white-2x.png":"https://open.spotifycdn.com/cdn/images/logo-white-2x.4a6a33bc.png","images/mid-year.png":"https://open.spotifycdn.com/cdn/images/mid-year.9e2ead8f.png","images/mwp-episodelist-placeholder.png":"https://open.spotifycdn.com/cdn/images/mwp-episodelist-placeholder.8ca89306.png","images/mwp-tracklist-placeholder.png":"https://open.spotifycdn.com/cdn/images/mwp-tracklist-placeholder.f287f2ba.png","images/og-image.png":"https://open.spotifycdn.com/cdn/images/og-image.860da0d8.png","images/playlist-folder-filled.svg":"https://open.spotifycdn.com/cdn/images/playlist-folder-filled.f7932744.svg","images/ribbon-graphic-mobile.svg":"https://open.spotifycdn.com/cdn/images/ribbon-graphic-mobile.74c64eee.svg","images/ribbon-graphic-small-side.svg":"https://open.spotifycdn.com/cdn/images/ribbon-graphic-small-side.3d3845b8.svg","images/ribbon-graphic-small-top.svg":"https://open.spotifycdn.com/cdn/images/ribbon-graphic-small-top.a2dcfbcf.svg","images/ribbon-graphic.svg":"https://open.spotifycdn.com/cdn/images/ribbon-graphic.028f27ab.svg","images/s2l-desktopui-ltr.png":"https://open.spotifycdn.com/cdn/images/s2l-desktopui-ltr.a0bb24a2.png","images/s2l-desktopui-rtl.png":"https://open.spotifycdn.com/cdn/images/s2l-desktopui-rtl.862015c3.png","images/s2l-mobileui.png":"https://open.spotifycdn.com/cdn/images/s2l-mobileui.3ad8f52b.png","images/spotifylogo.svg":"https://open.spotifycdn.com/cdn/images/spotifylogo.a884cca3.svg","images/station-header-wave.svg":"https://open.spotifycdn.com/cdn/images/station-header-wave.0f3784ea.svg","images/station-wave.svg":"https://open.spotifycdn.com/cdn/images/station-wave.2b7b882c.svg","images/stranger-things-nether-bottom-left.png":"https://open.spotifycdn.com/cdn/images/stranger-things-nether-bottom-left.f06888e9.png","images/stranger-things-nether-bottom-right.png":"https://open.spotifycdn.com/cdn/images/stranger-things-nether-bottom-right.b66cd653.png","images/stranger-things-spores.png":"https://open.spotifycdn.com/cdn/images/stranger-things-spores.ea35c38c.png","images/sw_saber_ahsoka1.png":"https://open.spotifycdn.com/cdn/images/sw_saber_ahsoka1.9574535d.png","images/sw_saber_anakin.png":"https://open.spotifycdn.com/cdn/images/sw_saber_anakin.6176307b.png","images/sw_saber_leia.png":"https://open.spotifycdn.com/cdn/images/sw_saber_leia.7195cf21.png","images/sw_saber_luke.png":"https://open.spotifycdn.com/cdn/images/sw_saber_luke.e96ed874.png","images/sw_saber_mace.png":"https://open.spotifycdn.com/cdn/images/sw_saber_mace.43812892.png","images/sw_saber_rey.png":"https://open.spotifycdn.com/cdn/images/sw_saber_rey.e06a68a5.png","images/sw_saber_vader.png":"https://open.spotifycdn.com/cdn/images/sw_saber_vader.fbcf32dc.png","images/touch-icon-114.png":"https://open.spotifycdn.com/cdn/images/touch-icon-114.2fdb1eb2.png","images/touch-icon-144.png":"https://open.spotifycdn.com/cdn/images/touch-icon-144.dbd8dd2a.png","images/touch-icon-57.png":"https://open.spotifycdn.com/cdn/images/touch-icon-57.2d68aabb.png","images/touch-icon-72.png":"https://open.spotifycdn.com/cdn/images/touch-icon-72.cffecbdb.png","images/tracklist-placeholder.png":"https://open.spotifycdn.com/cdn/images/tracklist-placeholder.b3518b89.png","images/zara-larsson-singles.png":"https://open.spotifycdn.com/cdn/images/zara-larsson-singles.2c824329.png","js/fb.js":"https://open.spotifycdn.com/cdn/js/fb.83cf1e53.js","js/gtm.js":"https://open.spotifycdn.com/cdn/js/gtm.ead0f304.js","js/retargeting-pixels.js":"https://open.spotifycdn.com/cdn/js/retargeting-pixels.1fa1ceda.js","js/urlRedirect.js":"https://open.spotifycdn.com/cdn/js/urlRedirect.156df566.js","js/urlScheme.js":"https://open.spotifycdn.com/cdn/js/urlScheme.f1e6e8b6.js"}'))throw new Error("No __CDN_FILE_URLS__ global variable available.");try{r=JSON.parse(n)}catch(a){throw new Error("Invalid __CDN_FILE_URLS__ global variable.")}if(!r[e])throw new Error("`".concat(e,"` is not available in __CDN_FILE_URLS__."));return r[e]}function El(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var wl=function(e){switch(e){case"facebook":return"url('".concat(bl("images/embed-legacy/fb_colour.svg"),"')");case"messenger":return"url('".concat(bl("images/embed-legacy/messenger_colour.svg"),"')");case"twitter":return"url('".concat(bl("images/embed-legacy/twitter_colour.svg"),"')");case"whatsapp":return"url('".concat(bl("images/embed-legacy/whatsapp.svg"),"')");case"link":return"url('".concat(bl("images/embed-legacy/copy-32_circle_grey_outline_bg.svg"),"')");case"embed":return"url('".concat(bl("images/embed-legacy/embed-code-32_circle_grey_outline_bg.svg"),"')");default:return"transparent"}},Sl=(0,l.zo)("div",{position:"relative",height:"100%",textAlign:"center"}),kl=(0,l.zo)("div",{fontSize:"14px",fontWeight:E,lineHeight:"16px",marginTop:"2px"}),Rl=(0,l.zo)("div",{display:"inline-flex",width:"100%",maxWidth:"220px",justifyContent:"space-around",whiteSpace:"nowrap",margin:"12px auto 0 auto"}),Pl=(0,l.zo)("button",(function(e){var t=e.$icon;return{backgroundImage:wl(t),backgroundColor:"transparent",backgroundRepeat:"no-repeat",width:"25px",height:"25px",border:"0",cursor:"pointer",display:"inline-block"}})),Tl=function(e){(0,p.Z)(n,e);var t=El(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"firstOverlayBtn",null),(0,r.Z)((0,u.Z)(e),"handleShareOnFacebook",(function(){hl(e.props.url)})),(0,r.Z)((0,u.Z)(e),"handleShareOnMessenger",(function(){_l(e.props.url)})),(0,r.Z)((0,u.Z)(e),"handleShareOnTwitter",(function(){yl(e.props.url)})),(0,r.Z)((0,u.Z)(e),"handleShareOnWhatsApp",(function(){ml(e.props.url)})),(0,r.Z)((0,u.Z)(e),"handleCopyURL",(function(){gl(e.props.url),e.props.copyURL(e.props.url)})),(0,r.Z)((0,u.Z)(e),"handleCopyEmbedCode",(function(){vl(e.props.uri),e.props.copyEmbedCode(e.props.uri)})),(0,r.Z)((0,u.Z)(e),"setFirstOverlayBtn",(function(t){e.firstOverlayBtn=t})),(0,r.Z)((0,u.Z)(e),"focusFirstOverlayBtn",(function(){e.firstOverlayBtn&&e.firstOverlayBtn.focus()})),e}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){this.focusFirstOverlayBtn()}},{key:"render",value:function(){var e=this.props.onClose;return a.createElement(fl,{onClose:e},a.createElement(Sl,null,a.createElement(kl,null,Qi.get("embed_share")),a.createElement(Rl,null,a.createElement(Pl,{ref:this.setFirstOverlayBtn,title:Qi.get("embed_share_facebook"),$icon:"facebook",onClick:this.handleShareOnFacebook}),a.createElement(Pl,{title:Qi.get("embed_share_messenger"),$icon:"messenger",onClick:this.handleShareOnMessenger}),a.createElement(Pl,{title:Qi.get("embed_share_twitter"),$icon:"twitter",onClick:this.handleShareOnTwitter}),a.createElement(Pl,{title:Qi.get("embed_share_whatsapp"),$icon:"whatsapp",onClick:this.handleShareOnWhatsApp}),a.createElement(Pl,{title:Qi.get("embed_share_link"),$icon:"link",onClick:this.handleCopyURL}),a.createElement(Pl,{title:Qi.get("embed_share_embed"),$icon:"embed",onClick:this.handleCopyEmbedCode}))))}}]),n}(a.PureComponent);function Al(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}(0,r.Z)(Tl,"defaultProps",{isVisible:!1});var Cl=(0,l.zo)("div",{position:"relative",display:"flex",height:"100%",justifyContent:"center",alignItems:"center"}),Il=(0,l.zo)("div",{fontSize:"14px",fontWeight:E,lineHeight:"16px",margin:"auto",textAlign:"center"}),Ll=function(e){(0,p.Z)(n,e);var t=Al(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props.onClose;return a.createElement(fl,{onClose:e},a.createElement(Cl,null,a.createElement(Il,null,Qi.get("embed_success_share_link"))))}}]),n}(a.PureComponent);function Ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nl="SHARE",jl="COPY_CONFIRMATION",Ml={visible:!1,view:void 0};const xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ml,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case il.SHOW_SHARE:return Dl(Dl({},e),{},{visible:!0,view:Nl});case il.COPY_URL:case il.COPY_EMBED_CODE:return Dl(Dl({},e),{},{visible:!0,view:jl});case il.HIDE_SHARE:return Dl({},Ml);default:return e}};function Ul(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Fl=function(e){(0,p.Z)(n,e);var t=Ul(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){return this.props.viewType===jl?a.createElement(Ll,this.props):a.createElement(Tl,this.props)}}]),n}(a.PureComponent);const Zl=(0,i.$j)((function(e){var t=M(e).uri;return{uri:t,url:I(t),viewType:ll(e)}}),(function(e){return{copyURL:function(t){return e({type:ol.COPY_URL})},copyEmbedCode:function(t){return e({type:ol.COPY_EMBED_CODE})},onClose:function(){return e({type:ol.HIDE_SHARE})}}}))(Fl);var Bl=function(e){return e.modal.visible},Yl=function(e){return Bl(e)&&!Y(e)},Kl=function(e){return Bl(e)&&Y(e)},Vl=function(e){return e.modal.type},Gl=function(e){var t=e.session;return!(!t.accessToken||t.isAnonymous)},Hl="MOBILE",Wl="DESKTOP",ql=function(e){return e.platform.isMobile?Hl:Wl},zl=n(1874);function Ql(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var $l=(0,l.zo)("button",(function(e){var t=e.$small,n=e.$primary;return{display:"inline-block",boxSizing:"border-box",border:0,cursor:"pointer",textAlign:"center",background:t||!n?"transparent":_.ekl,padding:t||!n?0:"12px 40px",borderRadius:t||!n?"":"20px",color:t&&n?_.ekl:_.ixZ}})),Xl=(0,l.zo)("span",(function(e){var t=e.$small;return{position:"relative",lineHeight:"16px",fontWeight:zl.fontWeightBlack,textTransform:"uppercase",whiteSpace:"nowrap",fontSize:t?"10px":"12px",letterSpacing:t?"2px":"1.7px",marginRight:t?"-2px":"-3px"}})),Jl=function(e){(0,p.Z)(n,e);var t=Ql(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.small,n=e.primary,r=e.onClick,o=e.children;return a.createElement($l,{$small:t,$primary:n,onClick:r},a.createElement(Xl,{$small:t},o))}}]),n}(a.PureComponent);function ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var tc=(0,l.zo)("div",(function(e){var t=e.$small;return{display:"flex",height:"100%",width:t?"100%":"75%",margin:"0 auto",justifyContent:t?"space-around":"center",flexDirection:"column",boxSizing:"border-box"}})),nc=(0,l.zo)("div",(function(e){var t=e.$small;return{fontWeight:E,textAlign:"center",fontSize:t?"14px":"20px",lineHeight:t?"16px":"24px"}})),rc=(0,l.zo)("ul",(function(e){return{margin:e.$small?0:"10px 0 0",textAlign:"center",listStyleType:"none",padding:0}})),ac=(0,l.zo)("li",(function(e){var t=e.$small;return{display:t?"inline-block":"",margin:t?"0 10px":"16px 0 0"}})),oc=function(e){(0,p.Z)(n,e);var t=ec(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.header,n=e.buttons,r=e.onClose,o=e.small,i=void 0!==o&&o;return a.createElement(fl,{onClose:r,small:i},a.createElement(tc,{$small:i},a.createElement(nc,{$small:i},t),a.createElement(rc,{$small:i},n.map((function(e,t){var n=e.label,r=e.onClick,o=e.primary;return a.createElement(ac,{key:"modal-button-".concat(t),$small:i},a.createElement(Jl,{onClick:r,primary:o,small:i},n))})))))}}]),n}(a.PureComponent);function ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var sc=(0,l.zo)("span",{whiteSpace:"nowrap"}),lc=function(e){(0,p.Z)(n,e);var t=ic(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e={line_break:"<br />",begin_highlight:'<span style="color: '.concat(_.ekl,'">'),end_highlight:"</span>"},t="";switch(this.props.resourceType){case"track":t=Qi.get("embed_listen_to_full_track",e);break;case"album":t=Qi.get("embed_listen_to_full_album",e);break;case"playlist":t=Qi.get("embed_listen_to_full_playlist",e);break;case"artist":t=Qi.get("embed_listen_to_full_artist",e);break;case"show":t=Qi.get("embed_listen_to_full_show",e);break;case"episode":t=Qi.get("embed_listen_to_full_episode",e)}return a.createElement(sc,{dangerouslySetInnerHTML:{__html:t}})}}]),n}(a.PureComponent),cc=function(e){return e.modalType===bi?e.isEpisodeAvailableInCountry?Qi.get("embed_episode_preview_not_available"):Qi.get("embed_track_not_available"):e.preferredPlatform===Hl?Qi.get("upsell_track_message"):a.createElement(lc,{resourceType:e.resourceType})},dc=function(e,t,n){return{label:e,onClick:t,primary:n}},uc=function(e){var t=e.stateProps,n=e.dispatchProps;return t.preferredPlatform===Hl?[dc(Qi.get("get_spotify"),n.getInSpotifyApp,!0),dc(Qi.get("play_on_spotify"),n.playInSpotifyApp)]:[dc(Qi.get("play_on_spotify"),n.playInSpotifyApp,!0),!t.isLoggedIn&&dc(Qi.get("embed_login"),n.clickLogin)].filter(Boolean)},pc={hideModal:function(){return{type:Si.HIDE_MODAL}},clickLogin:function(){return function(e,t){var n,r=(n=M(t()).uri,"https://accounts.spotify.com/login?utm_source=".concat(S,"&utm_medium=&utm_campaign=&continue=").concat(encodeURIComponent(I(n))));window.open(r,"_blank"),e({type:Si.CLICK_LOGIN})}},clickSignup:function(){return function(e,t){var n,r=(n=M(t()).uri,"https://www.spotify.com/signup/?creation_flow=embed&utm_source=".concat(S,"&utm_medium=&utm_campaign=&forward_url=").concat(encodeURIComponent(I(n))));window.open(r,"_blank"),e({type:Si.CLICK_SIGNUP})}},getInSpotifyApp:function(){return function(e,t){var n=t(),r=n.platform.isMobile?"_top":"_blank";window.open(O(n).toString(),r),e({type:Ai.GET_IN_APP})}},playInSpotifyApp:function(){return function(e,t){var n=t();e(Ui());var r=n.platform.isMobile?"_top":"_blank";window.open(L(n).toString(),r),e({type:Ai.PLAY_IN_APP})}}};const fc=(0,i.$j)((function(e){return{modalType:Vl(e),preferredPlatform:ql(e),isLoggedIn:Gl(e),isEpisodeAvailableInCountry:yi(e),resourceType:x(e)}}),pc,(function(e,t,n){return{small:"top"===n.area,onClose:t.hideModal,header:cc(e),buttons:uc({stateProps:e,dispatchProps:t})}}))(oc);var hc,_c=(0,l.zo)("div",(hc={},(0,r.Z)(hc,m,{height:"18px",width:"18px"}),(0,r.Z)(hc,g,{height:"25px",width:"25px"}),hc)),yc={filter:"drop-shadow(0 0 2px rgba(0, 0, 0, 0.2))"};const mc=function(){return a.createElement(_c,null,a.createElement("svg",{viewBox:"0 0 64 64",style:yc},a.createElement("title",null,Qi.get("play_on_spotify")),a.createElement("path",{fill:_.ixZ,d:"M50.9288482,28.3686995 C40.6139223,22.2429099 23.5996824,21.6796628 13.7528525,24.668235 C12.1712611,25.1477974 10.4991074,24.2551616 10.020312,22.674325 C9.54075242,21.0919599 10.4326187,19.4209426 12.0153564,18.9402338 C23.3188247,15.5091649 42.1091547,16.1717636 53.9838913,23.2207587 C55.4065211,24.0648651 55.8727065,25.9021053 55.0297516,27.3220687 C54.1860323,28.7439428 52.3476568,29.213188 50.9288482,28.3686995 M50.5910548,37.4417921 C49.8677032,38.6160515 48.3323482,38.9840345 47.1592422,38.2633534 C38.5600315,32.9774668 25.4464645,31.4459238 15.2725406,34.5342297 C13.953465,34.9331646 12.5598763,34.1887919 12.1594154,32.8720012 C11.7616293,31.5529179 12.5056154,30.1616135 13.8227803,29.7607681 C25.4453181,26.2337867 39.8932454,27.9418698 49.7702628,34.0118696 C50.9429866,34.7340793 51.3121138,36.2702077 50.5910548,37.4417921 M46.6754793,46.1553085 C46.1003899,47.0983843 44.8726409,47.3937643 43.9330097,46.8190535 C36.4186355,42.2263353 26.9604208,41.1892576 15.8216459,43.7334225 C14.748273,43.9798909 13.6787213,43.3069749 13.4337829,42.2335956 C13.1876981,41.1605985 13.8579352,40.0906583 14.9336008,39.8457184 C27.1232036,37.0589064 37.5791315,38.2583858 46.0140309,43.4124404 C46.9544263,43.986769 47.2505687,45.2152896 46.6754793,46.1553085 M31.9998089,0 C14.3271776,0 0,14.3268811 0,31.9996179 C0,49.6742653 14.3271776,64 31.9998089,64 C49.6732045,64 64,49.6742653 64,31.9996179 C64,14.3268811 49.6732045,0 31.9998089,0"})))};const gc=(0,l.zo)((function(){return a.createElement("svg",{viewBox:"0 0 16 16",style:{filter:b}},a.createElement("path",{fill:"white",d:"M11.6,9.81c-0.831,0-1.561,0.409-2.016,1.033L4.906,8.142C4.961,7.936,5,7.723,5,7.499c0-0.232-0.042-0.452-0.101-0.665 l4.67-2.696c0.454,0.635,1.192,1.052,2.031,1.052c1.381,0,2.5-1.119,2.5-2.5c0-1.38-1.119-2.5-2.5-2.5c-1.381,0-2.5,1.12-2.5,2.5 c0,0.182,0.022,0.359,0.059,0.53L4.442,5.943C3.984,5.372,3.289,4.999,2.5,4.999c-1.381,0-2.5,1.12-2.5,2.5C0,8.88,1.119,10,2.5,10 c0.798,0,1.5-0.38,1.957-0.962l4.706,2.717l0.007-0.012C9.128,11.926,9.1,12.114,9.1,12.31c0,1.381,1.119,2.5,2.5,2.5 c1.381,0,2.5-1.119,2.5-2.5C14.1,10.929,12.981,9.81,11.6,9.81z M11.6,1.189c0.827,0,1.5,0.673,1.5,1.5c0,0.827-0.673,1.5-1.5,1.5 c-0.827,0-1.5-0.673-1.5-1.5C10.1,1.862,10.773,1.189,11.6,1.189z M2.5,9C1.673,9,1,8.327,1,7.499c0-0.827,0.673-1.5,1.5-1.5 S4,6.672,4,7.499C4,8.327,3.327,9,2.5,9z M11.6,13.81c-0.827,0-1.5-0.673-1.5-1.5c0-0.827,0.673-1.5,1.5-1.5 c0.827,0,1.5,0.673,1.5,1.5C13.1,13.137,12.427,13.81,11.6,13.81z"}))}),{width:"100%",height:"100%"});function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var bc=function(e){(0,p.Z)(n,e);var t=vc(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.onShare,n=e.$styleProps;return a.createElement(Zs,{onClick:t,title:Qi.get("embed_share"),$styleProps:n},a.createElement(gc,null))}}]),n}(a.Component),Ec={CLICK_METADATA:"CLICK_METADATA"};function wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Sc=(0,l.zo)("div",{display:"flex",justifyContent:"space-between",flexDirection:"column",alignItems:"center"}),kc=(0,l.zo)("a",{padding:"10px"}),Rc={width:"16px",height:"16px",padding:"10px",boxSizing:"content-box"},Pc=(0,l.zo)("div",{display:"flex"}),Tc=function(e){(0,p.Z)(n,e);var t=wc(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.showShareModal,n=e.showModal,r=e.onShare,o=e.onClickLogo,i=e.link,s=e.isMobile,l=this.props.isLegacy?al:ps;return a.createElement(Pc,null,t&&!n&&a.createElement(Zl,null),n&&a.createElement(fc,{area:"top"}),a.createElement(l,null),a.createElement(Sc,null,a.createElement(kc,{href:i,target:s?"_top":"_blank",onClick:o},a.createElement(mc,null)),a.createElement(bc,{onShare:r,size:32,$styleProps:Rc})))}}]),n}(a.Component);const Ac=(0,i.$j)((function(e){return{isMobile:ql(e)===Hl,link:L(e).toString(),isLegacy:B(e),showShareModal:sl(e),showModal:Yl(e)}}),(function(e){return{onShare:function(){return e({type:ol.SHOW_SHARE})},onClickLogo:function(){return e({type:Ec.CLICK_METADATA})}}}))(Tc);var Cc;function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Lc=(0,l.zo)("div",{display:"flex",flexDirection:"row",position:"relative",textShadow:"0 0 2px rgba(0, 0, 0, 0.4)"}),Oc=(0,l.zo)("div",(Cc={position:"relative"},(0,r.Z)(Cc,m,{height:"80px",width:"80px"}),(0,r.Z)(Cc,g,{flex:1,maxHeight:"33.3333vh",maxWidth:"33.3333vh",minHeight:"161px",minWidth:"161px"}),Cc)),Dc=(0,l.zo)("div",{position:"relative",flex:2,minWidth:"66.6666vw"}),Nc=function(e){(0,p.Z)(n,e);var t=Ic(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props.hasBigCoverArt;return a.createElement(Lc,null,a.createElement(Oc,null,a.createElement(us,{noCoverArt:e})),a.createElement(Dc,null,a.createElement(Ac,null)))}}]),n}(a.Component);const jc=(0,i.$j)((function(e){return{hasBigCoverArt:V(e)}}))(Nc);var Mc=function(e){var t,n=e.volume;return t=0===n?a.createElement("path",{d:"M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z M15.623,5.853l-0.707-0.707l-2.147,2.147 l-2.146-2.147L9.916,5.853L12.062,8l-2.146,2.146l0.707,0.707l2.146-2.147l2.147,2.147l0.707-0.707L13.477,8L15.623,5.853z"}):n<1/3?a.createElement("path",{d:"M10.699,5.18l-0.657,0.77C10.548,6.486,10.863,7.205,10.863,8s-0.316,1.514-0.822,2.051l0.657,0.769 c0.72-0.723,1.165-1.72,1.165-2.82S11.418,5.903,10.699,5.18z M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072 L7,3.732z"}):n<2/3?a.createElement("path",{d:"M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z M11.863,8c0,1.403-0.585,2.668-1.519,3.577 l0.653,0.764C12.145,11.248,12.863,9.71,12.863,8c0-1.709-0.718-3.248-1.866-4.341l-0.653,0.764 C11.279,5.332,11.863,6.597,11.863,8z"}):a.createElement("path",{d:"M12.945,1.379l-0.652,0.763c1.577,1.462,2.57,3.544,2.57,5.858s-0.994,4.396-2.57,5.858l0.651,0.763 c1.79-1.645,2.919-3.998,2.919-6.621S14.735,3.024,12.945,1.379z M10.673,4.039l-0.651,0.763C10.849,5.617,11.363,6.749,11.363,8 s-0.515,2.382-1.342,3.199l0.651,0.763c1.04-1,1.691-2.404,1.691-3.961S11.713,5.039,10.673,4.039z M0,5v6h2.804L8,14V2L2.804,5H0z M7,3.732v8.536L3.072,10H1V6h2.072L7,3.732z"}),a.createElement("svg",{viewBox:"0 0 16 16"},a.createElement("title",null,"Volume"),t)};Mc.defaultProps={volume:1};const xc=(0,l.zo)(Mc,{width:"100%",height:"100%"});function Uc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var Fc="19px",Zc="".concat(38,"px"),Bc="14px",Yc=(0,l.zo)("tr",(function(e){var t=e.$isCurrentTrack,n=e.$isPlayable;return(0,r.Z)({color:t?_.By7:_.ixZ,lineHeight:Fc,cursor:"pointer",verticalAlign:"top",userSelect:"none",opacity:n?1:v},":hover",{backgroundColor:n?"rgba(255, 255, 255, 0.2)":"none"})})),Kc=(0,l.zo)("td",(function(e){var t=e.$isCurrentTrack;return{color:_.ixZ,padding:"6px 8px 6px 16px",fontFeatureSettings:'"tnum"',width:"1%",minWidth:Bc,opacity:t?1:v}})),Vc=(0,l.zo)("td",(function(e){var t=e.$isCurrentTrack;return{color:t?_.By7:_.ixZ,textAlign:"right",padding:"6px 16px 6px 8px",fontFeatureSettings:'"tnum"',fontWeight:t?E:"unset",opacity:t?1:v,width:"1%"}})),Gc=(0,l.zo)("td",{position:"relative",padding:"6px 0"}),Hc=(0,l.zo)("div",(function(e){return{position:"relative",height:e.$hasSubtitle?Zc:Fc,width:"100%"}})),Wc=(0,l.zo)("div",(function(e){var t=e.$isCurrentTrack;return{position:"absolute",top:0,height:Fc,width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:t?E:"unset"}})),qc=(0,l.zo)("div",{position:"absolute",top:Fc,height:Fc,width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:_.ixZ,opacity:v}),zc=(0,l.zo)("div",{position:"absolute",width:Bc,height:Bc,paddingTop:"2px",fill:_.By7}),Qc=function(e){(0,p.Z)(n,e);var t=Uc(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"handleRowClick",(function(){var t=e.props;(0,t.onTrackClick)(t.index)})),(0,r.Z)((0,u.Z)(e),"handleKeyDown",(function(t){var n=e.props,r=n.onTrackClick,a=n.index;"Enter"===t.code&&r(a)})),e}return(0,d.Z)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.number,r=t.title,o=t.subtitle,i=t.duration,s=t.isCurrentTrack,l=t.isPlayable;return a.createElement(Yc,{tabIndex:"0",$isCurrentTrack:s,$isPlayable:l,onClick:this.handleRowClick,onKeyDown:function(t){return e.handleKeyDown(t)}},a.createElement(Kc,{$isCurrentTrack:s},s?a.createElement(zc,null,a.createElement(xc,null)):n),a.createElement(Gc,null,a.createElement(Hc,{$hasSubtitle:!!o},a.createElement(Wc,{$isCurrentTrack:s},a.createElement("span",{dir:"auto"},r)),o&&a.createElement(qc,null,a.createElement("span",{dir:"auto"},o)))),a.createElement(Vc,{$isCurrentTrack:s},Ss(i)))}}]),n}(a.Component);function $c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}(0,r.Z)(Qc,"defaultProps",{onTrackClick:function(){},isCurrentTrack:!1});var Xc=(0,l.zo)("table",{position:"relative",borderCollapse:"collapse",width:"100%"}),Jc=function(e){(0,p.Z)(n,e);var t=$c(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,n=e.tracks,r=e.onTrackClick,o=e.currentTrackUri,i=e.isPlaylist;if(!n||n.length<1)return null;var s=function(e){return"episode"===e.type},l=function(e){return!(!t||!s(e))||e.is_playable},c=function(e){if(i)return s(e)?e.show.name:e.artists.map((function(e){return e.name})).join(Qi.getSeparator())};return a.createElement(Xc,null,a.createElement("tbody",null,n.map((function(e,t){return a.createElement(Qc,{index:t,number:t+1,title:e.name,subtitle:c(e),duration:e.duration_ms,onTrackClick:r,isCurrentTrack:o===e.uri,isPlayable:l(e),key:"".concat(t,"-").concat(e.uri)})}))))}}]),n}(a.PureComponent);const ed=(0,i.$j)((function(e){return{tracks:U(e),currentTrackUri:e.playback.trackUri,isPlaylist:"playlist"===x(e),isLoggedIn:Gl(e)}}),(function(e){return{onTrackClick:function(t){return e(Fi(t))}}}))(Jc);function td(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var nd=(0,l.zo)("div",{position:"relative",backgroundColor:"rgba(0, 0, 0, 0.4)",flex:1,overflowY:"hidden"}),rd=(0,l.zo)("div",(function(e){return{overflowY:e.$scrolling?"auto":"hidden",height:"100%"}})),ad=(0,l.zo)("div",{position:"relative",width:"100%",height:"100%",boxSizing:"border-box",padding:"8px"}),od=function(){return a.createElement(ad,null,a.createElement(us,{noButton:!0,top:!0}))},id=function(e){(0,p.Z)(n,e);var t=td(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.showModal,n=e.hasBottomSection,r=e.hasBigCoverArt;if(!n)return a.createElement(nd,null);var o=r?a.createElement(od,null):a.createElement(ed,null),i=!r&&!t;return a.createElement(nd,null,a.createElement(rd,{$scrolling:i},o),t&&a.createElement(fc,{area:"bottom"}))}}]),n}(a.PureComponent);const sd=(0,i.$j)((function(e){return{hasBigCoverArt:V(e),hasBottomSection:Y(e),showModal:Kl(e)}}))(id);function ld(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var cd=(0,l.zo)("div",(function(e){var t=e.$backgroundColor;return{color:_.ixZ,backgroundColor:t,position:"relative",display:"flex",flexDirection:"column",height:"100vh",fontWeight:"200",fontSize:"14px",lineHeight:"19px"}})),dd=(0,l.zo)("div",{position:"absolute",top:0,right:0,bottom:0,left:0,background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.8))",display:"flex",flexDirection:"column"}),ud=function(e){(0,p.Z)(n,e);var t=ld(n);function n(){var e;(0,c.Z)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,r.Z)((0,u.Z)(e),"onMouseEnter",(function(){document.removeEventListener("mouseenter",e.onMouseEnter),e.props.player.initialize()})),e}return(0,d.Z)(n,[{key:"componentDidMount",value:function(){this.props.onMount(),document.addEventListener("mouseenter",this.onMouseEnter)}},{key:"render",value:function(){var e=this.props.resource;return a.createElement(cd,{$backgroundColor:e.dominantColor},a.createElement(dd,null,a.createElement(jc,null),a.createElement(sd,null)))}}]),n}(a.Component),pd="MOUNTED",fd={onMount:function(){return{type:pd}}};const hd=(0,i.$j)((function(e){return{resource:M(e),player:_i(e)}}),fd)(ud);var _d=n(97779),yd=n(53894),md={};const gd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:md,t=arguments.length>1?arguments[1]:void 0;return t.type,e};function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ed={isPlaying:!1,isPaused:!1};const wd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ed,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ci.PLAY:return bd(bd({},e),{},{isPlaying:!0,isPaused:!1});case Ci.PAUSE:return bd(bd({},e),{},{isPlaying:!1,isPaused:!0});case Ci.TRACK_CHANGE:return bd(bd({},e),{},{trackUri:t.uri});case Ci.RESET:return Ed;default:return e}};const Sd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ci.PROGRESS_UPDATE:return t.progress||0;case Ci.TRACK_CHANGE:return 0;default:return e}};const kd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e};var Rd=ci("enableLogin")?{accessToken:ci("accessToken"),accessTokenExpirationTimestampMs:ci("accessTokenExpirationTimestampMs"),loggedIn:!ci("isAnonymous"),premiumOnlyMarket:ci("premiumOnlyMarket")}:{};const Pd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rd;return e};var Td={RESIZE_VIEWPORT:"RESIZE_VIEWPORT"};const Ad=Td;function Cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cd(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ld={width:window.innerWidth,height:window.innerHeight};const Od=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ld,t=arguments.length>1?arguments[1]:void 0;return t.type===Ad.RESIZE_VIEWPORT?Id(Id({},e),{},{width:t.width,height:t.height}):e};var Dd={SET_PLAYBACK_TO_PREVIEW:"SET_PLAYBACK_TO_PREVIEW"};const Nd=Dd;function jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xd={isMobile:ci("isMobile"),isSafari:navigator.vendor.toLowerCase().indexOf("apple")>=0,hasSpotifyMobile:ci("isSpotified"),forcePreview:!1};const Ud=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xd,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===Nd.SET_PLAYBACK_TO_PREVIEW?Md(Md({},e),{},{forcePreview:!0}):e};var Fd=n(7088),Zd=n(48591),Bd=n(76362),Yd=n(39828),Kd=function(){return"undefined"==typeof window||void 0===window.gtag||void 0===window.google_tag_manager},Vd=n(8495),Gd=n(6182),Hd=function(e,t,n){return function(e,t,n){Kd()||window.gtag("event",t,{event_category:e,event_label:n})}(e,t,n)},Wd=[Ci.PROGRESS_UPDATE];var qd,zd=n(11752),Qd=(n(70189),n(96848)),$d=n(15861),Xd=n(87757),Jd=n.n(Xd);n(23157);function eu(e){return tu.apply(this,arguments)}function tu(){return(tu=(0,$d.Z)(Jd().mark((function e(t){return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qd){e.next=2;break}throw new Error("Invalid call to sendMetric before initSemanticMetrics.");case 2:return e.abrupt("return",qd(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}var ru,au=function(e){(0,p.Z)(n,e);var t=nu(n);function n(e){var r;(0,c.Z)(this,n);var a=e.message,o=e.url,i=e.method,s=e.status,l=e.response;return(r=t.call(this,a)).name="HttpResponseError",r.requestUrl=o,r.requestMethod=i,r.status=s,r.response=l,r}return(0,d.Z)(n,null,[{key:"fromResponse",value:function(e,t){return new n({message:e.statusText,url:e.url,method:t,status:e.status,response:e})}}]),n}((0,ae.Z)(Error)),ou=function(e){(0,p.Z)(n,e);var t=nu(n);function n(e){var r;(0,c.Z)(this,n);var a=e.timeout,o=e.url,i=e.method;return(r=t.call(this,{message:"".concat(i.toUpperCase()," ").concat(o," timed out (").concat(a,"ms)"),url:o,method:i,status:503})).name="HttpRequestTimeoutError",r.timeout=a,r}return(0,d.Z)(n)}(au);function iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lu=function(){function e(){(0,c.Z)(this,e),this._accessToken=null,this._market="",this._headers=[],this._globalRequestHeaders=[],this._shouldSendMarket=!0,this._shouldSendGlobalHeaders=!0,this._locale=null,this._shouldSendLocale=!1,this._shouldSendAuthorization=!0,this._host="",this.path="",this.responseType="json",this.queryParameters=void 0,this._method="GET",this.jsonContentType=!1,this.body=null,this._endpointIdentifier=null,this._startTimestamp=null,this._includeCredentials=!1}var t;return(0,d.Z)(e,[{key:"getRequestImplementation",value:function(){return ru}},{key:"accessToken",set:function(e){this._accessToken=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"startTimestamp",get:function(){return this._startTimestamp}},{key:"host",get:function(){return this._host}},{key:"method",get:function(){return this._method}},{key:"endpointIdentifier",get:function(){return this._endpointIdentifier}},{key:"withHost",value:function(e){return this._host=e,this}},{key:"withPath",value:function(e){return this.path=e,this}},{key:"withResponseType",value:function(e){return this.responseType=e,this}},{key:"withEndpointIdentifier",value:function(e){return this._endpointIdentifier=e,this}},{key:"withQueryParameters",value:function(e){return this.queryParameters=e,this}},{key:"withBody",value:function(e){return this.body=e,this}},{key:"withMethod",value:function(e){return this._method=e,this}},{key:"withoutMarket",value:function(){return this._shouldSendMarket=!1,this}},{key:"withoutGlobalHeaders",value:function(){return this._shouldSendGlobalHeaders=!1,this}},{key:"withoutAuthorization",value:function(){return this._shouldSendAuthorization=!1,this}},{key:"withLocale",value:function(e){return this._shouldSendLocale=!0,e&&(this._locale=e),this}},{key:"withJsonContentType",value:function(){return this.jsonContentType=!0,this}},{key:"withHeaders",value:function(e){return this._headers=e,this}},{key:"withCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"onBeforeSend",value:function(e){}},{key:"onAfterSend",value:function(e){}},{key:"send",value:(t=(0,$d.Z)(Jd().mark((function e(){var t,n,r,a=this;return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new ru(this.method,"".concat(this._host).concat(this.path),this._shouldSendAuthorization),this._shouldSendMarket&&this.market&&(this.queryParameters=su(su({},this.queryParameters),{},{market:this.market})),this._shouldSendLocale&&this.locale&&(this.queryParameters=su(su({},this.queryParameters),{},{locale:this.locale})),this.locale&&t.addHeader("Accept-Language",this.locale),t.withQueryParameters(this.queryParameters),t.withResponseType(this.responseType),this._shouldSendAuthorization&&this._accessToken&&t.addHeader("Authorization","Bearer ".concat(this._accessToken)),t.addHeader("Accept","application/json"),this._includeCredentials&&t.includeCredentials(),this._shouldSendGlobalHeaders&&this._globalRequestHeaders.length>0&&this._globalRequestHeaders.forEach((function(e){var n=(0,Q.Z)(e,2),r=n[0],a=n[1];t.addHeader(r,a)})),n=0;n<this._headers.length;n++)r=this._headers[n],t.addHeader(r.key,r.value);this.jsonContentType&&t.addHeader("Content-Type","application/json;charset=UTF-8"),this.body&&t.withPostData(this.body),e.prev=13,this.onBeforeSend(t),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(13),e.abrupt("return",Promise.reject(e.t0));case 20:return this._startTimestamp=Date.now(),e.abrupt("return",t.send().then((function(e){return a.onAfterSend(),e})).catch((function(e){throw a.onAfterSend(e),e})));case 22:case"end":return e.stop()}}),e,this,[[13,17]])}))),function(){return t.apply(this,arguments)})}],[{key:"setRequestImplementation",value:function(e){ru=e}}]),e}(),cu=function(){function e(t,n,r){return(0,c.Z)(this,e),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._authorize=r,this._includeCredentials=!1,this}var t;return(0,d.Z)(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=(0,$d.Z)(Jd().mark((function e(){var t,n,r,a,o;return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Jo(),n=new URLSearchParams(this.queryParameters).toString(),r="".concat(this.url).concat(n?"?".concat(n):""),a={method:this.method,responseType:this.responseType,headers:this._headers,authorize:this._authorize,rejectNotOk:!0},this._includeCredentials&&(a.credentials="include"),this.postData&&(null!==(o=this._headers["Content-Type"])&&void 0!==o&&o.startsWith("application/json;charset=UTF-8")?a.payload=JSON.stringify(this.postData):a.payload=this.postData),e.abrupt("return",t.request(r,a).then((function(e){return e})).catch((function(e){throw e})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),du=function(){function e(t){(0,c.Z)(this,e),this._accessToken=null,this._market="",this._locale="",this._globalRequestHeaders=[],this._RequestImplementation=t||cu}return(0,d.Z)(e,[{key:"accessToken",get:function(){return this._accessToken},set:function(e){this._accessToken=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"resetPendingRequests",value:function(){}},{key:"build",value:function(){lu.setRequestImplementation(this._RequestImplementation);var e=new lu;return e.accessToken=this._accessToken,e.market=this.market,e.locale=this.locale,e.globalRequestHeaders=this.globalRequestHeaders,e}}]),e}();function uu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,f.Z)(this,n)}}function pu(e){return"".concat(e.method,"::").concat(e.host).concat(e.path,"::").concat(JSON.stringify(e.queryParameters))}function fu(e,t,n){try{eu({metric_type:Qd.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:t,isFatal:n}}).catch((function(){return{}}))}catch(r){}}var hu=function(e){(0,p.Z)(n,e);var t=uu(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).pendingRequests=new Set,r}return(0,d.Z)(n,[{key:"resetPendingRequests",value:function(){this.pendingRequests=new Set}},{key:"build",value:function(){var e,t=this,r=(0,zd.Z)((0,h.Z)(n.prototype),"build",this).call(this);return r.onBeforeSend=function(){if(e=pu(r),t.pendingRequests.has(e)){var n=new Error("DUPLICATE_REQUEST_ERROR: Already sent this request (".concat(e,")"));throw n.name="DUPLICATE_REQUEST_ERROR",n}"GET"===r.method.toUpperCase()&&t.pendingRequests.add(e)},r.onAfterSend=function(n){e=pu(r);var a="unknown",o=!1;if(null!==r.endpointIdentifier&&(o=!0,a="".concat(r.method," ").concat(r.host||window.location.origin,"::").concat(r.endpointIdentifier)),n)throw o&&fu(a,JSON.stringify(n.status||0),JSON.stringify(0===(r.endpointIdentifier||"").indexOf("/me"))),t.pendingRequests.delete(e),au.fromResponse(n,r.method);if(o){fu(a,"200","false");var i=Date.now()-(r.startTimestamp||0);!function(e,t,n){try{eu({metric_type:Qd.MetricTypes.TIMER,what:"request-duration",value:n,tags:{endpoint:e,statusCode:t}}).catch((function(){return{}}))}catch(r){}}(a,"200",Qd.Time.fromMillis(i).asNanos())}t.pendingRequests.delete(e)},r}}]),n}(du),_u=n(54098),yu=n(34139),mu=n.n(yu),gu=n(28599),vu=n.n(gu);function bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bu(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wu=mu()(_u.fetch);function Su(e){return e&&void 0!==e.retries&&e.retries>0?wu:_u.fetch}function ku(e,t){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,$d.Z)(Jd().mark((function e(t,n){var r,a,o,i,s,l=arguments;return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:1e4,a=new(vu()),o=a.signal,i=setTimeout((function(){return a.abort()}),r),s=Su(n),e.abrupt("return",s(t,Eu(Eu({},n),{},{signal:o})).then((function(e){return clearTimeout(i),e})).catch((function(e){var a;if("AbortError"===e.name)throw new ou({timeout:r,url:t,method:null!==(a=null==n?void 0:n.method)&&void 0!==a?a:"get"});throw clearTimeout(i),e})));case 6:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Au=function(){function e(t,n){return(0,c.Z)(this,e),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._includeCredentials=!1,this}var t;return(0,d.Z)(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=(0,$d.Z)(Jd().mark((function e(){var t,n,r,a=this;return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.postData&&(t=null!==(n=this._headers["Content-Type"])&&void 0!==n&&n.startsWith("application/json;charset=UTF-8")?JSON.stringify(this.postData):this.postData),r=new URLSearchParams(this.queryParameters).toString(),e.abrupt("return",ku("".concat(this.url).concat(r?"?".concat(r):""),{method:this.method,body:t,credentials:this._includeCredentials?"include":void 0,headers:Tu({"User-Agent":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0}.SERVER_UA,"Content-Type":Cu(this.responseType)},this._headers)}).then(function(){var e=(0,$d.Z)(Jd().mark((function e(t){return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw au.fromResponse(t,a.method||"GET");case 2:if("text"!==a.responseType){e.next=8;break}return e.next=5,t.text();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,t.json();case 10:e.t0=e.sent;case 11:return e.t1=e.t0,e.t2=t.status,e.abrupt("return",{body:e.t1,status:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw e})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function Cu(e){return"text"===e?"text/plain":"application/json"}var Iu=null,Lu=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"setSession",value:function(e){if(e){var t=e.accessToken,n=this.getInstance();n.accessToken=t,t||n.resetPendingRequests()}}},{key:"setLocale",value:function(e){this.getInstance().locale=e}},{key:"setGlobalRequestHeaders",value:function(e){this.getInstance().globalRequestHeaders=e}},{key:"setMarket",value:function(e){this.getInstance().market=e}},{key:"resetInstance",value:function(){Iu=null}},{key:"getInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Iu||(Iu=this.createNew(e)),Iu}},{key:"createNew",value:function(e){var t=e.Constructor,n=void 0===t?hu:t,r=e.fromServer;return new n(void 0!==r&&r?Au:cu)}}]),e}(),Ou=function(e){var t=e.getState();_i(t).onTrackChange((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.uri,r=n;r!==e.getState().playback.trackUri&&e.dispatch(xi(r))})),_i(t).onProgress((function(t){var n,r=t.position;e.dispatch((n=r,function(e){n>29500&&e(Ri()),e({type:Ai.PROGRESS_UPDATE,progress:n})}))})),_i(t).onReset((function(){e.dispatch({type:Ai.RESET})})),_i(t).onPause((function(){e.dispatch(Ni())})),_i(t).onPlay((function(){e.dispatch(Di())})),_i(t).onUnavailableTrack((function(){e.dispatch(Ui()),e.dispatch({type:Ai.UNAVAILABLE_TRACK})}))};const Du=function(e){var t=e.getState();Lu.setSession(t.session),_i(t).onInitializationFailure((function(t){t.error.code!==Qo.EME_NO_SUPPORTED_KEYSYSTEM&&t.error.code!==Qo.LIST_PLAYER_NO_TRACK_PLAYER&&t.error.code!==Qo.EME_API_NOT_SUPPORTED||(e.dispatch({type:Dd.SET_PLAYBACK_TO_PREVIEW}),Ou(e))})),Ou(e);window.addEventListener("resize",ws((function(){var t,n;e.dispatch((t=window.innerWidth,n=window.innerHeight,{type:Td.RESIZE_VIEWPORT,width:t,height:n}))}),100))};var Nu=n(10965),ju=n(92876),Mu=n(90351);function xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fu,Zu=["open.spotifycdn.com","xpui.app.spotify.com"],Bu=n(43107);function Yu(e){var t="".concat("https://apresolve.spotify.com/","?type=").concat(Fu.DEALER,"&type=").concat(Fu.WEBGATE);return(0,$d.Z)(Jd().mark((function n(){var r,a,o,i,s,l,c,d;return Jd().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new AbortController,a=setTimeout((function(){return r.abort()}),e),n.prev=2,n.next=5,fetch(t,{signal:r.signal});case 5:return i=n.sent,clearTimeout(a),n.next=9,i.json();case 9:o=n.sent,n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(2),!r.signal.aborted){n.next=16;break}throw new Error("x-resolve request timed out after ".concat(e," ms"));case 16:throw n.t0;case 17:if(Array.isArray(o[Fu.DEALER])&&Array.isArray(o[Fu.WEBGATE])&&0!==o[Fu.DEALER].length&&0!==o[Fu.WEBGATE].length){n.next=19;break}throw new Error("x-resolve responded with incomplete results");case 19:return s=o[Fu.DEALER][0],l=o[Fu.WEBGATE][0],c="wss://".concat(s.replace(/:443$/,"")),d="https://".concat(l.replace(/:443$/,"")),n.abrupt("return",{dealer:c,webgate:d,webapi:"https://api.spotify.com/"});case 24:case"end":return n.stop()}}),n,null,[[2,12]])})))}!function(e){e.DEALER="dealer",e.WEBGATE="spclient"}(Fu||(Fu={}));const Ku=JSON.parse('{"Ls":"https://api.spotify.com","XA":"https://spclient.wg.spotify.com","xM":"https://accounts.spotify.com","l3":"https://api-partner.spotify.com"}');var Vu=Ku.Ls,Gu=Ku.XA,Hu=Ku.l3;Ku.xM,"".concat(Vu,"/v1"),"".concat(Gu,"/melody/v1"),"".concat(Gu,"/radio-apollo/v3"),"".concat(Gu,"/recently-played/v3"),"".concat(Gu,"/collection-view/v1"),"".concat(Gu,"/sponsoredplaylist/v1"),"".concat(Gu,"/social-connect/v2"),"".concat(Gu,"/playlist/v2"),"".concat(Gu,"/inspiredby-mix/v2"),"".concat(Gu,"/ads"),"".concat(Hu,"/pathfinder/v1"),"".concat(Gu,"/autoplay-enabled"),"".concat(Gu,"/age-verification/v1"),"".concat(Gu,"/concerts"),"".concat(Gu,"/presence-view"),"".concat(Gu,"/presence2"),"".concat(Gu,"/find-friends"),"".concat(Gu,"/track-credits-view"),"".concat(Gu,"/color-lyrics/v2"),"".concat(Gu,"/metadata/4"),"".concat(Gu,"/user-profile-view/v3"),"".concat(Gu,"/consumer-wrapped/v1"),"".concat(Gu,"/campaigns-service/v1"),"".concat(Gu,"/consumer-only-you/v1"),"".concat(Gu,"/stories-view/v1"),"".concat(Gu,"/soundfinder/v1"),"".concat(Gu,"/"),"".concat(Gu,"/socialgraph/v2"),"".concat(Gu,"/vanilla/v1/views/hub2"),"".concat(Gu,"/ondemand-selector/v2"),"".concat(Gu,"/playlist-permission/v1"),"".concat(Gu,"/stories-view/v3"),"".concat(Gu,"/blend-invitation"),"".concat(Gu,"/playlistfreshener"),"".concat(Gu,"/spotify.audiobookcashier.v1.AudiobookCashier");function Wu(e){return Date.now()>=e.accessTokenExpirationTimestampMs}var qu,zu,Qu=n(22378);function $u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;(0,Nu.S1)(Uu(Uu({dsn:e,allowUrls:Zu,sampleRate:.1,release:t},n),{},{integrations:[new Mu.x],ignoreErrors:[/\/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}\/main\.js/,/^NotFoundError: Failed to execute '(removeChild|insertBefore)' on 'Node': The node.*child.*this node.$/,/ResizeObserver loop limit exceeded/,"PresentationRequest",/DA97E0680A7030159BC0C0EE3A1D098E947A08E3/]})),(0,ju.e)((function(e){var t=k("config").correlationId;t&&e.setUser({id:t}),Object.keys(r).forEach((function(t){e.setExtra(t,r[t])})),""!==document.referrer&&e.setExtra("referrer",document.referrer),a&&e.setTag("container",a)}))}("https://db1eaaeafb9044828c39cd41f9805164@sentry.io/265628","embed-legacy_2022-08-29_1661792776145_0a039fc");var Ju=(0,q.createBaseTransport)({providers:{endpoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout,n=void 0===t?3e3:t,r=Yu(n),a=(0,Bu.Q)({});return function(){var e=(0,$d.Z)(Jd().mark((function e(t){return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t);case 3:case 11:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=11,a(t);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}(),token:function(){var e,t,n=null;try{var r=document.getElementById("config"),a=r?JSON.parse(r.innerHTML):{};["accessToken","accessTokenExpirationTimestampMs","isAnonymous"].every((function(e){return e in a}))&&(n=a)}catch(o){}return e=(0,$d.Z)(Jd().mark((function e(){var t,r,a,o,i,s;return Jd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||Wu(n)){e.next=4;break}t=n,e.next=10;break;case 4:return e.next=6,l=Lu.getInstance(),c="transport",l.build().withHost("").withPath("/get_access_token").withQueryParameters({reason:c,productType:"embed"}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/get_access_token").send();case 6:if(r=e.sent,null!==(t=r.body)){e.next=10;break}throw new Error("Token is currently unavailable.");case 10:return o=(a=t).accessToken,i=a.accessTokenExpirationTimestampMs,s=Math.floor(((i||0)-Date.now())/1e3),e.abrupt("return",[o,s]);case 13:case"end":return e.stop()}var l,c}),e)}))),t=null,(0,$d.Z)(Jd().mark((function n(){var r;return Jd().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return",t);case 2:return t=e(),n.prev=3,n.next=6,t;case 6:r=n.sent;case 7:return n.prev=7,t=null,n.finish(7);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n,null,[[3,,7,10]])})))}()},disconnectBeforeUnload:!0,reconnectionRetries:3,requestMode:"fetch"});ci("isAnonymous")||Ju.addPlugin(Qu.dv,{WebSocket}),Ju.on(q.TransportEvent.CONNECTED,(function(){Ju.isAuthenticated()||Ju.authenticate()})),Ju.on(q.TransportEvent.DISCONNECTED,(function(){Ju.connect()})),Ju.connect(),function(e){Xo=e}(Ju);var ep=function(e){return function(e,t,n){return(0,Vd.mi)({transport:e,suppressPersist:!1,context:[(0,Gd.jx)(t),(0,Gd.UR)({version:"embed-legacy_2022-08-29_1661792776145_0a039fc"}),(0,Gd.Mb)(),(0,Gd.sr)(n)]})}(e,ci("clientId"),ci("correlationId"))}(Ju),tp=document.getElementById("resource"),np=tp&&tp.innerText;if(!np)throw new Error("Element #resource was not found or has invalid content.");var rp,ap=JSON.parse(decodeURIComponent(np)),op=(0,r.Z)({},ap.uri,ap),ip=(rp={entities:op,resource:ap.uri},U(rp).reduce((function(e,t){return j(j({},e),{},(0,r.Z)({},t.uri,t))}),{})),sp=JSON.parse((null===(qu=document.getElementById("translations"))||void 0===qu?void 0:qu.innerHTML)||"{}"),lp=null===(zu=document.getElementById("translations"))||void 0===zu?void 0:zu.getAttribute("data-locale");Qi.setDictionary(sp),Qi.setLocale(lp||"en");var cp=function(e,t){var n=(0,_d.MT)((0,_d.UY)({entities:gd,playback:wd,progress:Sd,resource:kd,session:Pd,viewport:Od,platform:Ud,share:xl,modal:wi,features:function(){return ci("features")}}),e,(0,_d.qC)((0,_d.md)(yd.Z,function(e){return function(t){return function(n){return function(r){var a=t.getState().resource;if(!a)return n(r);var o=!t.getState().session.loggedIn,i=a.toString(),s=i.split(":"),l=(0,Q.Z)(s,2)[1];if(r.type===pd){var c={page:l,type:"enter",view_uri:i,referrer:document.referrer},d=o?(0,Fd.t)(c):(0,Zd.v)(c);e.send(d)}else if(-1===Wd.indexOf(r.type)){var u={page:l,action_type:String(r.type).toLowerCase(),view_uri:i},p=o?(0,Bd.w)(u):(0,Yd.p)(u);Hd("action",r.type),e.send(p)}return n(r)}}}}(t)),(function(e){return e})));return Du(n),n}({entities:Xu(Xu({},op),ip),resource:ap.uri},ep),dp=document.createElement("div");dp.id="main",document.body.appendChild(dp),document.body.style.margin="0",document.body.style.overflow="hidden",o.render(a.createElement(i.zt,{store:cp},a.createElement(l.zt,{value:new s.Z},a.createElement(hd,null))),dp)}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,a,o)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,a,o]=e[d],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={10:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(l)var d=l(r)}for(t&&t(n);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[802],(()=>r(40465)));a=r.O(a)})();
//# sourceMappingURL=embed-legacy.fbfabdfc.js.map